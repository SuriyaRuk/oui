(window["dataSourceManagement_bundle_jsonpfunction"]=window["dataSourceManagement_bundle_jsonpfunction"]||[]).push([[2],{144:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"mountManagementSection",(function(){return mountManagementSection}));var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(10);var external_osdSharedDeps_React_=__webpack_require__(1);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ReactDom_=__webpack_require__(13);var external_osdSharedDeps_ReactDom_default=__webpack_require__.n(external_osdSharedDeps_ReactDom_);var external_osdSharedDeps_ReactRouterDom_=__webpack_require__(12);var public_=__webpack_require__(11);var lib=__webpack_require__(24);var external_osdSharedDeps_OsdI18n_=__webpack_require__(0);function getListBreadcrumbs(){return[{text:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSources.listBreadcrumb",{defaultMessage:"Data sources"}),href:"/"}]}function getCreateBreadcrumbs(){return[...getListBreadcrumbs(),{text:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSources.createBreadcrumb",{defaultMessage:"Create data source"}),href:"/create"}]}function getEditBreadcrumbs(dataSource){return[...getListBreadcrumbs(),{text:dataSource.title,href:"/".concat(dataSource.id)}]}var external_osdSharedDeps_ElasticEui_=__webpack_require__(2);var data_sources_=__webpack_require__(4);var types=__webpack_require__(5);const Header=()=>{const changeTitle=Object(public_["useOpenSearchDashboards"])().services.chrome.docTitle.change;changeTitle(external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSourceHeader",{defaultMessage:"Create data source connection"}));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement("div",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],null,external_osdSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"createDataSourceHeader"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSourceHeader",defaultMessage:"Create data source connection"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.description",defaultMessage:"Create a new data source connection to help you retrieve data from an external OpenSearch compatible source."}),external_osdSharedDeps_React_default.a.createElement("br",null))))))};var utils=__webpack_require__(3);const defaultValidation={title:[],endpoint:[],createCredential:{username:[],password:[]},awsCredential:{region:[],accessKey:[],secretKey:[],service:[]}};const isTitleValid=(title,existingDatasourceNamesList,existingTitle)=>{var _title$trim;const isValid={valid:true,error:""};if(!(title!==null&&title!==void 0&&(_title$trim=title.trim)!==null&&_title$trim!==void 0&&_title$trim.call(title).length)){isValid.valid=false}else if(title.toLowerCase()!==existingTitle.toLowerCase()&&Array.isArray(existingDatasourceNamesList)&&existingDatasourceNamesList.includes(title.toLowerCase())){isValid.valid=false;isValid.error=external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.validation.titleExists",{defaultMessage:"This title is already in use"})}return isValid};const performDataSourceFormValidation=(formValues,existingDatasourceNamesList,existingTitle)=>{var _formValues$auth,_formValues$auth2;const titleValid=isTitleValid(formValues===null||formValues===void 0?void 0:formValues.title,existingDatasourceNamesList,existingTitle);if(!titleValid.valid){return false}if(!Object(utils["isValidUrl"])(formValues===null||formValues===void 0?void 0:formValues.endpoint)){return false}if((formValues===null||formValues===void 0?void 0:(_formValues$auth=formValues.auth)===null||_formValues$auth===void 0?void 0:_formValues$auth.type)===types["a"].UsernamePasswordType){var _formValues$auth$cred,_formValues$auth$cred2;if(!((_formValues$auth$cred=formValues.auth.credentials)!==null&&_formValues$auth$cred!==void 0&&_formValues$auth$cred.username)){return false}if(!((_formValues$auth$cred2=formValues.auth.credentials)!==null&&_formValues$auth$cred2!==void 0&&_formValues$auth$cred2.password)){return false}}if((formValues===null||formValues===void 0?void 0:(_formValues$auth2=formValues.auth)===null||_formValues$auth2===void 0?void 0:_formValues$auth2.type)===types["a"].SigV4){var _formValues$auth$cred3,_formValues$auth$cred4,_formValues$auth$cred5,_formValues$auth$cred6;if(!((_formValues$auth$cred3=formValues.auth.credentials)!==null&&_formValues$auth$cred3!==void 0&&_formValues$auth$cred3.accessKey)){return false}if(!((_formValues$auth$cred4=formValues.auth.credentials)!==null&&_formValues$auth$cred4!==void 0&&_formValues$auth$cred4.secretKey)){return false}if(!((_formValues$auth$cred5=formValues.auth.credentials)!==null&&_formValues$auth$cred5!==void 0&&_formValues$auth$cred5.region)){return false}if(!((_formValues$auth$cred6=formValues.auth.credentials)!==null&&_formValues$auth$cred6!==void 0&&_formValues$auth$cred6.service)){return false}}return true};function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class create_data_source_form_CreateDataSourceForm extends external_osdSharedDeps_React_default.a.Component{constructor(props,context){super(props,context);_defineProperty(this,"context",void 0);_defineProperty(this,"isFormValid",()=>performDataSourceFormValidation(this.state,this.props.existingDatasourceNamesList,""));_defineProperty(this,"onChangeTitle",e=>{this.setState({title:e.target.value})});_defineProperty(this,"validateTitle",()=>{const isValid=isTitleValid(this.state.title,this.props.existingDatasourceNamesList,"");this.setState({formErrorsByField:{...this.state.formErrorsByField,title:isValid.valid?[]:[isValid.error]}})});_defineProperty(this,"onChangeDescription",e=>{this.setState({description:e.target.value})});_defineProperty(this,"onChangeEndpoint",e=>{this.setState({endpoint:e.target.value})});_defineProperty(this,"validateEndpoint",()=>{const isValid=Object(utils["isValidUrl"])(this.state.endpoint);this.setState({formErrorsByField:{...this.state.formErrorsByField,endpoint:isValid?[]:[""]}})});_defineProperty(this,"onChangeAuthType",e=>{const authType=e.target.value;this.setState({auth:{...this.state.auth,type:authType,credentials:{...this.state.auth.credentials,service:this.state.auth.credentials.service||data_sources_["SigV4ServiceName"].OpenSearch}}})});_defineProperty(this,"onChangeSigV4ServiceName",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,service:e.target.value}}})});_defineProperty(this,"onChangeUsername",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,username:e.target.value}}})});_defineProperty(this,"validateUsername",()=>{var _this$state$auth$cred;const isValid=!!((_this$state$auth$cred=this.state.auth.credentials.username)!==null&&_this$state$auth$cred!==void 0&&_this$state$auth$cred.trim().length);this.setState({formErrorsByField:{...this.state.formErrorsByField,createCredential:{...this.state.formErrorsByField.createCredential,username:isValid?[]:[""]}}})});_defineProperty(this,"onChangePassword",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,password:e.target.value}}})});_defineProperty(this,"validatePassword",()=>{const isValid=!!this.state.auth.credentials.password;this.setState({formErrorsByField:{...this.state.formErrorsByField,createCredential:{...this.state.formErrorsByField.createCredential,password:isValid?[]:[""]}}})});_defineProperty(this,"onChangeRegion",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,region:e.target.value}}})});_defineProperty(this,"validateRegion",()=>{var _this$state$auth$cred2;const isValid=!!((_this$state$auth$cred2=this.state.auth.credentials.region)!==null&&_this$state$auth$cred2!==void 0&&_this$state$auth$cred2.trim().length);this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,region:isValid?[]:[""]}}})});_defineProperty(this,"onChangeAccessKey",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,accessKey:e.target.value}}})});_defineProperty(this,"validateAccessKey",()=>{const isValid=!!this.state.auth.credentials.accessKey;this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,accessKey:isValid?[]:[""]}}})});_defineProperty(this,"onChangeSecretKey",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,secretKey:e.target.value}}})});_defineProperty(this,"validateSecretKey",()=>{const isValid=!!this.state.auth.credentials.secretKey;this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,secretKey:isValid?[]:[""]}}})});_defineProperty(this,"onClickCreateNewDataSource",()=>{if(this.isFormValid()){const formValues=this.getFormValues();if(this.state.auth.type===types["a"].NoAuth){delete formValues.auth.credentials}this.props.handleSubmit(formValues)}});_defineProperty(this,"onClickTestConnection",()=>{if(this.isFormValid()){this.props.handleTestConnection(this.getFormValues())}});_defineProperty(this,"getFormValues",()=>{let credentials=this.state.auth.credentials;if(this.state.auth.type===types["a"].UsernamePasswordType){credentials={username:this.state.auth.credentials.username,password:this.state.auth.credentials.password}}if(this.state.auth.type===types["a"].SigV4){credentials={region:this.state.auth.credentials.region,accessKey:this.state.auth.credentials.accessKey,secretKey:this.state.auth.credentials.secretKey,service:this.state.auth.credentials.service||data_sources_["SigV4ServiceName"].OpenSearch}}return{title:this.state.title,description:this.state.description,endpoint:this.state.endpoint,auth:{...this.state.auth,credentials:credentials}}});_defineProperty(this,"renderHeader",()=>external_osdSharedDeps_React_default.a.createElement(Header,null));_defineProperty(this,"renderSectionHeader",(i18nId,defaultMessage)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{grow:false},external_osdSharedDeps_React_default.a.createElement("h4",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:i18nId,defaultMessage:defaultMessage})))));_defineProperty(this,"renderFieldLabelAsOptional",(i18nId,defaultMessage)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:i18nId,defaultMessage:defaultMessage})," ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"-"," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.optionalText",defaultMessage:"optional"}))));_defineProperty(this,"renderCreateNewCredentialsForm",type=>{switch(type){case types["a"].UsernamePasswordType:return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.username",{defaultMessage:"Username"}),isInvalid:!!this.state.formErrorsByField.createCredential.username.length,error:this.state.formErrorsByField.createCredential.username},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.usernamePlaceholder",{defaultMessage:"Username to connect to data source"}),isInvalid:!!this.state.formErrorsByField.createCredential.username.length,value:this.state.auth.credentials.username||"",onChange:this.onChangeUsername,onBlur:this.validateUsername,"data-test-subj":"createDataSourceFormUsernameField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.password",{defaultMessage:"Password"}),isInvalid:!!this.state.formErrorsByField.createCredential.password.length,error:this.state.formErrorsByField.createCredential.password},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{isInvalid:!!this.state.formErrorsByField.createCredential.password.length,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.passwordPlaceholder",{defaultMessage:"Password to connect to data source"}),type:"dual",value:this.state.auth.credentials.password||"",onChange:this.onChangePassword,onBlur:this.validatePassword,spellCheck:false,"data-test-subj":"createDataSourceFormPasswordField"})));case types["a"].SigV4:return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.region",{defaultMessage:"Region"}),isInvalid:!!this.state.formErrorsByField.awsCredential.region.length,error:this.state.formErrorsByField.awsCredential.region},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.regionPlaceholder",{defaultMessage:"AWS Region, e.g. us-west-2"}),isInvalid:!!this.state.formErrorsByField.awsCredential.region.length,value:this.state.auth.credentials.region||"",onChange:this.onChangeRegion,onBlur:this.validateRegion,"data-test-subj":"createDataSourceFormRegionField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.serviceName",{defaultMessage:"Service Name"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:types["d"],value:this.state.auth.credentials.service,onChange:e=>this.onChangeSigV4ServiceName(e),name:"ServiceName","data-test-subj":"createDataSourceFormSigV4ServiceTypeSelect"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.accessKey",{defaultMessage:"Access Key"}),isInvalid:!!this.state.formErrorsByField.awsCredential.accessKey.length,error:this.state.formErrorsByField.awsCredential.accessKey},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{isInvalid:!!this.state.formErrorsByField.awsCredential.accessKey.length,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.accessKeyPlaceholder",{defaultMessage:"AWS access key"}),type:"dual",value:this.state.auth.credentials.accessKey||"",onChange:this.onChangeAccessKey,onBlur:this.validateAccessKey,spellCheck:false,"data-test-subj":"createDataSourceFormAccessKeyField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.secretKey",{defaultMessage:"Secret Key"}),isInvalid:!!this.state.formErrorsByField.awsCredential.secretKey.length,error:this.state.formErrorsByField.awsCredential.secretKey},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{isInvalid:!!this.state.formErrorsByField.awsCredential.secretKey.length,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.secretKeyPlaceholder",{defaultMessage:"AWS secret key"}),type:"dual",value:this.state.auth.credentials.secretKey||"",onChange:this.onChangeSecretKey,onBlur:this.validateSecretKey,spellCheck:false,"data-test-subj":"createDataSourceFormSecretKeyField"})));default:break}});_defineProperty(this,"renderContent",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPageContent"],null,this.renderHeader(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"data-source-creation"},this.renderSectionHeader("dataSourceManagement.connectToDataSource.connectionDetails","Connection Details"),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.title",{defaultMessage:"Title"}),isInvalid:!!this.state.formErrorsByField.title.length,error:this.state.formErrorsByField.title},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"dataSourceTitle",value:this.state.title||"",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.titlePlaceHolder",{defaultMessage:"Title"}),isInvalid:!!this.state.formErrorsByField.title.length,onChange:this.onChangeTitle,onBlur:this.validateTitle,"data-test-subj":"createDataSourceFormTitleField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:this.renderFieldLabelAsOptional("dataSourceManagement.createDataSource.description","Description")},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"dataSourceDescription",value:this.state.description||"",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.descriptionPlaceholder",{defaultMessage:"Description of the data source"}),onChange:this.onChangeDescription,"data-test-subj":"createDataSourceFormDescriptionField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.endpointURL",{defaultMessage:"Endpoint URL"}),isInvalid:!!this.state.formErrorsByField.endpoint.length,error:this.state.formErrorsByField.endpoint},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"endpoint",value:this.state.endpoint||"",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.endpointPlaceholder",{defaultMessage:"https://connectionurl.com"}),isInvalid:!!this.state.formErrorsByField.endpoint.length,onChange:this.onChangeEndpoint,onBlur:this.validateEndpoint,"data-test-subj":"createDataSourceFormEndpointField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),this.renderSectionHeader("dataSourceManagement.connectToDataSource.authenticationHeader","Authentication Method"),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.authenticationMethodDescription",defaultMessage:"Enter the authentication details to access the endpoint. If no authentication is required, select "}),external_osdSharedDeps_React_default.a.createElement("b",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.noAuthentication",defaultMessage:"No authentication"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:types["c"],value:this.state.auth.type,onChange:e=>this.onChangeAuthType(e),name:"Credential","data-test-subj":"createDataSourceFormAuthTypeSelect"})),this.state.auth.type===types["a"].UsernamePasswordType?this.renderCreateNewCredentialsForm(this.state.auth.type):null,this.state.auth.type===types["a"].SigV4?this.renderCreateNewCredentialsForm(this.state.auth.type):null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{type:"submit",fill:false,disabled:!this.isFormValid(),onClick:this.onClickTestConnection,"data-test-subj":"createDataSourceTestConnectionButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.testConnectionButton",defaultMessage:"Test connection"}))))))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xxl"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),this.renderBottomBar()));_defineProperty(this,"renderBottomBar",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBottomBar"],{"data-test-subj":"datasource-create-bottomBar",affordForDisplacement:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center",responsive:false,gutterSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"ghost",size:"s",iconType:"cross",onClick:this.props.handleCancel,"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"cancelCreateDataSourceButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.cancelButtonLabel",defaultMessage:"Cancel"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{className:"mgtAdvancedSettingsForm__button",disabled:!this.isFormValid(),color:"secondary",fill:this.isFormValid(),size:"s",iconType:"check",onClick:this.onClickCreateNewDataSource,"data-test-subj":"createDataSourceButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.createButtonLabel",defaultMessage:"Create data source"}))))));this.state={formErrorsByField:{...defaultValidation},title:"",description:"",endpoint:"",auth:{type:types["a"].UsernamePasswordType,credentials:{username:"",password:""}}}}render(){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.renderContent())}}_defineProperty(create_data_source_form_CreateDataSourceForm,"contextType",public_["context"]);const LoadingMask=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}));const CreateDataSourceWizard=props=>{const{savedObjects:savedObjects,setBreadcrumbs:setBreadcrumbs,http:http,notifications:{toasts:toasts}}=Object(public_["useOpenSearchDashboards"])().services;const[existingDatasourceNamesList,setExistingDatasourceNamesList]=Object(external_osdSharedDeps_React_["useState"])([]);const[isLoading,setIsLoading]=Object(external_osdSharedDeps_React_["useState"])(false);Object(lib["useEffectOnce"])(()=>{setBreadcrumbs(getCreateBreadcrumbs());getExistingDataSourceNames()});const getExistingDataSourceNames=async()=>{setIsLoading(true);try{const listOfDataSources=await Object(utils["getDataSources"])(savedObjects.client);if(Array.isArray(listOfDataSources)&&listOfDataSources.length){setExistingDatasourceNamesList(listOfDataSources.map(datasource=>{var _datasource$title;return(_datasource$title=datasource.title)===null||_datasource$title===void 0?void 0:_datasource$title.toLowerCase()}))}}catch(e){handleDisplayToastMessage({id:"dataSourcesManagement.createDataSource.existingDatasourceNames",defaultMessage:"Unable to fetch some resources."});props.history.push("")}finally{setIsLoading(false)}};const handleSubmit=async attributes=>{setIsLoading(true);try{await Object(utils["createSingleDataSource"])(savedObjects.client,attributes);props.history.push("")}catch(e){setIsLoading(false);handleDisplayToastMessage({id:"dataSourcesManagement.createDataSource.createDataSourceFailMsg",defaultMessage:"Creation of the Data Source failed with some errors."})}};const handleTestConnection=async attributes=>{setIsLoading(true);try{await Object(utils["testConnection"])(http,attributes);handleDisplayToastMessage({id:"dataSourcesManagement.createDataSource.testConnectionSuccessMsg",defaultMessage:"Connecting to the endpoint using the provided authentication method was successful.",success:true})}catch(e){handleDisplayToastMessage({id:"dataSourcesManagement.createDataSource.testConnectionFailMsg",defaultMessage:"Failed Connecting to the endpoint using the provided authentication method."})}finally{setIsLoading(false)}};const handleDisplayToastMessage=_ref=>{let{id:id,defaultMessage:defaultMessage,success:success}=_ref;if(success){toasts.addSuccess(external_osdSharedDeps_OsdI18n_["i18n"].translate(id,{defaultMessage:defaultMessage}))}else{toasts.addDanger(external_osdSharedDeps_OsdI18n_["i18n"].translate(id,{defaultMessage:defaultMessage}))}};const renderContent=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(create_data_source_form_CreateDataSourceForm,{handleSubmit:handleSubmit,handleTestConnection:handleTestConnection,handleCancel:()=>props.history.push(""),existingDatasourceNamesList:existingDatasourceNamesList}),isLoading?external_osdSharedDeps_React_default.a.createElement(LoadingMask,null):null);return renderContent()};const CreateDataSourceWizardWithRouter=Object(external_osdSharedDeps_ReactRouterDom_["withRouter"])(CreateDataSourceWizard);const CreateButton=_ref=>{let{history:history,isEmptyState:isEmptyState,dataTestSubj:dataTestSubj}=_ref;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":dataTestSubj,fill:isEmptyState?false:true,onClick:()=>history.push("/create")},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourceListing.createButton",defaultMessage:"Create data source connection"}))};function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}const pagination={initialPageSize:10,pageSizeOptions:[5,10,25,50]};const sorting={sort:{field:"title",direction:"asc"}};const DataSourceTable=_ref=>{let{history:history}=_ref;const{chrome:chrome,setBreadcrumbs:setBreadcrumbs,savedObjects:savedObjects,notifications:{toasts:toasts}}=Object(public_["useOpenSearchDashboards"])().services;const[dataSources,setDataSources]=Object(external_osdSharedDeps_React_["useState"])([]);const[selectedDataSources,setSelectedDataSources]=Object(external_osdSharedDeps_React_["useState"])([]);const[isLoading,setIsLoading]=external_osdSharedDeps_React_default.a.useState(false);const[isDeleting,setIsDeleting]=external_osdSharedDeps_React_default.a.useState(false);const[confirmDeleteVisible,setConfirmDeleteVisible]=external_osdSharedDeps_React_default.a.useState(false);Object(lib["useEffectOnce"])(()=>{setBreadcrumbs(getListBreadcrumbs());chrome.docTitle.change(external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSourcesTable.dataSourcesTitle",{defaultMessage:"Data Sources"}));fetchDataSources()});const fetchDataSources=()=>{setIsLoading(true);Object(utils["getDataSources"])(savedObjects.client).then(response=>{setDataSources(response)}).catch(()=>{setDataSources([]);handleDisplayToastMessage({id:"dataSourcesManagement.dataSourceListing.fetchDataSourceFailMsg",defaultMessage:"Error occurred while fetching the records for Data sources."})}).finally(()=>{setIsLoading(false)})};const renderDeleteButton=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{color:"danger",onClick:()=>{setConfirmDeleteVisible(true)},"data-test-subj":"deleteDataSourceConnections",disabled:selectedDataSources.length===0},"Delete ",selectedDataSources.length||""," ",selectedDataSources.length?"connection":"",selectedDataSources.length>=2?"s":"");const renderToolsRight=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{key:"delete",grow:false},renderDeleteButton());const search={toolsRight:renderToolsRight(),box:{incremental:true,schema:{fields:{title:{type:"string"}}}}};const columns=[{field:"title",name:"Title",render:(name,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],_extends({size:"xs"},Object(public_["reactRouterNavigate"])(history,"".concat(index.id))),name)),dataType:"string",sortable:_ref2=>{let{title:title}=_ref2;return title}},{field:"description",name:"Description",truncateText:true,mobileOptions:{show:false},dataType:"string",sortable:_ref3=>{let{description:description}=_ref3;return description}}];const tableRenderDeleteModal=()=>confirmDeleteVisible?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSourcesTable.multiDeleteTitle",{defaultMessage:"Delete data source connection(s)"}),onCancel:()=>{setConfirmDeleteVisible(false)},onConfirm:()=>{setConfirmDeleteVisible(false);onClickDelete()},cancelButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSourcesTable.cancel",{defaultMessage:"Cancel"}),confirmButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.dataSourcesTable.delete",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:"confirm"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.deleteDescription",defaultMessage:"This action will delete the selected data source connections"})),external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.deleteConfirmation",defaultMessage:"Any objects created using data from these sources, including Index Patterns, Visualizations, and Observability Panels, will be impacted."})),external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.deleteWarning",defaultMessage:"This action cannot be undone."}))):null;const onClickDelete=()=>{setIsDeleting(true);Object(utils["deleteMultipleDataSources"])(savedObjects.client,selectedDataSources).then(()=>{setSelectedDataSources([]);fetchDataSources();setConfirmDeleteVisible(false)}).catch(()=>{handleDisplayToastMessage({id:"dataSourcesManagement.dataSourceListing.deleteDataSourceFailMsg",defaultMessage:"Error occurred while deleting selected records for Data sources. Please try it again"})}).finally(()=>{setIsDeleting(false)})};const onSelectionChange=selected=>{setSelectedDataSources(selected)};const selection={onSelectionChange:onSelectionChange};const handleDisplayToastMessage=_ref4=>{let{id:id,defaultMessage:defaultMessage}=_ref4;toasts.addDanger(external_osdSharedDeps_OsdI18n_["i18n"].translate(id,{defaultMessage:defaultMessage}))};const createButton=external_osdSharedDeps_React_default.a.createElement(CreateButton,{history:history,dataTestSubj:"createDataSourceButton"});const createButtonEmptyState=external_osdSharedDeps_React_default.a.createElement(CreateButton,{history:history,isEmptyState:true,dataTestSubj:"createDataSourceButtonEmptyState"});const renderHeader=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],null,external_osdSharedDeps_React_default.a.createElement("h2",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.title",defaultMessage:"Data Sources"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.description",defaultMessage:"Create and manage data source connections to help you retrieve data from multiple OpenSearch compatible sources."})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},createButton));const renderTableContent=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiInMemoryTable"],{allowNeutralSort:false,itemId:"id",isSelectable:true,selection:selection,items:dataSources,columns:columns,pagination:pagination,sorting:sorting,search:search,loading:isLoading}));const renderEmptyState=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{hasBorder:false,hasShadow:false,style:{textAlign:"center"},"data-test-subj":"datasourceTableEmptyState"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.dataSourcesTable.noData",defaultMessage:"No Data Source Connections have been created yet."})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),createButtonEmptyState),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"l"}));const renderContent=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPageContent"],{"data-test-subj":"dataSourceTable",role:"region","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSourcesLiveRegionAriaLabel",{defaultMessage:"Data Sources"})},renderHeader(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),tableRenderDeleteModal(),!isLoading&&(!dataSources||!dataSources.length)?renderEmptyState():renderTableContent()),isDeleting?external_osdSharedDeps_React_default.a.createElement(LoadingMask,null):null);return renderContent()};const DataSourceTableWithRouter=Object(external_osdSharedDeps_ReactRouterDom_["withRouter"])(DataSourceTable);const header_Header=_ref=>{let{showDeleteIcon:showDeleteIcon,isFormValid:isFormValid,onClickDeleteIcon:onClickDeleteIcon,onClickTestConnection:onClickTestConnection,dataSourceName:dataSourceName}=_ref;const[isDeleteModalVisible,setIsDeleteModalVisible]=Object(external_osdSharedDeps_React_["useState"])(false);const changeTitle=Object(public_["useOpenSearchDashboards"])().services.chrome.docTitle.change;changeTitle(dataSourceName);const renderDeleteButton=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{content:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.deleteThisDataSource",{defaultMessage:"Delete this Data Source"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger","data-test-subj":"editDatasourceDeleteIcon",onClick:()=>{setIsDeleteModalVisible(true)},iconType:"trash",iconSize:"m",size:"m","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.deleteThisDataSource",{defaultMessage:"Delete this Data Source"})})),isDeleteModalVisible?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.deleteTitle",{defaultMessage:"Delete data source connection"}),onCancel:()=>{setIsDeleteModalVisible(false)},onConfirm:()=>{setIsDeleteModalVisible(false);onClickDeleteIcon()},cancelButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.cancel",{defaultMessage:"Cancel"}),confirmButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.delete",{defaultMessage:"Delete"}),buttonColor:"danger",defaultFocusedButton:"confirm","data-test-subj":"editDatasourceDeleteConfirmModal"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.deleteConfirmation",defaultMessage:"Any objects created using data from these sources, including Index Patterns, Visualizations, and Observability Panels, will be impacted."})),external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.deleteWarning",defaultMessage:"This action cannot be undone."}))):null);const renderTestConnectionButton=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{type:"submit",fill:false,disabled:!isFormValid,onClick:()=>{onClickTestConnection()},"data-test-subj":"datasource-edit-testConnectionButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.createDataSource.testConnectionButton",defaultMessage:"Test connection"}));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement("div",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{"data-test-subj":"editDataSourceTitle"},external_osdSharedDeps_React_default.a.createElement("h1",null,dataSourceName)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",gutterSize:"m",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},renderTestConnectionButton()),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},showDeleteIcon?renderDeleteButton():null))))};const UpdatePasswordModal=_ref=>{let{username:username,handleUpdatePassword:handleUpdatePassword,closeUpdatePasswordModal:closeUpdatePasswordModal}=_ref;const[newPassword,setNewPassword]=Object(external_osdSharedDeps_React_["useState"])("");const[confirmNewPassword,setConfirmNewPassword]=Object(external_osdSharedDeps_React_["useState"])("");const[isNewPasswordValid,setIsNewPasswordValid]=Object(external_osdSharedDeps_React_["useState"])(true);const[isConfirmNewPasswordValid,setIsConfirmNewPasswordValid]=Object(external_osdSharedDeps_React_["useState"])([]);const onClickUpdatePassword=()=>{if(isFormValid()){handleUpdatePassword(newPassword)}};const isFormValid=()=>!!(newPassword&&confirmNewPassword&&confirmNewPassword===newPassword);const validateNewPassword=()=>{setIsNewPasswordValid(!!newPassword)};const validateConfirmNewPassword=()=>{const invalidReason=[];if(!confirmNewPassword){invalidReason.push("")}else if(confirmNewPassword!==newPassword){invalidReason.push(external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.passwordNoMatch",{defaultMessage:"Passwords do not match"}))}setIsConfirmNewPasswordValid(invalidReason)};const renderUpdatePasswordModal=()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:closeUpdatePasswordModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_osdSharedDeps_React_default.a.createElement("h1",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredPassword",defaultMessage:"Update stored password"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"m",style:{fontWeight:300}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredPasswordDescription",defaultMessage:"Update credential password to reflect accurate password to gain access to the endpoint."}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"data-source-update-password"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.username",{defaultMessage:"Username"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s","data-test-subj":"data-source-update-password-username"},username)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newPassword",{defaultMessage:"Updated password"}),isInvalid:!isNewPasswordValid},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{name:"updatedPassword","data-test-subj":"updateStoredPasswordUpdatedPasswordField",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newPasswordPlaceHolder",{defaultMessage:"Updated password"}),type:"dual",value:newPassword,isInvalid:!isNewPasswordValid,spellCheck:false,onChange:e=>setNewPassword(e.target.value),onBlur:validateNewPassword})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.confirmNewPassword",{defaultMessage:"Confirm Updated password"}),isInvalid:!!isConfirmNewPasswordValid.length,error:isConfirmNewPasswordValid},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{name:"confirmUpdatedPassword","data-test-subj":"updateStoredPasswordConfirmUpdatedPasswordField",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.confirmNewPasswordPlaceHolder",{defaultMessage:"Confirm Updated password"}),type:"dual",value:confirmNewPassword,isInvalid:!!isConfirmNewPasswordValid.length,spellCheck:false,onChange:e=>setConfirmNewPassword(e.target.value),onBlur:validateConfirmNewPassword})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"updateStoredPasswordCancelBtn",onClick:closeUpdatePasswordModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.cancel",defaultMessage:"Cancel"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{type:"submit","data-test-subj":"updateStoredPasswordConfirmBtn",onClick:onClickUpdatePassword,fill:isFormValid(),disabled:!isFormValid()},external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.updateStoredPassword",{defaultMessage:"Update stored password"}))));return external_osdSharedDeps_React_default.a.createElement("div",null," ",renderUpdatePasswordModal()," ")};const UpdateAwsCredentialModal=_ref=>{let{region:region,service:service,handleUpdateAwsCredential:handleUpdateAwsCredential,closeUpdateAwsCredentialModal:closeUpdateAwsCredentialModal}=_ref;const[newAccessKey,setNewAccessKey]=Object(external_osdSharedDeps_React_["useState"])("");const[isNewAccessKeyValid,setIsNewAccessKeyValid]=Object(external_osdSharedDeps_React_["useState"])(true);const[newSecretKey,setNewSecretKey]=Object(external_osdSharedDeps_React_["useState"])("");const[isNewSecretKeyValid,setIsNewSecretKeyValid]=Object(external_osdSharedDeps_React_["useState"])(true);const onClickUpdateAwsCredential=()=>{if(isFormValid()){handleUpdateAwsCredential(newAccessKey,newSecretKey)}};const isFormValid=()=>!!(newAccessKey&&newSecretKey);const validateNewAccessKey=()=>{setIsNewAccessKeyValid(!!newAccessKey)};const validateNewSecretKey=()=>{setIsNewSecretKeyValid(!!newSecretKey)};const renderUpdateAwsCredentialModal=()=>{var _sigV4ServiceOptions$;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:closeUpdateAwsCredentialModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_osdSharedDeps_React_default.a.createElement("h1",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredAwsCredential",defaultMessage:"Update stored AWS credential"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"m",style:{fontWeight:300}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredAwsCredentialDescription",defaultMessage:"Update access key and secret key to reflect accurate aws credential to gain access to the endpoint."}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"data-source-update-aws-credential"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.serviceName",{defaultMessage:"Service Name"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s","data-test-subj":"data-source-update-credential-service-name"},(_sigV4ServiceOptions$=types["d"].find(option=>option.value===service))===null||_sigV4ServiceOptions$===void 0?void 0:_sigV4ServiceOptions$.text)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.region",{defaultMessage:"Region"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s","data-test-subj":"data-source-update-credential-region"},region)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newAccessKey",{defaultMessage:"Updated access key"}),isInvalid:!isNewAccessKeyValid},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{name:"updatedAccessKey","data-test-subj":"updateStoredAwsCredentialUpdatedAccessKeyField",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newAccessKeyPlaceHolder",{defaultMessage:"Updated access key"}),type:"dual",value:newAccessKey,isInvalid:!isNewAccessKeyValid,spellCheck:false,onChange:e=>setNewAccessKey(e.target.value),onBlur:validateNewAccessKey})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newSecretKey",{defaultMessage:"Updated secret key"}),isInvalid:!isNewSecretKeyValid},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{name:"updatedSecretKey","data-test-subj":"updateStoredAwsCredentialUpdatedSecretKeyField",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.newSecretKeyPlaceHolder",{defaultMessage:"Updated secret key"}),type:"dual",value:newSecretKey,isInvalid:!isNewSecretKeyValid,spellCheck:false,onChange:e=>setNewSecretKey(e.target.value),onBlur:validateNewSecretKey})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"updateStoredAwsCredentialCancelBtn",onClick:closeUpdateAwsCredentialModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.cancel",defaultMessage:"Cancel"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{type:"submit","data-test-subj":"updateStoredAwsCredentialConfirmBtn",onClick:onClickUpdateAwsCredential,fill:isFormValid(),disabled:!isFormValid()},external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.updateStoredAwsCredential",{defaultMessage:"Update stored aws credential"}))))};return external_osdSharedDeps_React_default.a.createElement("div",null," ",renderUpdateAwsCredentialModal()," ")};function edit_data_source_form_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class edit_data_source_form_EditDataSourceForm extends external_osdSharedDeps_React_default.a.Component{constructor(props,context){super(props,context);edit_data_source_form_defineProperty(this,"context",void 0);edit_data_source_form_defineProperty(this,"maskedPassword","********");edit_data_source_form_defineProperty(this,"resetFormValues",()=>{this.setFormValuesForEditMode();this.setState({showUpdateOptions:false})});edit_data_source_form_defineProperty(this,"isFormValid",()=>performDataSourceFormValidation(this.state,this.props.existingDatasourceNamesList,this.props.existingDataSource.title));edit_data_source_form_defineProperty(this,"onChangeTitle",e=>{this.setState({title:e.target.value})});edit_data_source_form_defineProperty(this,"validateTitle",()=>{const isValid=isTitleValid(this.state.title,this.props.existingDatasourceNamesList,this.props.existingDataSource.title);this.setState({formErrorsByField:{...this.state.formErrorsByField,title:isValid.valid?[]:[isValid.error]}})});edit_data_source_form_defineProperty(this,"onChangeAuthType",e=>{var _this$state$auth$cred;const authType=e.target.value;this.setState({auth:{...this.state.auth,type:authType,credentials:{...this.state.auth.credentials,service:((_this$state$auth$cred=this.state.auth.credentials)===null||_this$state$auth$cred===void 0?void 0:_this$state$auth$cred.service)||data_sources_["SigV4ServiceName"].OpenSearch}}},()=>{this.onChangeFormValues()})});edit_data_source_form_defineProperty(this,"onChangeDescription",e=>{this.setState({description:e.target.value})});edit_data_source_form_defineProperty(this,"onChangeUsername",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,username:e.target.value}}})});edit_data_source_form_defineProperty(this,"validateUsername",()=>{var _this$state$auth$cred2;const isValid=!!((_this$state$auth$cred2=this.state.auth.credentials.username)!==null&&_this$state$auth$cred2!==void 0&&_this$state$auth$cred2.trim().length);this.setState({formErrorsByField:{...this.state.formErrorsByField,createCredential:{...this.state.formErrorsByField.createCredential,username:isValid?[]:[""]}}})});edit_data_source_form_defineProperty(this,"validatePassword",()=>{const isValid=!!this.state.auth.credentials.password;this.setState({formErrorsByField:{...this.state.formErrorsByField,createCredential:{...this.state.formErrorsByField.createCredential,password:isValid?[]:[""]}}})});edit_data_source_form_defineProperty(this,"onChangePassword",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,password:e.target.value}}})});edit_data_source_form_defineProperty(this,"onChangeSigV4ServiceName",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,service:e.target.value}}})});edit_data_source_form_defineProperty(this,"onChangeRegion",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,region:e.target.value}}})});edit_data_source_form_defineProperty(this,"validateRegion",()=>{var _this$state$auth$cred3;const isValid=!!((_this$state$auth$cred3=this.state.auth.credentials.region)!==null&&_this$state$auth$cred3!==void 0&&_this$state$auth$cred3.trim().length);this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,region:isValid?[]:[""]}}})});edit_data_source_form_defineProperty(this,"onChangeAccessKey",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,accessKey:e.target.value}}})});edit_data_source_form_defineProperty(this,"validateAccessKey",()=>{var _this$state$auth$cred4;const isValid=!!((_this$state$auth$cred4=this.state.auth.credentials)!==null&&_this$state$auth$cred4!==void 0&&_this$state$auth$cred4.accessKey);this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,accessKey:isValid?[]:[""]}}})});edit_data_source_form_defineProperty(this,"onChangeSecretKey",e=>{this.setState({auth:{...this.state.auth,credentials:{...this.state.auth.credentials,secretKey:e.target.value}}})});edit_data_source_form_defineProperty(this,"validateSecretKey",()=>{var _this$state$auth$cred5;const isValid=!!((_this$state$auth$cred5=this.state.auth.credentials)!==null&&_this$state$auth$cred5!==void 0&&_this$state$auth$cred5.secretKey);this.setState({formErrorsByField:{...this.state.formErrorsByField,awsCredential:{...this.state.formErrorsByField.awsCredential,secretKey:isValid?[]:[""]}}})});edit_data_source_form_defineProperty(this,"onClickUpdateDataSource",async()=>{var _formValues$auth$cred,_formValues$auth$cred2,_formValues$auth$cred5,_formValues$auth$cred6,_formValues$auth$cred7,_formValues$auth$cred8;if(this.isFormValid()){const formValues={title:this.state.title,description:this.state.description,auth:this.state.auth};switch(this.state.auth.type){case types["a"].NoAuth:delete formValues.auth.credentials;break;case types["a"].SigV4:(_formValues$auth$cred=formValues.auth.credentials)===null||_formValues$auth$cred===void 0?true:delete _formValues$auth$cred.username;(_formValues$auth$cred2=formValues.auth.credentials)===null||_formValues$auth$cred2===void 0?true:delete _formValues$auth$cred2.password;if(this.props.existingDataSource.auth.type===this.state.auth.type){var _formValues$auth$cred3,_formValues$auth$cred4;(_formValues$auth$cred3=formValues.auth.credentials)===null||_formValues$auth$cred3===void 0?true:delete _formValues$auth$cred3.accessKey;(_formValues$auth$cred4=formValues.auth.credentials)===null||_formValues$auth$cred4===void 0?true:delete _formValues$auth$cred4.secretKey}break;case types["a"].UsernamePasswordType:(_formValues$auth$cred5=formValues.auth.credentials)===null||_formValues$auth$cred5===void 0?true:delete _formValues$auth$cred5.accessKey;(_formValues$auth$cred6=formValues.auth.credentials)===null||_formValues$auth$cred6===void 0?true:delete _formValues$auth$cred6.secretKey;(_formValues$auth$cred7=formValues.auth.credentials)===null||_formValues$auth$cred7===void 0?true:delete _formValues$auth$cred7.region;if(this.props.existingDataSource.auth.type===this.state.auth.type)(_formValues$auth$cred8=formValues.auth.credentials)===null||_formValues$auth$cred8===void 0?true:delete _formValues$auth$cred8.password;break;default:break}this.setState({isLoading:true});try{await this.props.handleSubmit(formValues);this.setState({showUpdateOptions:false});this.setFormValuesForEditMode()}catch(e){this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.editDataSourceFailMsg",defaultMessage:"Updating the Data Source failed with some errors."})}finally{this.setState({isLoading:false})}}});edit_data_source_form_defineProperty(this,"onClickDeleteDataSource",async()=>{if(this.props.onDeleteDataSource){await this.props.onDeleteDataSource()}});edit_data_source_form_defineProperty(this,"onClickTestConnection",async()=>{var _this$state$auth$cred6,_this$state$auth$cred7,_this$state$auth$cred8,_this$state$auth$cred9,_this$state$auth$cred10,_this$state$auth$cred11;this.setState({isLoading:true});const isNewCredential=!!(this.state.auth.type!==this.props.existingDataSource.auth.type);let credentials=this.state.auth.credentials;switch(this.state.auth.type){case types["a"].UsernamePasswordType:credentials={username:(_this$state$auth$cred6=this.state.auth.credentials)===null||_this$state$auth$cred6===void 0?void 0:_this$state$auth$cred6.username,password:isNewCredential?(_this$state$auth$cred7=this.state.auth.credentials)===null||_this$state$auth$cred7===void 0?void 0:_this$state$auth$cred7.password:""};break;case types["a"].SigV4:credentials={service:(_this$state$auth$cred8=this.state.auth.credentials)===null||_this$state$auth$cred8===void 0?void 0:_this$state$auth$cred8.service,region:(_this$state$auth$cred9=this.state.auth.credentials)===null||_this$state$auth$cred9===void 0?void 0:_this$state$auth$cred9.region,accessKey:isNewCredential?(_this$state$auth$cred10=this.state.auth.credentials)===null||_this$state$auth$cred10===void 0?void 0:_this$state$auth$cred10.accessKey:"",secretKey:isNewCredential?(_this$state$auth$cred11=this.state.auth.credentials)===null||_this$state$auth$cred11===void 0?void 0:_this$state$auth$cred11.secretKey:""};break;case types["a"].NoAuth:credentials=undefined;break;default:break}const formValues={title:this.state.title,description:this.state.description,endpoint:this.state.endpoint,auth:{...this.state.auth,credentials:credentials}};try{await this.props.handleTestConnection(formValues);this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.testConnectionSuccessMsg",defaultMessage:"Connecting to the endpoint using the provided authentication method was successful.",success:true})}catch(e){this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.testConnectionFailMsg",defaultMessage:"Failed Connecting to the endpoint using the provided authentication method."})}finally{this.setState({isLoading:false})}});edit_data_source_form_defineProperty(this,"onChangeFormValues",()=>{setTimeout(()=>{this.didFormValuesChange()},0)});edit_data_source_form_defineProperty(this,"onClickUpdatePassword",()=>{this.setState({showUpdatePasswordModal:true})});edit_data_source_form_defineProperty(this,"onClickUpdateAwsCredential",()=>{this.setState({showUpdateAwsCredentialModal:true})});edit_data_source_form_defineProperty(this,"updatePassword",async password=>{const{title:title,description:description,auth:auth}=this.props.existingDataSource;const updateAttributes={title:title,description:description,endpoint:undefined,auth:{type:auth.type,credentials:{username:auth.credentials?auth.credentials.username:"",password:password}}};this.closePasswordModal();try{await this.props.handleSubmit(updateAttributes);this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.updatePasswordSuccessMsg",defaultMessage:"Password updated successfully.",success:true})}catch(e){this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.updatePasswordFailMsg",defaultMessage:"Updating the stored password failed with some errors."})}});edit_data_source_form_defineProperty(this,"updateAwsCredential",async(accessKey,secretKey)=>{const{title:title,description:description,auth:auth}=this.props.existingDataSource;const updateAttributes={title:title,description:description,endpoint:undefined,auth:{type:auth.type,credentials:{region:auth.credentials?auth.credentials.region:"",accessKey:accessKey,secretKey:secretKey}}};this.closeAwsCredentialModal();try{await this.props.handleSubmit(updateAttributes);this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.updatePasswordSuccessMsg",defaultMessage:"Password updated successfully.",success:true})}catch(e){this.props.displayToastMessage({id:"dataSourcesManagement.editDataSource.updatePasswordFailMsg",defaultMessage:"Updating the stored password failed with some errors."})}});edit_data_source_form_defineProperty(this,"closePasswordModal",()=>{this.setState({showUpdatePasswordModal:false})});edit_data_source_form_defineProperty(this,"closeAwsCredentialModal",()=>{this.setState({showUpdateAwsCredentialModal:false})});edit_data_source_form_defineProperty(this,"renderUpdatePasswordModal",()=>{var _this$state$auth,_this$state$auth$cred12;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:this.onClickUpdatePassword,"data-test-subj":"editDatasourceUpdatePasswordBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredPassword",defaultMessage:"Update stored password"})),this.state.showUpdatePasswordModal?external_osdSharedDeps_React_default.a.createElement(UpdatePasswordModal,{username:((_this$state$auth=this.state.auth)===null||_this$state$auth===void 0?void 0:(_this$state$auth$cred12=_this$state$auth.credentials)===null||_this$state$auth$cred12===void 0?void 0:_this$state$auth$cred12.username)||"",handleUpdatePassword:this.updatePassword,closeUpdatePasswordModal:this.closePasswordModal}):null)});edit_data_source_form_defineProperty(this,"renderUpdateAwsCredentialModal",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:this.onClickUpdateAwsCredential,"data-test-subj":"editDatasourceUpdateAwsCredentialBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.updateStoredAwsCredential",defaultMessage:"Update stored AWS credential"})),this.state.showUpdateAwsCredentialModal?external_osdSharedDeps_React_default.a.createElement(UpdateAwsCredentialModal,{region:this.state.auth.credentials.region,service:this.state.auth.credentials.service,handleUpdateAwsCredential:this.updateAwsCredential,closeUpdateAwsCredentialModal:this.closeAwsCredentialModal}):null));edit_data_source_form_defineProperty(this,"renderHeader",()=>external_osdSharedDeps_React_default.a.createElement(header_Header,{showDeleteIcon:true,isFormValid:this.isFormValid(),onClickDeleteIcon:this.onClickDeleteDataSource,dataSourceName:this.props.existingDataSource.title,onClickTestConnection:this.onClickTestConnection}));edit_data_source_form_defineProperty(this,"renderFieldLabelAsOptional",(i18nId,defaultMessage)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:i18nId,defaultMessage:defaultMessage})," ",external_osdSharedDeps_React_default.a.createElement("i",{style:{fontWeight:"normal"}},"-"," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.optionalText",defaultMessage:"optional"}))));edit_data_source_form_defineProperty(this,"renderConnectionDetailsSection",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.connectionDetailsText",defaultMessage:"Connection Details"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_osdSharedDeps_React_default.a.createElement("h4",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.objectDetailsText",defaultMessage:"Object Details"})),description:external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.objectDetailsDescription",defaultMessage:"This connection information is used for reference in tables and when adding to a data source connection"}))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.title",{defaultMessage:"Title"}),isInvalid:!!this.state.formErrorsByField.title.length,error:this.state.formErrorsByField.title,"data-test-subj":"editDataSourceTitleFormRow"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"dataSourceTitle",value:this.state.title||"",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.titlePlaceHolder",{defaultMessage:"Title"}),isInvalid:!!this.state.formErrorsByField.title.length,onChange:this.onChangeTitle,onBlur:this.validateTitle})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:this.renderFieldLabelAsOptional("dataSourceManagement.editDataSource.description","Description"),"data-test-subj":"editDataSourceDescriptionFormRow"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"dataSourceDescription",value:this.state.description||"",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.descriptionPlaceholder",{defaultMessage:"Description of the data source"}),onChange:this.onChangeDescription})))));edit_data_source_form_defineProperty(this,"renderEndpointSection",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.endpointTitle",defaultMessage:"Endpoint"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.endpointURL",{defaultMessage:"Endpoint URL"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"endpoint",value:this.props.existingDataSource.endpoint,disabled:true,fullWidth:true,"aria-disabled":true,"data-test-subj":"editDatasourceEndpointField"}))));edit_data_source_form_defineProperty(this,"renderAuthenticationSection",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"m"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"m"},external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.authenticationTitle",defaultMessage:"Authentication"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],{margin:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{title:external_osdSharedDeps_React_default.a.createElement("h4",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.authenticationMethod",defaultMessage:"Authentication Method"}))},this.renderCredentialsSection())));edit_data_source_form_defineProperty(this,"renderCredentialsSection",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.credential",{defaultMessage:"Credential"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:types["c"],value:this.state.auth.type,onChange:this.onChangeAuthType,name:"Credential","data-test-subj":"editDataSourceSelectAuthType"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderSelectedAuthType(this.state.auth.type)));edit_data_source_form_defineProperty(this,"renderSelectedAuthType",type=>{switch(type){case types["a"].UsernamePasswordType:return this.renderUsernamePasswordFields();case types["a"].SigV4:return this.renderSigV4ContentFields();default:return null}});edit_data_source_form_defineProperty(this,"renderSigV4ContentFields",()=>{var _this$state$auth$cred13,_this$state$auth$cred14,_this$state$auth$cred15,_this$state$auth$cred16;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.region",{defaultMessage:"Region"}),isInvalid:!!this.state.formErrorsByField.awsCredential.region.length,error:this.state.formErrorsByField.awsCredential.region},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.regionPlaceholder",{defaultMessage:"AWS Region, e.g. us-west-2"}),isInvalid:!!this.state.formErrorsByField.awsCredential.region.length,value:((_this$state$auth$cred13=this.state.auth.credentials)===null||_this$state$auth$cred13===void 0?void 0:_this$state$auth$cred13.region)||"",onChange:this.onChangeRegion,onBlur:this.validateRegion,"data-test-subj":"editDataSourceFormRegionField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.serviceName",{defaultMessage:"Service Name"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{options:types["d"],value:(_this$state$auth$cred14=this.state.auth.credentials)===null||_this$state$auth$cred14===void 0?void 0:_this$state$auth$cred14.service,onChange:e=>this.onChangeSigV4ServiceName(e),name:"ServiceName","data-test-subj":"editDataSourceFormSigV4ServiceTypeSelect"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.accessKey",{defaultMessage:"Access Key"}),isInvalid:!!this.state.formErrorsByField.awsCredential.accessKey.length,error:this.state.formErrorsByField.awsCredential.accessKey},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{isInvalid:!!this.state.formErrorsByField.awsCredential.accessKey.length,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.accessKeyPlaceholder",{defaultMessage:"AWS access key"}),type:"dual",value:this.props.existingDataSource.auth.type===types["a"].SigV4?this.maskedPassword:(_this$state$auth$cred15=this.state.auth.credentials)===null||_this$state$auth$cred15===void 0?void 0:_this$state$auth$cred15.accessKey,onChange:this.onChangeAccessKey,onBlur:this.validateAccessKey,spellCheck:false,disabled:this.props.existingDataSource.auth.type===types["a"].SigV4,"data-test-subj":"editDataSourceFormAccessKeyField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.secretKey",{defaultMessage:"Secret Key"}),isInvalid:!!this.state.formErrorsByField.awsCredential.secretKey.length,error:this.state.formErrorsByField.awsCredential.secretKey},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{isInvalid:!!this.state.formErrorsByField.awsCredential.secretKey.length,placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.createDataSource.secretKeyPlaceholder",{defaultMessage:"AWS secret key"}),type:"dual",value:this.props.existingDataSource.auth.type===types["a"].SigV4?this.maskedPassword:(_this$state$auth$cred16=this.state.auth.credentials)===null||_this$state$auth$cred16===void 0?void 0:_this$state$auth$cred16.secretKey,onChange:this.onChangeSecretKey,onBlur:this.validateSecretKey,spellCheck:false,disabled:this.props.existingDataSource.auth.type===types["a"].SigV4,"data-test-subj":"editDataSourceFormSecretKeyField"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),this.props.existingDataSource.auth.type===types["a"].SigV4?this.renderUpdateAwsCredentialModal():null)});edit_data_source_form_defineProperty(this,"renderUsernamePasswordFields",()=>{var _this$state$formError,_this$state$formError2,_this$state$auth$cred17,_this$state$formError3,_this$state$formError4,_this$state$formError5,_this$state$formError6,_this$state$auth$cred18,_this$state$formError7,_this$state$formError8;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.username",{defaultMessage:"Username"}),isInvalid:!!((_this$state$formError=this.state.formErrorsByField.createCredential)!==null&&_this$state$formError!==void 0&&(_this$state$formError2=_this$state$formError.username)!==null&&_this$state$formError2!==void 0&&_this$state$formError2.length),"data-test-subj":"editDatasourceUsernameFormRow"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{name:"datasourceUsername",placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.usernamePlaceholder",{defaultMessage:"Username to connect to data source"}),value:((_this$state$auth$cred17=this.state.auth.credentials)===null||_this$state$auth$cred17===void 0?void 0:_this$state$auth$cred17.username)||"",isInvalid:!!((_this$state$formError3=this.state.formErrorsByField.createCredential)!==null&&_this$state$formError3!==void 0&&(_this$state$formError4=_this$state$formError3.username)!==null&&_this$state$formError4!==void 0&&_this$state$formError4.length),onChange:this.onChangeUsername,onBlur:this.validateUsername})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.password",{defaultMessage:"Password"}),isInvalid:!!((_this$state$formError5=this.state.formErrorsByField.createCredential)!==null&&_this$state$formError5!==void 0&&(_this$state$formError6=_this$state$formError5.password)!==null&&_this$state$formError6!==void 0&&_this$state$formError6.length)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldPassword"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("dataSourcesManagement.editDataSource.passwordPlaceholder",{defaultMessage:"Password to connect to data source"}),type:"dual",value:this.props.existingDataSource.auth.type===types["a"].UsernamePasswordType?this.maskedPassword:(_this$state$auth$cred18=this.state.auth.credentials)===null||_this$state$auth$cred18===void 0?void 0:_this$state$auth$cred18.password,isInvalid:!!((_this$state$formError7=this.state.formErrorsByField.createCredential)!==null&&_this$state$formError7!==void 0&&(_this$state$formError8=_this$state$formError7.password)!==null&&_this$state$formError8!==void 0&&_this$state$formError8.length),spellCheck:false,onChange:this.onChangePassword,onBlur:this.validatePassword,disabled:this.props.existingDataSource.auth.type===types["a"].UsernamePasswordType,"data-test-subj":"updateDataSourceFormPasswordField"})),this.props.existingDataSource.auth.type===types["a"].UsernamePasswordType?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,this.renderUpdatePasswordModal()):null)))});edit_data_source_form_defineProperty(this,"didFormValuesChange",()=>{var _formValues$auth$cred9,_auth$credentials,_formValues$auth$cred10,_auth$credentials2,_formValues$auth$cred11,_auth$credentials3;const formValues={title:this.state.title,description:this.state.description,endpoint:this.props.existingDataSource.endpoint,auth:this.state.auth};const{title:title,description:description,auth:auth}=this.props.existingDataSource;const isUsernameChanged=auth.type===formValues.auth.type&&auth.type===types["a"].UsernamePasswordType&&((_formValues$auth$cred9=formValues.auth.credentials)===null||_formValues$auth$cred9===void 0?void 0:_formValues$auth$cred9.username)!==((_auth$credentials=auth.credentials)===null||_auth$credentials===void 0?void 0:_auth$credentials.username);const isAuthTypeSigV4Unchanged=auth.type===formValues.auth.type&&auth.type===types["a"].SigV4;const isRegionChanged=isAuthTypeSigV4Unchanged&&((_formValues$auth$cred10=formValues.auth.credentials)===null||_formValues$auth$cred10===void 0?void 0:_formValues$auth$cred10.region)!==((_auth$credentials2=auth.credentials)===null||_auth$credentials2===void 0?void 0:_auth$credentials2.region);const isServiceNameChanged=isAuthTypeSigV4Unchanged&&((_formValues$auth$cred11=formValues.auth.credentials)===null||_formValues$auth$cred11===void 0?void 0:_formValues$auth$cred11.service)!==((_auth$credentials3=auth.credentials)===null||_auth$credentials3===void 0?void 0:_auth$credentials3.service);if(formValues.title!==title||formValues.description!==description||formValues.auth.type!==auth.type||isUsernameChanged||isRegionChanged||isServiceNameChanged){this.setState({showUpdateOptions:true})}else{this.setState({showUpdateOptions:false})}});edit_data_source_form_defineProperty(this,"renderBottomBar",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBottomBar"],{"data-test-subj":"datasource-edit-bottomBar",affordForDisplacement:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"center",responsive:false,gutterSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{color:"ghost",size:"s",iconType:"cross",onClick:()=>this.resetFormValues(),"aria-describedby":"aria-describedby.countOfUnsavedSettings","data-test-subj":"datasource-edit-cancelButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.cancelButtonLabel",defaultMessage:"Cancel changes"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{className:"mgtAdvancedSettingsForm__button",disabled:!this.isFormValid(),color:"secondary",fill:true,size:"s",iconType:"check",isLoading:this.state.isLoading,onClick:this.onClickUpdateDataSource,"data-test-subj":"datasource-edit-saveButton"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.saveButtonLabel",defaultMessage:"Save changes"}))))));edit_data_source_form_defineProperty(this,"renderContent",()=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.renderHeader(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{onChange:()=>this.onChangeFormValues(),"data-test-subj":"data-source-edit"},this.renderConnectionDetailsSection(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this.renderEndpointSection(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),this.renderAuthenticationSection()),this.state.showUpdateOptions?this.renderBottomBar():null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xl"})));this.state={formErrorsByField:{...defaultValidation},title:"",description:"",endpoint:"",auth:{type:types["a"].NoAuth,credentials:{username:"",password:"",region:"",accessKey:"",secretKey:""}},showUpdatePasswordModal:false,showUpdateAwsCredentialModal:false,showUpdateOptions:false,isLoading:false}}componentDidMount(){this.setFormValuesForEditMode()}setFormValuesForEditMode(){if(this.props.existingDataSource){var _auth$credentials4,_auth$credentials5;const{title:title,description:description,endpoint:endpoint,auth:auth}=this.props.existingDataSource;const authTypeCheckResults={isUserNamePassword:auth.type===types["a"].UsernamePasswordType,isSigV4:auth.type===types["a"].SigV4};this.setState({title:title,description:description||"",endpoint:endpoint,auth:{type:auth.type,credentials:{username:authTypeCheckResults.isUserNamePassword?(_auth$credentials4=auth.credentials)===null||_auth$credentials4===void 0?void 0:_auth$credentials4.username:"",password:authTypeCheckResults.isUserNamePassword?this.maskedPassword:"",service:authTypeCheckResults.isSigV4?((_auth$credentials5=auth.credentials)===null||_auth$credentials5===void 0?void 0:_auth$credentials5.service)||data_sources_["SigV4ServiceName"].OpenSearch:"",region:authTypeCheckResults.isSigV4?auth.credentials.region:"",accessKey:authTypeCheckResults.isSigV4?this.maskedPassword:"",secretKey:authTypeCheckResults.isSigV4?this.maskedPassword:""}}})}}render(){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.renderContent())}}edit_data_source_form_defineProperty(edit_data_source_form_EditDataSourceForm,"contextType",public_["context"]);const defaultDataSource={title:"",description:"",endpoint:"",auth:{type:types["a"].NoAuth,credentials:undefined}};const EditDataSource=props=>{const{savedObjects:savedObjects,setBreadcrumbs:setBreadcrumbs,http:http,notifications:{toasts:toasts}}=Object(public_["useOpenSearchDashboards"])().services;const dataSourceID=props.match.params.id;const[dataSource,setDataSource]=Object(external_osdSharedDeps_React_["useState"])(defaultDataSource);const[existingDatasourceNamesList,setExistingDatasourceNamesList]=Object(external_osdSharedDeps_React_["useState"])([]);const[isLoading,setIsLoading]=Object(external_osdSharedDeps_React_["useState"])(false);Object(lib["useEffectOnce"])(()=>{(async function(){await fetchDataSourceDetailsByID()})()});const fetchDataSourceDetailsByID=async()=>{setIsLoading(true);try{const fetchDataSourceById=await Object(utils["getDataSourceById"])(dataSourceID,savedObjects.client);const listOfDataSources=await Object(utils["getDataSources"])(savedObjects.client);if(fetchDataSourceById){setDataSource(fetchDataSourceById);setBreadcrumbs(getEditBreadcrumbs(fetchDataSourceById))}if(Array.isArray(listOfDataSources)&&listOfDataSources.length){setExistingDatasourceNamesList(listOfDataSources.map(datasource=>{var _datasource$title;return(_datasource$title=datasource.title)===null||_datasource$title===void 0?void 0:_datasource$title.toLowerCase()}))}}catch(e){setDataSource(defaultDataSource);handleDisplayToastMessage({id:"dataSourcesManagement.editDataSource.fetchDataSourceFailMsg",defaultMessage:"Unable to find the Data Source."});props.history.push("")}finally{setIsLoading(false)}};const handleSubmit=async attributes=>{await Object(utils["updateDataSourceById"])(savedObjects.client,dataSourceID,attributes);await fetchDataSourceDetailsByID()};const handleDisplayToastMessage=_ref=>{let{id:id,defaultMessage:defaultMessage,success:success}=_ref;if(success){toasts.addSuccess(external_osdSharedDeps_OsdI18n_["i18n"].translate(id,{defaultMessage:defaultMessage}))}else{toasts.addWarning(external_osdSharedDeps_OsdI18n_["i18n"].translate(id,{defaultMessage:defaultMessage}))}};const handleDelete=async()=>{setIsLoading(true);try{await Object(utils["deleteDataSourceById"])(props.match.params.id,savedObjects.client);props.history.push("")}catch(e){setIsLoading(false);handleDisplayToastMessage({id:"dataSourcesManagement.editDataSource.deleteDataSourceFailMsg",defaultMessage:"Unable to delete the Data Source due to some errors. Please try it again."})}};const handleTestConnection=async attributes=>{await Object(utils["testConnection"])(http,attributes,dataSourceID)};const renderContent=()=>{if(!isLoading&&(!dataSource||!dataSource.id)){return external_osdSharedDeps_React_default.a.createElement("h1",{"data-test-subj":"dataSourceNotFound"},"Data Source not found!")}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,dataSource&&dataSource.endpoint?external_osdSharedDeps_React_default.a.createElement(edit_data_source_form_EditDataSourceForm,{existingDataSource:dataSource,existingDatasourceNamesList:existingDatasourceNamesList,onDeleteDataSource:handleDelete,handleSubmit:handleSubmit,displayToastMessage:handleDisplayToastMessage,handleTestConnection:handleTestConnection}):null,isLoading||!(dataSource!==null&&dataSource!==void 0&&dataSource.endpoint)?external_osdSharedDeps_React_default.a.createElement(LoadingMask,null):null)};if(!isLoading&&!(dataSource!==null&&dataSource!==void 0&&dataSource.endpoint)){return external_osdSharedDeps_React_default.a.createElement("h1",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"dataSourcesManagement.editDataSource.dataSourceNotFound",defaultMessage:"Data Source not found!"}))}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),renderContent())};const EditDataSourceWithRouter=Object(external_osdSharedDeps_ReactRouterDom_["withRouter"])(EditDataSource);async function mountManagementSection(getStartServices,params){const[{chrome:chrome,application:application,savedObjects:savedObjects,uiSettings:uiSettings,notifications:notifications,overlays:overlays,http:http,docLinks:docLinks}]=await getStartServices();const deps={chrome:chrome,application:application,savedObjects:savedObjects,uiSettings:uiSettings,notifications:notifications,overlays:overlays,http:http,docLinks:docLinks,setBreadcrumbs:params.setBreadcrumbs};external_osdSharedDeps_ReactDom_default.a.render(external_osdSharedDeps_React_default.a.createElement(public_["OpenSearchDashboardsContextProvider"],{services:deps},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["I18nProvider"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Router"],{history:params.history},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Switch"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:["/create"]},external_osdSharedDeps_React_default.a.createElement(CreateDataSourceWizardWithRouter,null)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:["/:id"]},external_osdSharedDeps_React_default.a.createElement(EditDataSourceWithRouter,null)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ReactRouterDom_["Route"],{path:["/"]},external_osdSharedDeps_React_default.a.createElement(DataSourceTableWithRouter,null)))))),params.element);return()=>{chrome.docTitle.reset();external_osdSharedDeps_ReactDom_default.a.unmountComponentAtNode(params.element)}}}}]);
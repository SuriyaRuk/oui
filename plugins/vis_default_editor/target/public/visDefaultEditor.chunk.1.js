(window["visDefaultEditor_bundle_jsonpfunction"]=window["visDefaultEditor_bundle_jsonpfunction"]||[]).push([[1],{155:function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&typeof btoa!=="undefined"){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},156:function(module,exports,__webpack_require__){"use strict";module.exports=function(cssWithMappingToString){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list}},157:function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(158);case"v7light":return __webpack_require__(160);case"v8dark":return __webpack_require__(162);case"v8light":return __webpack_require__(164)}},158:function(module,exports,__webpack_require__){var api=__webpack_require__(155);var content=__webpack_require__(159);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},159:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,'/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n.visEditor__collapsibleSidebar {\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #141519;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #0b4462; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #1BA9F5;\n    color: #1D1E24; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n.visEditor__resizer-isHidden {\n  display: none; }\n\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n.visEditor__canvas {\n  background-color: #1D1E24;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(152, 162, 179, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #343741; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #1D1E24;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #25262E; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #98A2B3; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #343741;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px;\n    min-width: 0; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__content {\n      padding: 0 8px; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__text {\n      display: none; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #343741;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},160:function(module,exports,__webpack_require__){var api=__webpack_require__(155);var content=__webpack_require__(161);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},161:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,'/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n.visEditor__collapsibleSidebar {\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #fafbfd;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #cce1f0; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #006BB4;\n    color: #FFF; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n.visEditor__resizer-isHidden {\n  display: none; }\n\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n.visEditor__canvas {\n  background-color: #FFF;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(105, 112, 125, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #D3DAE6; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #FFF;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #fafbfd; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #69707D; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #D3DAE6;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px;\n    min-width: 0; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__content {\n      padding: 0 8px; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__text {\n      display: none; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #D3DAE6;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},162:function(module,exports,__webpack_require__){var api=__webpack_require__(155);var content=__webpack_require__(163);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},163:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,'/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n.visEditor__collapsibleSidebar {\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #172430;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #0e4a48; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #159D8D;\n    color: #0A121A; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n.visEditor__resizer-isHidden {\n  display: none; }\n\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n.visEditor__canvas {\n  background-color: #0A121A;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(141, 152, 163, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(141, 152, 163, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #293847; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #0A121A;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #101B25; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #8D98A3; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #293847;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px;\n    min-width: 0; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__content {\n      padding: 0 8px; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__text {\n      display: none; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #293847;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},164:function(module,exports,__webpack_require__){var api=__webpack_require__(155);var content=__webpack_require__(165);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},165:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(156);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,'/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.visEditor--default {\n  flex: 1 1 auto;\n  display: flex; }\n  @media only screen and (max-width: 574px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor--default {\n      flex-direction: column; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor--default {\n      flex-direction: column; } }\n.visEditor__collapsibleSidebar {\n  min-width: 350px;\n  max-width: 100%;\n  position: relative;\n  flex-shrink: 0; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar {\n      width: 100% !important; } }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditor__collapsibleSidebar {\n      max-width: 75%; } }\n.visEditor__collapsibleSidebar-isClosed {\n  min-width: 0;\n  width: 32px !important; }\n  .visEditor__collapsibleSidebar-isClosed .visEditorSidebar {\n    display: none; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__collapsibleSidebar-isClosed {\n      height: 40px;\n      width: 100% !important; } }\n.visEditor__collapsibleSidebarButton {\n  position: absolute;\n  right: 4px;\n  top: 8px; }\n\n.visEditor__resizer {\n  position: relative;\n  display: flex;\n  flex: 0 0 12px;\n  background-color: #F0F2F4;\n  align-items: center;\n  justify-content: center;\n  margin: 0;\n  user-select: none;\n  width: 12px; }\n  .visEditor__resizer:hover {\n    background-color: #cbe5e5; }\n  .visEditor__resizer:focus, .visEditor__resizer.active {\n    background-color: #07827E;\n    color: #FCFEFF; }\n  .visEditor__resizer::after {\n    content: "";\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    cursor: ew-resize; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__resizer {\n      display: none; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__resizer {\n      display: none; } }\n.visEditor__resizer-isHidden {\n  display: none; }\n\n.visEditor__visualization {\n  display: flex;\n  flex: 1 1 auto;\n  overflow: hidden; }\n  @media only screen and (max-width: 574px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .visEditor__visualization {\n      width: 100% !important; } }\n.visEditor__canvas {\n  background-color: #FCFEFF;\n  display: flex;\n  flex-direction: row;\n  overflow: auto;\n  flex-shrink: 1;\n  flex-basis: 100%; }\n  .visEditor__canvas.embedded {\n    flex-shrink: 1;\n    flex-basis: 100%; }\n  .visEditor__canvas .visualize {\n    display: flex;\n    flex-direction: column;\n    flex: 1 1 100%; }\n  .visEditor__canvas .visChart {\n    position: relative; }\n\n.visEditorSidebar {\n  min-width: 350px; }\n  .visEditorSidebar > .visEditorSidebar__formWrapper {\n    flex-basis: auto; }\n\n.visEditorSidebar__form {\n  flex: 1 1 auto;\n  display: flex;\n  flex-direction: column;\n  max-width: 100%; }\n  .visEditorSidebar__form > * {\n    flex-shrink: 0; }\n\n.visEditorSidebar__config {\n  padding: 8px; }\n  .visEditorSidebar__config > * {\n    flex-grow: 0; }\n  @media only screen and (min-width: 992px) and (max-width: 1199px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(90, 104, 117, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n  @media only screen and (min-width: 1200px) {\n    .visEditorSidebar__config {\n      flex: 1 1 1px;\n      display: flex;\n      flex-direction: column;\n      scrollbar-width: thin;\n      overflow: auto; }\n      .visEditorSidebar__config > * {\n        flex-shrink: 0; }\n      .visEditorSidebar__config::-webkit-scrollbar {\n        width: 16px;\n        height: 16px; }\n      .visEditorSidebar__config::-webkit-scrollbar-thumb {\n        background-color: rgba(90, 104, 117, 0.5);\n        border: 6px solid transparent;\n        background-clip: content-box; }\n      .visEditorSidebar__config::-webkit-scrollbar-corner, .visEditorSidebar__config::-webkit-scrollbar-track {\n        background-color: transparent; } }\n.visEditorSidebar__config-isHidden {\n  display: none; }\n\n.visEditorSidebar__titleContainer {\n  padding: 8px 32px 8px 8px; }\n\n.visEditorSidebar__indexPatternPlaceholder {\n  min-height: 40px;\n  border-bottom: 1px solid #D6D9DD; }\n\n.visEditorSidebar__nav,\n.visEditorSidebar__linkedSearch {\n  flex-grow: 0; }\n\n.visEditorSidebar__section {\n  background-color: #FCFEFF;\n  padding: 8px;\n  border-radius: 4px; }\n  .visEditorSidebar__section + .visEditorSidebar__section {\n    margin-top: 8px; }\n\n.visEditorSidebar__collapsible {\n  background-color: #F0F2F4; }\n\n.visEditorSidebar__collapsible--marginBottom {\n  margin-bottom: 12px; }\n\n.visEditorSidebar__formRow {\n  display: flex;\n  align-items: center;\n  margin-top: 12px; }\n\n.visEditorSidebar__formLabel {\n  display: flex;\n  align-items: center;\n  flex: 1 1 40%;\n  padding-right: 4px; }\n\n.visEditorSidebar__formControl {\n  display: flex;\n  align-items: center;\n  flex: 1 1 60%; }\n\n.visEditorSidebar__aggGroupAccordionButtonContent {\n  font-size: 14px; }\n  .visEditorSidebar__aggGroupAccordionButtonContent span {\n    color: #5A6875; }\n\n.visEditorSidebar__controls {\n  border-top: 1px solid #D6D9DD;\n  padding: 8px;\n  display: flex;\n  justify-content: flex-end;\n  align-items: center; }\n  .visEditorSidebar__controls .visEditorSidebar__autoApplyButton {\n    margin-left: 12px;\n    min-width: 0; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__content {\n      padding: 0 8px; }\n    .visEditorSidebar__controls .visEditorSidebar__autoApplyButton .euiButton__text {\n      display: none; }\n\n.visEditorAgg__subAgg {\n  border: 2px solid #D6D9DD;\n  border-radius: 4px;\n  background-color: transparent;\n  padding: 8px; }\n\n.visEditorAgg__subAgg + .visEditorAggParam__string {\n  margin-top: 16px; }\n\n.visEditorAggParam--half {\n  margin: 16px 0;\n  display: inline-block;\n  width: calc(50% - 4px); }\n\n.visEditorAggParam--half-size {\n  margin-left: 8px; }\n',""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},166:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return DefaultEditor}));var public_0=__webpack_require__(157);var json=__webpack_require__(45);var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var public_=__webpack_require__(9);var opensearchDashboardsUtils_public_=__webpack_require__(154);var external_osdSharedDeps_Lodash_=__webpack_require__(3);var external_osdSharedDeps_OsdI18n_=__webpack_require__(2);var external_osdSharedDeps_ElasticEui_=__webpack_require__(1);function DefaultEditorNavBar(_ref){let{setSelectedTab:setSelectedTab,optionTabs:optionTabs}=_ref;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTabs"],{className:"visEditorSidebar__nav",size:"s"},optionTabs.map(_ref2=>{let{name:name,title:title,isSelected:isSelected=false}=_ref2;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTab"],{key:name,isSelected:isSelected,"data-test-subj":"visEditorTab__".concat(name),onClick:()=>setSelectedTab(name)},title)}))}var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(6);var lib=__webpack_require__(10);var data_public_=__webpack_require__(5);let EditorStateActionTypes;(function(EditorStateActionTypes){EditorStateActionTypes["ADD_NEW_AGG"]="ADD_NEW_AGG";EditorStateActionTypes["DISCARD_CHANGES"]="DISCARD_CHANGES";EditorStateActionTypes["CHANGE_AGG_TYPE"]="CHANGE_AGG_TYPE";EditorStateActionTypes["SET_AGG_PARAM_VALUE"]="SET_AGG_PARAM_VALUE";EditorStateActionTypes["SET_STATE_PARAM_VALUE"]="SET_STATE_PARAM_VALUE";EditorStateActionTypes["TOGGLE_ENABLED_AGG"]="TOGGLE_ENABLED_AGG";EditorStateActionTypes["REMOVE_AGG"]="REMOVE_AGG";EditorStateActionTypes["REORDER_AGGS"]="REORDER_AGGS";EditorStateActionTypes["UPDATE_STATE_PARAMS"]="UPDATE_STATE_PARAMS"})(EditorStateActionTypes||(EditorStateActionTypes={}));var public_schemas=__webpack_require__(12);const isAggRemovable=(agg,group,schemas)=>{const schema=Object(public_schemas["d"])(schemas,agg.schema);const metricCount=group.reduce((count,aggregation)=>aggregation.schema===agg.schema?++count:count,0);return metricCount>schema.min};const getEnabledMetricAggsCount=group=>group.reduce((count,aggregation)=>aggregation.schema==="metric"&&aggregation.enabled?++count:count,0);const calcAggIsTooLow=(agg,aggIndex,group,schemas)=>{const schema=Object(public_schemas["d"])(schemas,agg.schema);if(!schema.mustBeFirst){return false}const firstDifferentSchema=Object(external_osdSharedDeps_Lodash_["findIndex"])(group,aggr=>aggr.schema!==agg.schema);if(firstDifferentSchema===-1){return false}return aggIndex>firstDifferentSchema};function isInvalidAggsTouched(aggsState){const invalidAggs=Object.values(aggsState).filter(agg=>!agg.valid);if(Object(external_osdSharedDeps_Lodash_["isEmpty"])(invalidAggs)){return false}return invalidAggs.every(agg=>agg.touched)}function initEditorState(vis){return{...vis.clone()}}const createEditorStateReducer=_ref=>{let{aggs:{createAggConfigs:createAggConfigs}}=_ref;return(state,action)=>{switch(action.type){case EditorStateActionTypes.ADD_NEW_AGG:{const{schema:schema}=action.payload;const defaultConfig=!state.data.aggs.aggs.find(agg=>agg.schema===schema.name)&&schema.defaults?schema.defaults.slice(0,schema.max):{schema:schema.name};const aggConfig=state.data.aggs.createAggConfig(defaultConfig,{addToAggConfigs:false});aggConfig.brandNew=true;const newAggs=[...state.data.aggs.aggs,aggConfig];return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.DISCARD_CHANGES:{return initEditorState(action.payload)}case EditorStateActionTypes.CHANGE_AGG_TYPE:{const{aggId:aggId,value:value}=action.payload;const newAggs=state.data.aggs.aggs.map(agg=>{if(agg.id===aggId){agg.type=value;return agg.toJSON()}return agg});return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.SET_AGG_PARAM_VALUE:{const{aggId:aggId,paramName:paramName,value:value}=action.payload;const newAggs=state.data.aggs.aggs.map(agg=>{if(agg.id===aggId){const parsedAgg=agg.toJSON();return{...parsedAgg,params:{...parsedAgg.params,[paramName]:value}}}return agg});return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.SET_STATE_PARAM_VALUE:{const{paramName:paramName,value:value}=action.payload;return{...state,params:{...state.params,[paramName]:value}}}case EditorStateActionTypes.REMOVE_AGG:{let isMetric=false;const newAggs=state.data.aggs.aggs.filter(_ref2=>{let{id:id,schema:schema}=_ref2;if(id===action.payload.aggId){const schemaDef=action.payload.schemas.find(s=>s.name===schema);if(schemaDef&&schemaDef.group===data_public_["AggGroupNames"].Metrics){isMetric=true}return false}return true});if(isMetric&&getEnabledMetricAggsCount(newAggs)===0){const aggToEnable=newAggs.find(agg=>agg.schema==="metric");if(aggToEnable){aggToEnable.enabled=true}}return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.REORDER_AGGS:{const{sourceAgg:sourceAgg,destinationAgg:destinationAgg}=action.payload;const destinationIndex=state.data.aggs.aggs.indexOf(destinationAgg);const newAggs=[...state.data.aggs.aggs];newAggs.splice(destinationIndex,0,newAggs.splice(state.data.aggs.aggs.indexOf(sourceAgg),1)[0]);return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.TOGGLE_ENABLED_AGG:{const{aggId:aggId,enabled:enabled}=action.payload;const newAggs=state.data.aggs.aggs.map(agg=>{if(agg.id===aggId){const parsedAgg=agg.toJSON();return{...parsedAgg,enabled:enabled}}return agg});return{...state,data:{...state.data,aggs:createAggConfigs(state.data.indexPattern,newAggs)}}}case EditorStateActionTypes.UPDATE_STATE_PARAMS:{const{params:params}=action.payload;return{...state,params:Object(external_osdSharedDeps_Lodash_["cloneDeep"])(params)}}}}};const initialFormState={validity:{},touched:false,invalid:false};function useEditorFormState(){const[formState,setFormState]=Object(external_osdSharedDeps_React_["useState"])(initialFormState);const setValidity=Object(external_osdSharedDeps_React_["useCallback"])((modelName,value)=>{setFormState(model=>{const validity={...model.validity,[modelName]:value};return{...model,validity:validity,invalid:Object.values(validity).some(valid=>!valid)}})},[]);const resetValidity=Object(external_osdSharedDeps_React_["useCallback"])(()=>{setFormState(initialFormState)},[]);const setTouched=Object(external_osdSharedDeps_React_["useCallback"])(touched=>{setFormState(model=>({...model,touched:touched}))},[]);return{formState:formState,setValidity:setValidity,setTouched:setTouched,resetValidity:resetValidity}}const addNewAgg=schema=>({type:EditorStateActionTypes.ADD_NEW_AGG,payload:{schema:schema}});const discardChanges=vis=>({type:EditorStateActionTypes.DISCARD_CHANGES,payload:vis});const changeAggType=(aggId,value)=>({type:EditorStateActionTypes.CHANGE_AGG_TYPE,payload:{aggId:aggId,value:value}});const actions_setAggParamValue=(aggId,paramName,value)=>({type:EditorStateActionTypes.SET_AGG_PARAM_VALUE,payload:{aggId:aggId,paramName:paramName,value:value}});const actions_setStateParamValue=(paramName,value)=>({type:EditorStateActionTypes.SET_STATE_PARAM_VALUE,payload:{paramName:paramName,value:value}});const actions_removeAgg=(aggId,schemas)=>({type:EditorStateActionTypes.REMOVE_AGG,payload:{aggId:aggId,schemas:schemas}});const actions_reorderAggs=(sourceAgg,destinationAgg)=>({type:EditorStateActionTypes.REORDER_AGGS,payload:{sourceAgg:sourceAgg,destinationAgg:destinationAgg}});const toggleEnabledAgg=(aggId,enabled)=>({type:EditorStateActionTypes.TOGGLE_ENABLED_AGG,payload:{aggId:aggId,enabled:enabled}});const updateStateParams=params=>({type:EditorStateActionTypes.UPDATE_STATE_PARAMS,payload:{params:params}});function useEditorReducer(vis,eventEmitter){const{services:services}=Object(public_["useOpenSearchDashboards"])();const[state,dispatch]=Object(external_osdSharedDeps_React_["useReducer"])(createEditorStateReducer(services.data.search),vis,initEditorState);const wrappedDispatch=Object(external_osdSharedDeps_React_["useCallback"])(action=>{dispatch(action);eventEmitter.emit("dirtyStateChange",{isDirty:action.type!==EditorStateActionTypes.DISCARD_CHANGES})},[eventEmitter]);return[state,wrappedDispatch]}function DefaultEditorControls(_ref){let{applyChanges:applyChanges,isDirty:isDirty,isInvalid:isInvalid,isTouched:isTouched,dispatch:dispatch,vis:vis}=_ref;const{enableAutoApply:enableAutoApply}=vis.type.editorConfig;const[autoApplyEnabled,setAutoApplyEnabled]=Object(external_osdSharedDeps_React_["useState"])(false);const toggleAutoApply=Object(external_osdSharedDeps_React_["useCallback"])(e=>setAutoApplyEnabled(!autoApplyEnabled),[autoApplyEnabled]);const onClickDiscard=Object(external_osdSharedDeps_React_["useCallback"])(()=>dispatch(discardChanges(vis)),[dispatch,vis]);Object(lib["useDebounce"])(()=>{if(autoApplyEnabled&&isDirty){applyChanges()}},300,[isDirty,autoApplyEnabled,applyChanges]);return external_osdSharedDeps_React_default.a.createElement("div",{className:"visEditorSidebar__controls"},!autoApplyEnabled&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",gutterSize:"none",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"visualizeEditorResetButton",disabled:!isDirty,iconType:"cross",onClick:onClickDiscard,size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.discardChangesButtonLabel",defaultMessage:"Discard"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},isInvalid&&isTouched?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{content:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.errorButtonTooltip",{defaultMessage:"Errors in the highlighted fields need to be resolved."})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{color:"danger",iconType:"alert",size:"s",disabled:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.updateChartButtonLabel",defaultMessage:"Update"}))):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"data-test-subj":"visualizeEditorRenderButton",disabled:!isDirty,fill:true,iconType:"play",onClick:applyChanges,size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.updateChartButtonLabel",defaultMessage:"Update"})))),enableAutoApply&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{title:autoApplyEnabled?external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesOnLabel",{defaultMessage:"Auto apply is on"}):external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesOffLabel",{defaultMessage:"Auto apply is off"}),content:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesTooltip",{defaultMessage:"Auto updates the visualization on every change."})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.autoApplyChangesAriaLabel",{defaultMessage:"Auto apply editor changes"}),className:"visEditorSidebar__autoApplyButton","data-test-subj":"visualizeEditorAutoButton",fill:autoApplyEnabled,iconType:"refresh",isSelected:autoApplyEnabled,onClick:toggleAutoApply,size:"s"})))}function LinkedSearch(_ref){let{savedSearch:savedSearch,eventEmitter:eventEmitter}=_ref;const[showPopover,setShowPopover]=Object(external_osdSharedDeps_React_["useState"])(false);const{services:{application:application}}=Object(public_["useOpenSearchDashboards"])();const closePopover=Object(external_osdSharedDeps_React_["useCallback"])(()=>setShowPopover(false),[]);const onClickButtonLink=Object(external_osdSharedDeps_React_["useCallback"])(()=>setShowPopover(v=>!v),[]);const onClickUnlikFromSavedSearch=Object(external_osdSharedDeps_React_["useCallback"])(()=>{setShowPopover(false);eventEmitter.emit("unlinkFromSavedSearch")},[eventEmitter]);const onClickViewInDiscover=Object(external_osdSharedDeps_React_["useCallback"])(()=>{application.navigateToApp("discover",{path:"#/view/".concat(savedSearch.id)})},[application,savedSearch.id]);const linkButtonAriaLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.savedSearch.linkButtonAriaLabel",{defaultMessage:"Link to saved search. Click to learn more or break link."});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"center",className:"visEditorSidebar__titleContainer visEditorSidebar__linkedSearch",gutterSize:"xs",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{type:"search"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textTruncate"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs",className:"eui-textTruncate"},external_osdSharedDeps_React_default.a.createElement("h2",{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.savedSearch.titleAriaLabel",{defaultMessage:"Saved search: {title}",values:{title:savedSearch.title}})},savedSearch.title))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{anchorPosition:"downRight",button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{content:linkButtonAriaLabel},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-label":linkButtonAriaLabel,"data-test-subj":"showUnlinkSavedSearchPopover",iconType:"link",onClick:onClickButtonLink})),isOpen:showPopover,closePopover:closePopover,panelPaddingSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.popoverTitle",defaultMessage:"Linked to saved search"})),external_osdSharedDeps_React_default.a.createElement("div",{style:{width:260}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"viewSavedSearch",flush:"left",onClick:onClickViewInDiscover,size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.goToDiscoverButtonText",defaultMessage:"View this search in Discover"}))),external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.popoverHelpText",defaultMessage:"Subsequent modifications to this saved search are reflected in the visualization. To disable automatic updates, remove the link."})),external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{color:"danger","data-test-subj":"unlinkSavedSearch",fullWidth:true,onClick:onClickUnlikFromSavedSearch,size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.sidebar.savedSearch.unlinkSavedSearchButtonText",defaultMessage:"Remove link to saved search"}))))))))}function SidebarTitle(_ref2){let{savedSearch:savedSearch,vis:vis,isLinkedSearch:isLinkedSearch,eventEmitter:eventEmitter}=_ref2;return isLinkedSearch&&savedSearch?external_osdSharedDeps_React_default.a.createElement(LinkedSearch,{savedSearch:savedSearch,eventEmitter:eventEmitter}):vis.type.options.showIndexSelection?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs",className:"visEditorSidebar__titleContainer eui-textTruncate"},external_osdSharedDeps_React_default.a.createElement("h2",{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.indexPatternAriaLabel",{defaultMessage:"Index pattern: {title}",values:{title:vis.data.indexPattern.title}})},vis.data.indexPattern.title)):external_osdSharedDeps_React_default.a.createElement("div",{className:"visEditorSidebar__indexPatternPlaceholder"})}var agg_params=__webpack_require__(13);let AGGS_ACTION_KEYS;(function(AGGS_ACTION_KEYS){AGGS_ACTION_KEYS["TOUCHED"]="aggsTouched";AGGS_ACTION_KEYS["VALID"]="aggsValid"})(AGGS_ACTION_KEYS||(AGGS_ACTION_KEYS={}));function aggGroupReducer(state,action){const aggState=state[action.aggId]||{touched:false,valid:true};switch(action.type){case AGGS_ACTION_KEYS.TOUCHED:return{...state,[action.aggId]:{...aggState,touched:action.payload}};case AGGS_ACTION_KEYS.VALID:return{...state,[action.aggId]:{...aggState,valid:action.payload}};default:throw new Error}}function initAggsState(group){return group.reduce((state,agg)=>{state[agg.id]={touched:false,valid:true};return state},{})}const PARAMS={NAME:"row",ROWS:"visEditorSplitBy__true",COLUMNS:"visEditorSplitBy__false"};function RowsOrColumnsControl(_ref){let{editorStateParams:editorStateParams,setStateParamValue:setStateParamValue}=_ref;if(editorStateParams.row===undefined){setStateParamValue(PARAMS.NAME,true)}const idSelected="visEditorSplitBy__".concat(editorStateParams.row);const options=[{id:PARAMS.ROWS,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.rowsLabel",{defaultMessage:"Rows"})},{id:PARAMS.COLUMNS,label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.columnsLabel",{defaultMessage:"Columns"})}];const onChange=Object(external_osdSharedDeps_React_["useCallback"])(optionId=>setStateParamValue(PARAMS.NAME,optionId===PARAMS.ROWS),[setStateParamValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{display:"rowCompressed",fullWidth:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonGroup"],{"data-test-subj":"visEditorSplitBy",legend:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.splitByLegend",{defaultMessage:"Split chart by rows or columns."}),options:options,isFullWidth:true,idSelected:idSelected,onChange:onChange})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}const DEFAULT_VALUE=50;const PARAM_NAME="radiusRatio";function RadiusRatioOptionControl(_ref){let{editorStateParams:editorStateParams,setStateParamValue:setStateParamValue}=_ref;const label=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.controls.dotSizeRatioLabel",defaultMessage:"Dot size ratio"})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{content:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.controls.dotSizeRatioHelpText",{defaultMessage:"Change the ratio of the radius of the smallest point to the largest point."}),position:"right"}));Object(lib["useMount"])(()=>{if(!editorStateParams.radiusRatio){setStateParamValue(PARAM_NAME,DEFAULT_VALUE)}});const onChange=Object(external_osdSharedDeps_React_["useCallback"])(e=>setStateParamValue(PARAM_NAME,parseFloat(e.currentTarget.value)),[setStateParamValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:label,display:"rowCompressed"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiRange"],{compressed:true,fullWidth:true,min:1,max:100,value:editorStateParams.radiusRatio||DEFAULT_VALUE,onChange:onChange,showRange:true,showValue:true,valueAppend:"%"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}var agg_params_helper=__webpack_require__(24);function DefaultEditorAgg(_ref){var _agg$type;let{agg:agg,aggIndex:aggIndex,aggIsTooLow:aggIsTooLow,dragHandleProps:dragHandleProps,formIsTouched:formIsTouched,groupName:groupName,isDisabled:isDisabled,isDraggable:isDraggable,isLastBucket:isLastBucket,isRemovable:isRemovable,metricAggs:metricAggs,lastParentPipelineAggTitle:lastParentPipelineAggTitle,state:state,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,removeAgg:removeAgg,setAggsState:setAggsState,schemas:schemas,timeRange:timeRange}=_ref;const[isEditorOpen,setIsEditorOpen]=Object(external_osdSharedDeps_React_["useState"])(agg.brandNew);const[validState,setValidState]=Object(external_osdSharedDeps_React_["useState"])(true);const showDescription=!isEditorOpen&&validState;const showError=!isEditorOpen&&!validState;const aggName=(_agg$type=agg.type)===null||_agg$type===void 0?void 0:_agg$type.name;let disabledParams;let aggError;const isLastBucketAgg=isLastBucket&&lastParentPipelineAggTitle&&agg.type;let SchemaComponent;if(agg.schema==="split"){SchemaComponent=RowsOrColumnsControl}if(agg.schema==="radius"){SchemaComponent=RadiusRatioOptionControl}if(isLastBucketAgg){if(["date_histogram","histogram"].includes(aggName)){disabledParams=["min_doc_count"]}else{aggError=external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.metrics.wrongLastBucketTypeErrorMessage",{defaultMessage:'Last bucket aggregation must be "Date Histogram" or "Histogram" when using "{type}" metric aggregation.',values:{type:lastParentPipelineAggTitle},description:"Date Histogram and Histogram should not be translated"})}}const[aggDescription,setAggDescription]=Object(external_osdSharedDeps_React_["useState"])(Object(agg_params_helper["a"])(agg));Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(timeRange&&aggName==="date_histogram"){agg.aggConfigs.setTimeRange(timeRange)}setAggDescription(Object(agg_params_helper["a"])(agg))},[agg,aggName,timeRange]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(isLastBucketAgg&&["date_histogram","histogram"].includes(aggName)){setAggParamValue(agg.id,"min_doc_count",aggName==="histogram"?true:0)}},[aggName,isLastBucketAgg,agg.id,setAggParamValue]);const setTouched=Object(external_osdSharedDeps_React_["useCallback"])(touched=>{setAggsState({type:AGGS_ACTION_KEYS.TOUCHED,payload:touched,aggId:agg.id})},[agg.id,setAggsState]);const setValidity=Object(external_osdSharedDeps_React_["useCallback"])(isValid=>{setAggsState({type:AGGS_ACTION_KEYS.VALID,payload:isValid,aggId:agg.id});setValidState(isValid)},[agg.id,setAggsState]);const onToggle=Object(external_osdSharedDeps_React_["useCallback"])(isOpen=>{setIsEditorOpen(isOpen);if(!isOpen){setTouched(true)}},[setTouched]);const renderAggButtons=()=>{const actionIcons=[];if(showError){actionIcons.push({id:"hasErrors",color:"danger",type:"alert",tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.errorsAriaLabel",{defaultMessage:"Aggregation has errors"}),dataTestSubj:"hasErrorsAggregationIcon"})}if(agg.enabled&&isRemovable){actionIcons.push({id:"disableAggregation",color:"text",disabled:isDisabled,type:"eye",onClick:()=>onToggleEnableAgg(agg.id,false),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.disableAggButtonTooltip",{defaultMessage:"Disable aggregation"}),dataTestSubj:"toggleDisableAggregationBtn disable"})}if(!agg.enabled){actionIcons.push({id:"enableAggregation",color:"text",type:"eyeClosed",onClick:()=>onToggleEnableAgg(agg.id,true),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.enableAggButtonTooltip",{defaultMessage:"Enable aggregation"}),dataTestSubj:"toggleDisableAggregationBtn enable"})}if(isDraggable){actionIcons.push({id:"dragHandle",type:"grab",tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.modifyPriorityButtonTooltip",{defaultMessage:"Modify priority by dragging"}),dataTestSubj:"dragHandleBtn"})}if(isRemovable){actionIcons.push({id:"removeDimension",color:"danger",type:"cross",onClick:()=>removeAgg(agg.id),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.removeDimensionButtonTooltip",{defaultMessage:"Remove dimension"}),dataTestSubj:"removeDimensionBtn"})}return external_osdSharedDeps_React_default.a.createElement("div",dragHandleProps,actionIcons.map(icon=>{if(icon.id==="dragHandle"){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{key:icon.id,type:icon.type,content:icon.tooltip,iconProps:{["aria-label"]:icon.tooltip,["data-test-subj"]:icon.dataTestSubj},position:"bottom"})}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{key:icon.id,position:"bottom",content:icon.tooltip},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{disabled:icon.disabled,iconType:icon.type,color:icon.color,onClick:icon.onClick,"aria-label":icon.tooltip,"data-test-subj":icon.dataTestSubj}))}))};const schemaTitle=Object(public_schemas["d"])(schemas,agg.schema).title;const buttonContent=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,schemaTitle||agg.schema," ",showDescription&&external_osdSharedDeps_React_default.a.createElement("span",null,aggDescription));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiAccordion"],{id:"visEditorAggAccordion".concat(agg.id),initialIsOpen:isEditorOpen,buttonContent:buttonContent,buttonClassName:"eui-textTruncate",buttonContentClassName:"visEditorSidebar__aggGroupAccordionButtonContent eui-textTruncate",className:"visEditorSidebar__section visEditorSidebar__collapsible visEditorSidebar__collapsible--marginBottom","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.agg.toggleEditorButtonAriaLabel",{defaultMessage:"Toggle {schema} editor",values:{schema:schemaTitle||agg.schema}}),"data-test-subj":"visEditorAggAccordion".concat(agg.id),extraAction:renderAggButtons(),onToggle:onToggle},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),SchemaComponent&&external_osdSharedDeps_React_default.a.createElement(SchemaComponent,{agg:agg,editorStateParams:state.params,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue}),external_osdSharedDeps_React_default.a.createElement(agg_params["a"],{agg:agg,aggError:aggError,aggIndex:aggIndex,aggIsTooLow:aggIsTooLow,disabledParams:disabledParams,formIsTouched:formIsTouched,groupName:groupName,indexPattern:agg.getIndexPattern(),metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,onAggTypeChange:onAggTypeChange,setTouched:setTouched,setValidity:setValidity,schemas:schemas})))}function DefaultEditorAggAdd(_ref){let{group:group=[],groupName:groupName,schemas:schemas,addSchema:addSchema,stats:stats}=_ref;const[isPopoverOpen,setIsPopoverOpen]=Object(external_osdSharedDeps_React_["useState"])(false);const onSelectSchema=schema=>{setIsPopoverOpen(false);addSchema(schema)};const addButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"xs",iconType:"plusInCircleFilled","data-test-subj":"visEditorAdd_".concat(groupName),onClick:()=>setIsPopoverOpen(!isPopoverOpen)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addButtonLabel",defaultMessage:"Add"}));const groupNameLabel=groupName===data_public_["AggGroupNames"].Buckets?external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.aggAdd.bucketLabel",{defaultMessage:"bucket"}):external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.aggAdd.metricLabel",{defaultMessage:"metric"});const isSchemaDisabled=schema=>{const count=group.filter(agg=>agg.schema===schema.name).length;return count>=schema.max};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{id:"addGroupButtonPopover_".concat(groupName),button:addButton,isOpen:isPopoverOpen,panelPaddingSize:"none",repositionOnScroll:true,closePopover:()=>setIsPopoverOpen(false)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverTitle"],null,(groupName!==data_public_["AggGroupNames"].Buckets||!stats.count)&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addGroupButtonLabel",defaultMessage:"Add {groupNameLabel}",values:{groupNameLabel:groupNameLabel}}),groupName===data_public_["AggGroupNames"].Buckets&&stats.count>0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visDefaultEditor.aggAdd.addSubGroupButtonLabel",defaultMessage:"Add sub-{groupNameLabel}",values:{groupNameLabel:groupNameLabel}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuPanel"],{items:schemas.map(schema=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"".concat(schema.name,"_").concat(schema.title),"data-test-subj":"visEditorAdd_".concat(groupName,"_").concat(schema.title),disabled:isPopoverOpen&&isSchemaDisabled(schema),onClick:()=>onSelectSchema(schema)},schema.title))}))))}function DefaultEditorAggGroup(_ref){let{formIsTouched:formIsTouched,groupName:groupName,lastParentPipelineAggTitle:lastParentPipelineAggTitle,metricAggs:metricAggs,state:state,schemas:schemas=[],addSchema:addSchema,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,removeAgg:removeAgg,reorderAggs:reorderAggs,setTouched:setTouched,setValidity:setValidity,timeRange:timeRange}=_ref;const groupNameLabel=data_public_["AggGroupLabels"][groupName];const schemaNames=schemas.map(s=>s.name);const group=Object(external_osdSharedDeps_React_["useMemo"])(()=>state.data.aggs.aggs.filter(agg=>agg.schema&&schemaNames.includes(agg.schema))||[],[state.data.aggs,schemaNames]);const stats={max:0,count:group.length};schemas.forEach(schema=>{stats.max+=schema.max});const[aggsState,setAggsState]=Object(external_osdSharedDeps_React_["useReducer"])(aggGroupReducer,group,initAggsState);const bucketsError=lastParentPipelineAggTitle&&groupName===data_public_["AggGroupNames"].Buckets&&!group.length?external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.buckets.mustHaveBucketErrorMessage",{defaultMessage:'Add a bucket with "Date Histogram" or "Histogram" aggregation.',description:"Date Histogram and Histogram should not be translated"}):undefined;const isGroupValid=!bucketsError&&Object.values(aggsState).every(item=>item.valid);const isAllAggsTouched=isInvalidAggsTouched(aggsState);const isMetricAggregationDisabled=Object(external_osdSharedDeps_React_["useMemo"])(()=>groupName===data_public_["AggGroupNames"].Metrics&&getEnabledMetricAggsCount(group)===1,[groupName,group]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setTouched(isAllAggsTouched)},[isAllAggsTouched,setTouched]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(formIsTouched&&!isAllAggsTouched){Object.keys(aggsState).map(_ref2=>{let[aggId]=_ref2;setAggsState({type:AGGS_ACTION_KEYS.TOUCHED,payload:true,aggId:aggId})})}},[formIsTouched]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity("aggGroup__".concat(groupName),isGroupValid)},[groupName,isGroupValid,setValidity]);const onDragEnd=Object(external_osdSharedDeps_React_["useCallback"])(_ref3=>{let{source:source,destination:destination}=_ref3;if(source&&destination){reorderAggs(group[source.index],group[destination.index])}},[reorderAggs,group]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:onDragEnd},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{"data-test-subj":"".concat(groupName,"AggGroup"),paddingSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("h3",null,groupNameLabel)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),bucketsError&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormErrorText"],{"data-test-subj":"bucketsError"},bucketsError),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"agg_group_dnd_".concat(groupName)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,group.map((agg,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDraggable"],{key:agg.id,index:index,draggableId:"agg_group_dnd_".concat(groupName,"_").concat(agg.id),customDragHandle:true},provided=>external_osdSharedDeps_React_default.a.createElement(DefaultEditorAgg,{agg:agg,aggIndex:index,aggIsTooLow:calcAggIsTooLow(agg,index,group,schemas),dragHandleProps:provided.dragHandleProps||null,formIsTouched:aggsState[agg.id]?aggsState[agg.id].touched:false,groupName:groupName,isDraggable:stats.count>1,isLastBucket:groupName===data_public_["AggGroupNames"].Buckets&&index===group.length-1,isRemovable:isAggRemovable(agg,group,schemas),isDisabled:agg.schema==="metric"&&isMetricAggregationDisabled,lastParentPipelineAggTitle:lastParentPipelineAggTitle,metricAggs:metricAggs,state:state,setAggParamValue:setAggParamValue,setStateParamValue:setStateParamValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,removeAgg:removeAgg,setAggsState:setAggsState,schemas:schemas,timeRange:timeRange}))))),stats.max>stats.count&&external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggAdd,{group:group,groupName:groupName,schemas:schemas,stats:stats,addSchema:addSchema})))}function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function DefaultEditorDataTab(_ref){let{dispatch:dispatch,formIsTouched:formIsTouched,metricAggs:metricAggs,schemas:schemas,state:state,setTouched:setTouched,setValidity:setValidity,setStateValue:setStateValue,timeRange:timeRange}=_ref;const lastParentPipelineAgg=Object(external_osdSharedDeps_React_["useMemo"])(()=>Object(external_osdSharedDeps_Lodash_["findLast"])(metricAggs,_ref2=>{let{type:type}=_ref2;return type.subtype===data_public_["search"].aggs.parentPipelineType}),[metricAggs]);const lastParentPipelineAggTitle=lastParentPipelineAgg&&lastParentPipelineAgg.type.title;const addSchema=Object(external_osdSharedDeps_React_["useCallback"])(schema=>dispatch(addNewAgg(schema)),[dispatch]);const onAggRemove=Object(external_osdSharedDeps_React_["useCallback"])(aggId=>dispatch(actions_removeAgg(aggId,schemas.all||[])),[dispatch,schemas]);const onReorderAggs=Object(external_osdSharedDeps_React_["useCallback"])((function(){return dispatch(actions_reorderAggs(...arguments))}),[dispatch]);const onAggParamValueChange=Object(external_osdSharedDeps_React_["useCallback"])((function(){return dispatch(actions_setAggParamValue(...arguments))}),[dispatch]);const onAggTypeChange=Object(external_osdSharedDeps_React_["useCallback"])((function(){return dispatch(changeAggType(...arguments))}),[dispatch]);const onToggleEnableAgg=Object(external_osdSharedDeps_React_["useCallback"])((function(){return dispatch(toggleEnabledAgg(...arguments))}),[dispatch]);const commonProps={addSchema:addSchema,formIsTouched:formIsTouched,lastParentPipelineAggTitle:lastParentPipelineAggTitle,metricAggs:metricAggs,state:state,reorderAggs:onReorderAggs,setAggParamValue:onAggParamValueChange,setStateParamValue:setStateValue,onAggTypeChange:onAggTypeChange,onToggleEnableAgg:onToggleEnableAgg,setValidity:setValidity,setTouched:setTouched,removeAgg:onAggRemove};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggGroup,_extends({groupName:data_public_["AggGroupNames"].Metrics,schemas:schemas.metrics},commonProps)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(DefaultEditorAggGroup,_extends({groupName:data_public_["AggGroupNames"].Buckets,schemas:schemas.buckets,timeRange:timeRange},commonProps)))}const useOptionTabs=_ref=>{let{type:visType}=_ref;const[optionTabs,setOptionTabs]=Object(external_osdSharedDeps_React_["useState"])(()=>{const tabs=[...visType.schemas.buckets||visType.schemas.metrics?[{name:"data",title:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.tabs.dataLabel",{defaultMessage:"Data"}),editor:DefaultEditorDataTab}]:[],...!visType.editorConfig.optionTabs&&visType.editorConfig.optionsTemplate?[{name:"options",title:external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.tabs.optionsLabel",{defaultMessage:"Options"}),editor:visType.editorConfig.optionsTemplate}]:visType.editorConfig.optionTabs instanceof Function?visType.editorConfig.optionTabs():visType.editorConfig.optionTabs];tabs[0].isSelected=true;return tabs});const setSelectedTab=Object(external_osdSharedDeps_React_["useCallback"])(name=>{setOptionTabs(tabs=>tabs.map(tab=>({...tab,isSelected:tab.name===name})))},[]);return[optionTabs,setSelectedTab]};function sidebar_extends(){sidebar_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return sidebar_extends.apply(this,arguments)}function DefaultEditorSideBar(_ref){let{embeddableHandler:embeddableHandler,isCollapsed:isCollapsed,onClickCollapse:onClickCollapse,uiState:uiState,vis:vis,isLinkedSearch:isLinkedSearch,eventEmitter:eventEmitter,savedSearch:savedSearch,timeRange:timeRange}=_ref;const[isDirty,setDirty]=Object(external_osdSharedDeps_React_["useState"])(false);const[state,dispatch]=useEditorReducer(vis,eventEmitter);const{formState:formState,setTouched:setTouched,setValidity:setValidity,resetValidity:resetValidity}=useEditorFormState();const[optionTabs,setSelectedTab]=useOptionTabs(vis);const responseAggs=Object(external_osdSharedDeps_React_["useMemo"])(()=>state.data.aggs?state.data.aggs.getResponseAggs():[],[state.data.aggs]);const metricSchemas=(vis.type.schemas.metrics||[]).map(s=>s.name);const metricAggs=Object(external_osdSharedDeps_React_["useMemo"])(()=>responseAggs.filter(agg=>agg.schema&&metricSchemas.includes(agg.schema)),[responseAggs,metricSchemas]);const hasHistogramAgg=Object(external_osdSharedDeps_React_["useMemo"])(()=>responseAggs.some(agg=>agg.type.name==="histogram"),[responseAggs]);const setStateValidity=Object(external_osdSharedDeps_React_["useCallback"])(value=>{setValidity("visOptions",value)},[setValidity]);const setStateValue=Object(external_osdSharedDeps_React_["useCallback"])((paramName,value)=>{const shouldUpdate=!Object(external_osdSharedDeps_Lodash_["isEqual"])(state.params[paramName],value);if(shouldUpdate){dispatch(actions_setStateParamValue(paramName,value))}},[dispatch,state.params]);const applyChanges=Object(external_osdSharedDeps_React_["useCallback"])(()=>{if(formState.invalid||!isDirty){setTouched(true);return}vis.setState({...vis.serialize(),params:state.params,data:{aggs:state.data.aggs?state.data.aggs.aggs.map(agg=>agg.toJSON()):[]}});embeddableHandler.reload();eventEmitter.emit("dirtyStateChange",{isDirty:false});setTouched(false)},[vis,state,formState.invalid,setTouched,isDirty,eventEmitter,embeddableHandler]);const onSubmit=Object(external_osdSharedDeps_React_["useCallback"])(event=>{if(event.ctrlKey&&event.key===external_osdSharedDeps_ElasticEui_["keys"].ENTER){event.preventDefault();event.stopPropagation();applyChanges()}},[applyChanges]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const changeHandler=_ref2=>{let{isDirty:dirty}=_ref2;setDirty(dirty);if(!dirty){resetValidity()}};eventEmitter.on("dirtyStateChange",changeHandler);return()=>{eventEmitter.off("dirtyStateChange",changeHandler)}},[resetValidity,eventEmitter]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const resetHandler=()=>dispatch(discardChanges(vis));eventEmitter.on("updateEditor",resetHandler);return()=>{eventEmitter.off("updateEditor",resetHandler)}},[dispatch,vis,eventEmitter]);const dataTabProps={dispatch:dispatch,formIsTouched:formState.touched,metricAggs:metricAggs,state:state,schemas:vis.type.schemas,setValidity:setValidity,setTouched:setTouched,setStateValue:setStateValue};const optionTabProps={aggs:state.data.aggs,hasHistogramAgg:hasHistogramAgg,stateParams:state.params,vis:vis,uiState:uiState,setValue:setStateValue,setValidity:setStateValidity,setTouched:setTouched};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{className:"visEditorSidebar",direction:"column",justifyContent:"spaceBetween",gutterSize:"none",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{className:"visEditorSidebar__formWrapper"},external_osdSharedDeps_React_default.a.createElement("form",{className:"visEditorSidebar__form",name:"visualizeEditor",onKeyDownCapture:onSubmit},vis.type.requiresSearch&&external_osdSharedDeps_React_default.a.createElement(SidebarTitle,{isLinkedSearch:isLinkedSearch,savedSearch:savedSearch,vis:vis,eventEmitter:eventEmitter}),optionTabs.length>1&&external_osdSharedDeps_React_default.a.createElement(DefaultEditorNavBar,{optionTabs:optionTabs,setSelectedTab:setSelectedTab}),optionTabs.map(_ref3=>{let{editor:Editor,name:name,isSelected:isSelected=false}=_ref3;return external_osdSharedDeps_React_default.a.createElement("div",{key:name,className:"visEditorSidebar__config ".concat(isSelected?"":"visEditorSidebar__config-isHidden")},external_osdSharedDeps_React_default.a.createElement(Editor,sidebar_extends({isTabSelected:isSelected},name==="data"?dataTabProps:optionTabProps,{timeRange:timeRange})))}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(DefaultEditorControls,{applyChanges:applyChanges,dispatch:dispatch,isDirty:isDirty,isTouched:formState.touched,isInvalid:formState.invalid,vis:vis}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{"aria-expanded":!isCollapsed,"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("visDefaultEditor.sidebar.collapseButtonAriaLabel",{defaultMessage:"Toggle sidebar"}),className:"visEditor__collapsibleSidebarButton","data-test-subj":"collapseSideBarButton",color:"text",iconType:isCollapsed?"menuLeft":"menuRight",onClick:onClickCollapse}))}var editor_size=__webpack_require__(28);const localStorage=new opensearchDashboardsUtils_public_["Storage"](window.localStorage);function DefaultEditor(_ref){let{core:core,data:data,vis:vis,uiState:uiState,timeRange:timeRange,filters:filters,query:query,embeddableHandler:embeddableHandler,eventEmitter:eventEmitter,linked:linked,savedSearch:savedSearch}=_ref;const visRef=Object(external_osdSharedDeps_React_["useRef"])(null);const[isCollapsed,setIsCollapsed]=Object(external_osdSharedDeps_React_["useState"])(false);const onClickCollapse=Object(external_osdSharedDeps_React_["useCallback"])(()=>{setIsCollapsed(value=>!value)},[]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(!visRef.current){return}embeddableHandler.render(visRef.current);setTimeout(()=>{eventEmitter.emit("embeddableRendered")});return()=>embeddableHandler.destroy()},[embeddableHandler,eventEmitter]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{embeddableHandler.updateInput({timeRange:timeRange,filters:filters,query:query})},[embeddableHandler,timeRange,filters,query]);const editorInitialWidth=Object(editor_size["b"])(vis.type.editorConfig.defaultSize);return external_osdSharedDeps_React_default.a.createElement(core.i18n.Context,null,external_osdSharedDeps_React_default.a.createElement(public_["OpenSearchDashboardsContextProvider"],{services:{appName:"vis_default_editor",storage:localStorage,data:data,...core}},external_osdSharedDeps_React_default.a.createElement(public_["PanelsContainer"],{className:"visEditor--default",resizerClassName:"visEditor__resizer ".concat(isCollapsed?"visEditor__resizer-isHidden":"")},external_osdSharedDeps_React_default.a.createElement(public_["Panel"],{className:"visEditor__visualization",initialWidth:100-editorInitialWidth},external_osdSharedDeps_React_default.a.createElement("div",{className:"visEditor__canvas",ref:visRef,"data-shared-items-container":true})),external_osdSharedDeps_React_default.a.createElement(public_["Panel"],{className:"visEditor__collapsibleSidebar ".concat(isCollapsed?"visEditor__collapsibleSidebar-isClosed":""),initialWidth:editorInitialWidth},external_osdSharedDeps_React_default.a.createElement(DefaultEditorSideBar,{embeddableHandler:embeddableHandler,isCollapsed:isCollapsed,onClickCollapse:onClickCollapse,vis:vis,uiState:uiState,isLinkedSearch:linked,savedSearch:savedSearch,timeRange:timeRange,eventEmitter:eventEmitter})))))}}}]);
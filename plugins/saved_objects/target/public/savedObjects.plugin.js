(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=12)})([function(module,exports){module.exports=__osdSharedDeps__.React},function(module,exports){module.exports=__osdSharedDeps__.ElasticEui},function(module,exports){module.exports=__osdSharedDeps__.OsdI18n},function(module,exports){module.exports=__osdSharedDeps__.Lodash},function(module,exports){module.exports=__osdSharedDeps__.OsdI18nReact},function(module,exports,__webpack_require__){"use strict";module.exports=function(cssWithMappingToString){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list}},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/data/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&typeof btoa!=="undefined"){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},function(module,exports){module.exports=__osdSharedDeps__.ReactDom},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsUtils/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/opensearchDashboardsReact/public");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var ns=__osdBundles__.get("plugin/data/common/index_patterns/utils.ts");Object.defineProperties(__webpack_exports__,Object.getOwnPropertyDescriptors(ns))},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(13);var _node_modules_val_loader_dist_cjs_js_key_savedObjects_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_val_loader_dist_cjs_js_key_savedObjects_osd_ui_shared_deps_public_path_module_creator_js__WEBPACK_IMPORTED_MODULE_0__);__osdBundles__.define("plugin/savedObjects/public",__webpack_require__,23)},function(module,exports,__webpack_require__){__webpack_require__.p=window.__osdPublicPath__["savedObjects"]},function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(15);case"v7light":return __webpack_require__(17);case"v8dark":return __webpack_require__(19);case"v8light":return __webpack_require__(21)}},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(16);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.osdSavedObjectSaveModal {\n  width: 400px; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(18);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.osdSavedObjectSaveModal {\n  width: 400px; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(20);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.osdSavedObjectSaveModal {\n  width: 400px; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,exports,__webpack_require__){var api=__webpack_require__(7);var content=__webpack_require__(22);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(5);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.osdSavedObjectSaveModal {\n  width: 400px; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"OnSaveProps",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModal",(function(){return saved_object_save_modal_SavedObjectSaveModal}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveModalOrigin",(function(){return SavedObjectSaveModalOrigin}));__webpack_require__.d(__webpack_exports__,"SaveModalState",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SaveResult",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"showSaveModal",(function(){return showSaveModal}));__webpack_require__.d(__webpack_exports__,"getSavedObjectFinder",(function(){return getSavedObjectFinder}));__webpack_require__.d(__webpack_exports__,"SavedObjectFinderUi",(function(){return saved_object_finder_SavedObjectFinderUi}));__webpack_require__.d(__webpack_exports__,"SavedObjectMetaData",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectLoader",(function(){return saved_object_loader_SavedObjectLoader}));__webpack_require__.d(__webpack_exports__,"createSavedObjectClass",(function(){return createSavedObjectClass}));__webpack_require__.d(__webpack_exports__,"checkForDuplicateTitle",(function(){return checkForDuplicateTitle}));__webpack_require__.d(__webpack_exports__,"saveWithConfirmation",(function(){return saveWithConfirmation}));__webpack_require__.d(__webpack_exports__,"isErrorNonFatal",(function(){return isErrorNonFatal}));__webpack_require__.d(__webpack_exports__,"SavedObjectSaveOpts",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObjectOpenSearchDashboardsServices",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"SavedObject",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"PER_PAGE_SETTING",(function(){return PER_PAGE_SETTING}));__webpack_require__.d(__webpack_exports__,"LISTING_LIMIT_SETTING",(function(){return LISTING_LIMIT_SETTING}));__webpack_require__.d(__webpack_exports__,"SavedObjectsStart",(function(){return undefined}));__webpack_require__.d(__webpack_exports__,"plugin",(function(){return public_plugin}));var public_0=__webpack_require__(14);var external_osdSharedDeps_Lodash_=__webpack_require__(3);var external_osdSharedDeps_Lodash_default=__webpack_require__.n(external_osdSharedDeps_Lodash_);async function hydrateIndexPattern(id,savedObject,indexPatterns,config){const indexPattern=config.indexPattern;if(!savedObject.searchSource){return null}const index=id||indexPattern||savedObject.searchSource.getOwnField("index");if(typeof index!=="string"||!index){return null}const indexObj=await indexPatterns.get(index);savedObject.searchSource.setField("index",indexObj);return indexObj}async function intializeSavedObject(savedObject,savedObjectsClient,config){const opensearchType=config.type;if(!opensearchType)throw new Error("You must define a type name to use SavedObject objects.");if(!savedObject.id){external_osdSharedDeps_Lodash_default.a.assign(savedObject,savedObject.defaults);await savedObject.hydrateIndexPattern();if(typeof config.afterOpenSearchResp==="function"){savedObject=await config.afterOpenSearchResp(savedObject)}return savedObject}const resp=await savedObjectsClient.get(opensearchType,savedObject.id);const respMapped={_id:resp.id,_type:resp.type,_source:external_osdSharedDeps_Lodash_default.a.cloneDeep(resp.attributes),references:resp.references,found:!!resp._version};await savedObject.applyOpenSearchResp(respMapped);if(typeof config.init==="function"){await config.init.call(savedObject)}return savedObject}var public_=__webpack_require__(6);function serializeSavedObject(savedObject,config){const mapping=Object(public_["expandShorthand"])(config.mapping);const attributes={};const references=[];external_osdSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(typeof fieldName!=="string"){return}const savedObjectFieldVal=savedObject[fieldName];if(savedObjectFieldVal!=null){attributes[fieldName]=fieldMapping._serialize?fieldMapping._serialize(savedObjectFieldVal):savedObjectFieldVal}});if(savedObject.searchSource){const{searchSourceJSON:searchSourceJSON,references:searchSourceReferences}=savedObject.searchSource.serialize();attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.searchSourceFields){const[searchSourceFields,searchSourceReferences]=Object(public_["extractSearchSourceReferences"])(savedObject.searchSourceFields);const searchSourceJSON=JSON.stringify(searchSourceFields);attributes.kibanaSavedObjectMeta={searchSourceJSON:searchSourceJSON};references.push(...searchSourceReferences)}if(savedObject.unresolvedIndexPatternReference){references.push(savedObject.unresolvedIndexPatternReference)}return{attributes:attributes,references:references}}var opensearchDashboardsUtils_public_=__webpack_require__(9);async function applyOpenSearchResp(resp,savedObject,config,dependencies){const mapping=Object(public_["expandShorthand"])(config.mapping);const opensearchType=config.type||"";savedObject._source=external_osdSharedDeps_Lodash_default.a.cloneDeep(resp._source);const injectReferences=config.injectReferences;if(typeof resp.found==="boolean"&&!resp.found){throw new opensearchDashboardsUtils_public_["SavedObjectNotFound"](opensearchType,savedObject.id||"")}const meta=resp._source.kibanaSavedObjectMeta||{};delete resp._source.kibanaSavedObjectMeta;if(!config.indexPattern&&savedObject._source.indexPattern){config.indexPattern=savedObject._source.indexPattern;delete savedObject._source.indexPattern}external_osdSharedDeps_Lodash_default.a.defaults(savedObject._source,savedObject.defaults);external_osdSharedDeps_Lodash_default.a.forOwn(mapping,(fieldMapping,fieldName)=>{if(fieldMapping._deserialize&&typeof fieldName==="string"){savedObject._source[fieldName]=fieldMapping._deserialize(savedObject._source[fieldName])}});external_osdSharedDeps_Lodash_default.a.assign(savedObject,savedObject._source);savedObject.lastSavedTitle=savedObject.title;if(meta.searchSourceJSON){try{let searchSourceValues=Object(public_["parseSearchSourceJSON"])(meta.searchSourceJSON);if(config.searchSource){searchSourceValues=Object(public_["injectSearchSourceReferences"])(searchSourceValues,resp.references);savedObject.searchSource=await dependencies.search.searchSource.create(searchSourceValues)}else{savedObject.searchSourceFields=searchSourceValues}}catch(error){if(error.constructor.name==="SavedObjectNotFound"&&error.savedObjectType==="index-pattern"){savedObject.unresolvedIndexPatternReference={name:"kibanaSavedObjectMeta.searchSourceJSON.index",id:JSON.parse(meta.searchSourceJSON).index,type:"index-pattern"}}throw error}}if(injectReferences&&resp.references&&resp.references.length>0){injectReferences(savedObject,resp.references)}if(typeof config.afterOpenSearchResp==="function"){savedObject=await config.afterOpenSearchResp(savedObject)}return savedObject}var external_osdSharedDeps_OsdI18n_=__webpack_require__(2);const OVERWRITE_REJECTED=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.overwriteRejectedDescription",{defaultMessage:"Overwrite confirmation was rejected"});const SAVE_DUPLICATE_REJECTED=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.saveDuplicateRejectedDescription",{defaultMessage:"Save with duplicate title confirmation was rejected"});var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ElasticEui_=__webpack_require__(1);var opensearchDashboardsReact_public_=__webpack_require__(10);function confirmModalPromise(){let message=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";let title=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";let confirmBtnText=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";let overlays=arguments.length>3?arguments[3]:undefined;return new Promise((resolve,reject)=>{const cancelButtonText=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.cancelButtonLabel",{defaultMessage:"Cancel"});const modal=overlays.openModal(Object(opensearchDashboardsReact_public_["toMountPoint"])(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiConfirmModal"],{onCancel:()=>{modal.close();reject()},onConfirm:()=>{modal.close();resolve(true)},confirmButtonText:confirmBtnText,cancelButtonText:cancelButtonText,title:title},message)))})}async function createSource(source,savedObject,opensearchType){let options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};let services=arguments.length>4?arguments[4]:undefined;const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;try{return await savedObjectsClient.create(opensearchType,source,options)}catch(err){if(external_osdSharedDeps_Lodash_default.a.get(err,"res.status")===409){const confirmMessage=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});const title=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.getDisplayName()}});const confirmButtonText=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(opensearchType,source,savedObject.creationOpts({overwrite:true,...options}))).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED)))}return await Promise.reject(err)}}async function findObjectByTitle(savedObjectsClient,type,title){if(!title){return}const response=await savedObjectsClient.find({type:type,perPage:10,search:'"'.concat(title,'"'),searchFields:["title"],fields:["title"]});return response.savedObjects.find(obj=>obj.get("title").toLowerCase()===title.toLowerCase())}function displayDuplicateTitleConfirmModal(savedObject,overlays){const confirmMessage=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateConfirmationMessage",{defaultMessage:"A {name} with the title '{title}' already exists. Would you like to save anyway?",values:{title:savedObject.title,name:savedObject.getDisplayName()}});const confirmButtonText=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.saveDuplicateButtonLabel",{defaultMessage:"Save {name}",values:{name:savedObject.getDisplayName()}});try{return confirmModalPromise(confirmMessage,"",confirmButtonText,overlays)}catch(_){return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}}async function checkForDuplicateTitle(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services){const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;if(isTitleDuplicateConfirmed){return true}if(savedObject.title===savedObject.lastSavedTitle&&!savedObject.copyOnSave){return true}const duplicate=await findObjectByTitle(savedObjectsClient,savedObject.getOpenSearchType(),savedObject.title);if(!duplicate||duplicate.id===savedObject.id){return true}if(onTitleDuplicate){onTitleDuplicate();return Promise.reject(new Error(SAVE_DUPLICATE_REJECTED))}return displayDuplicateTitleConfirmModal(savedObject,overlays)}function isErrorNonFatal(error){if(!error)return false;return error.message===OVERWRITE_REJECTED||error.message===SAVE_DUPLICATE_REJECTED}async function saveSavedObject(savedObject,config){let{confirmOverwrite:confirmOverwrite=false,isTitleDuplicateConfirmed:isTitleDuplicateConfirmed=false,onTitleDuplicate:onTitleDuplicate}=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};let services=arguments.length>3?arguments[3]:undefined;const{savedObjectsClient:savedObjectsClient,chrome:chrome}=services;const opensearchType=config.type||"";const extractReferences=config.extractReferences;const originalId=savedObject.id;if(savedObject.copyOnSave){delete savedObject.id}let{attributes:attributes,references:references}=savedObject._serialize();if(extractReferences){({attributes:attributes,references:references}=extractReferences({attributes:attributes,references:references}))}if(!references)throw new Error("References not returned from extractReferences");try{await checkForDuplicateTitle(savedObject,isTitleDuplicateConfirmed,onTitleDuplicate,services);savedObject.isSaving=true;const resp=confirmOverwrite?await createSource(attributes,savedObject,opensearchType,savedObject.creationOpts({references:references}),services):await savedObjectsClient.create(opensearchType,attributes,savedObject.creationOpts({references:references,overwrite:true}));savedObject.id=resp.id;if(savedObject.showInRecentlyAccessed&&savedObject.getFullPath){chrome.recentlyAccessed.add(savedObject.getFullPath(),savedObject.title,String(savedObject.id))}savedObject.isSaving=false;savedObject.lastSavedTitle=savedObject.title;return savedObject.id}catch(err){savedObject.isSaving=false;savedObject.id=originalId;if(isErrorNonFatal(err)){return""}return Promise.reject(err)}}function buildSavedObject(savedObject){let config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let services=arguments.length>2?arguments[2]:undefined;const{indexPatterns:indexPatterns,savedObjectsClient:savedObjectsClient}=services;const opensearchType=config.type||"";savedObject.getDisplayName=()=>opensearchType;savedObject.getOpenSearchType=()=>opensearchType;savedObject.isSaving=false;savedObject.defaults=config.defaults||{};savedObject.searchSource=config.searchSource?services.search.searchSource.createEmpty():undefined;savedObject.id=config.id||void 0;savedObject.migrationVersion=config.migrationVersion;savedObject.copyOnSave=false;savedObject.hydrateIndexPattern=id=>hydrateIndexPattern(id||"",savedObject,indexPatterns,config);savedObject.init=Object(external_osdSharedDeps_Lodash_["once"])(()=>intializeSavedObject(savedObject,savedObjectsClient,config));savedObject.applyOpenSearchResp=resp=>applyOpenSearchResp(resp,savedObject,config,services);savedObject._serialize=()=>serializeSavedObject(savedObject,config);savedObject.isTitleChanged=()=>savedObject._source&&savedObject._source.title!==savedObject.title;savedObject.creationOpts=function(){let opts=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return{id:savedObject.id,migrationVersion:savedObject.migrationVersion,...opts}};savedObject.save=async opts=>{try{const result=await saveSavedObject(savedObject,config,opts,services);return Promise.resolve(result)}catch(e){return Promise.reject(e)}};savedObject.destroy=()=>{};savedObject.delete=()=>{if(!savedObject.id){return Promise.reject(new Error("Deleting a saved Object requires type and id"))}return savedObjectsClient.delete(opensearchType,savedObject.id)}}function createSavedObjectClass(services){class SavedObjectClass{constructor(){let config=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};const self=this;buildSavedObject(self,config,services)}}return SavedObjectClass}class StringUtils{static upperFirst(){let str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str?str.charAt(0).toUpperCase()+str.slice(1):""}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_loader_SavedObjectLoader{constructor(SavedObjectClass,savedObjectsClient){this.savedObjectsClient=savedObjectsClient;_defineProperty(this,"Class",void 0);_defineProperty(this,"type",void 0);_defineProperty(this,"lowercaseType",void 0);_defineProperty(this,"loaderProperties",void 0);this.type=SavedObjectClass.type;this.Class=SavedObjectClass;this.lowercaseType=this.type.toLowerCase();this.loaderProperties={name:"".concat(this.lowercaseType,"s"),noun:StringUtils.upperFirst(this.type),nouns:"".concat(this.lowercaseType,"s")}}async get(opts){const obj=new this.Class(opts);return obj.init()}urlFor(id){return"#/".concat(this.lowercaseType,"/").concat(encodeURIComponent(id))}async delete(ids){const idsUsed=!Array.isArray(ids)?[ids]:ids;const deletions=idsUsed.map(id=>{const savedObject=new this.Class(id);return savedObject.delete()});await Promise.all(deletions)}mapHitSource(source,id){source.id=id;source.url=this.urlFor(id);return source}mapSavedObjectApiHits(hit){var _hit$updated_at;hit.attributes.updated_at=(_hit$updated_at=hit===null||hit===void 0?void 0:hit.updated_at)!==null&&_hit$updated_at!==void 0?_hit$updated_at:hit.attributes._updatedAt;return this.mapHitSource(hit.attributes,hit.id)}findAll(){let search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;let fields=arguments.length>2?arguments[2]:undefined;let hasReference=arguments.length>3?arguments[3]:undefined;let searchFields=arguments.length>4&&arguments[4]!==undefined?arguments[4]:["title^3","description"];return this.savedObjectsClient.find({type:this.lowercaseType,search:search?"".concat(search,"*"):undefined,perPage:size,page:1,searchFields:searchFields,defaultSearchOperator:"AND",fields:fields,hasReference:hasReference}).then(resp=>({total:resp.total,hits:resp.savedObjects.map(savedObject=>this.mapSavedObjectApiHits(savedObject))}))}find(){let search=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";let size=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return this.findAll(search,size).then(resp=>({total:resp.total,hits:resp.hits.filter(savedObject=>!savedObject.error)}))}}async function saveWithConfirmation(source,savedObject,options,services){const{savedObjectsClient:savedObjectsClient,overlays:overlays}=services;try{return await savedObjectsClient.create(savedObject.getOpenSearchType(),source,options)}catch(err){if(Object(external_osdSharedDeps_Lodash_["get"])(err,"res.status")===409){const confirmMessage=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteConfirmationMessage",{defaultMessage:"Are you sure you want to overwrite {title}?",values:{title:savedObject.title}});const title=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteTitle",{defaultMessage:"Overwrite {name}?",values:{name:savedObject.displayName}});const confirmButtonText=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.confirmModal.overwriteButtonLabel",{defaultMessage:"Overwrite"});return confirmModalPromise(confirmMessage,title,confirmButtonText,overlays).then(()=>savedObjectsClient.create(savedObject.getOpenSearchType(),source,{overwrite:true,...options})).catch(()=>Promise.reject(new Error(OVERWRITE_REJECTED)))}return await Promise.reject(err)}}const PER_PAGE_SETTING="savedObjects:perPage";const PER_PAGE_VALUE=20;const LISTING_LIMIT_SETTING="savedObjects:listingLimit";const LISTING_LIMIT_VALUE=1e3;class plugin_SavedObjectsPublicPlugin{setup(){}start(core,_ref){let{data:data}=_ref;return{SavedObjectClass:createSavedObjectClass({indexPatterns:data.indexPatterns,savedObjectsClient:core.savedObjects.client,search:data.search,chrome:core.chrome,overlays:core.overlays}),settings:{getPerPage:()=>core.uiSettings.get(PER_PAGE_SETTING),getListingLimit:()=>core.uiSettings.get(LISTING_LIMIT_SETTING)}}}}var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(4);function saved_object_save_modal_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const generateId=Object(external_osdSharedDeps_ElasticEui_["htmlIdGenerator"])();class saved_object_save_modal_SavedObjectSaveModal extends external_osdSharedDeps_React_default.a.Component{constructor(){super(...arguments);saved_object_save_modal_defineProperty(this,"warning",external_osdSharedDeps_React_default.a.createRef());saved_object_save_modal_defineProperty(this,"state",{title:this.props.title,copyOnSave:Boolean(this.props.initialCopyOnSave),isTitleDuplicateConfirmed:false,hasTitleDuplicate:false,isLoading:false,visualizationDescription:this.props.description?this.props.description:""});saved_object_save_modal_defineProperty(this,"renderViewDescription",()=>{if(!this.props.showDescription){return}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.descriptionLabel",defaultMessage:"Description"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTextArea"],{"data-test-subj":"viewDescription",value:this.state.visualizationDescription,onChange:this.onDescriptionChange}))});saved_object_save_modal_defineProperty(this,"onDescriptionChange",event=>{this.setState({visualizationDescription:event.target.value})});saved_object_save_modal_defineProperty(this,"onTitleDuplicate",()=>{this.setState({isLoading:false,isTitleDuplicateConfirmed:true,hasTitleDuplicate:true});if(this.warning.current){this.warning.current.focus()}});saved_object_save_modal_defineProperty(this,"saveSavedObject",async()=>{if(this.state.isLoading){return}this.setState({isLoading:true});await this.props.onSave({newTitle:this.state.title,newCopyOnSave:this.state.copyOnSave,isTitleDuplicateConfirmed:this.state.isTitleDuplicateConfirmed,onTitleDuplicate:this.onTitleDuplicate,newDescription:this.state.visualizationDescription})});saved_object_save_modal_defineProperty(this,"onTitleChange",event=>{this.setState({title:event.target.value,isTitleDuplicateConfirmed:false,hasTitleDuplicate:false})});saved_object_save_modal_defineProperty(this,"onCopyOnSaveChange",event=>{this.setState({copyOnSave:event.target.checked})});saved_object_save_modal_defineProperty(this,"onFormSubmit",event=>{event.preventDefault();this.saveSavedObject()});saved_object_save_modal_defineProperty(this,"renderConfirmButton",()=>{const{isLoading:isLoading,title:title}=this.state;let confirmLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.saveModal.saveButtonLabel",{defaultMessage:"Save"});if(this.props.confirmButtonLabel){confirmLabel=this.props.confirmButtonLabel}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,"data-test-subj":"confirmSaveSavedObjectButton",isLoading:isLoading,isDisabled:title.length===0,type:"submit",form:"savedObjectSaveModalForm"},confirmLabel)});saved_object_save_modal_defineProperty(this,"renderDuplicateTitleCallout",duplicateWarningId=>{if(!this.state.hasTitleDuplicate){return}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement("div",{ref:this.warning,tabIndex:-1},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleLabel",defaultMessage:"This {objectType} already exists",values:{objectType:this.props.objectType}}),color:"warning","data-test-subj":"titleDupicateWarnMsg",id:duplicateWarningId},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.duplicateTitleDescription",defaultMessage:"Saving '{title}' creates a duplicate title.",values:{title:this.state.title}})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null))});saved_object_save_modal_defineProperty(this,"renderCopyOnSave",()=>{if(!this.props.showCopyOnSave){return}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"saveAsNewCheckbox",checked:this.state.copyOnSave,onChange:this.onCopyOnSaveChange,label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveAsNewLabel",defaultMessage:"Save as new {objectType}",values:{objectType:this.props.objectType}})}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null))})}render(){const{isTitleDuplicateConfirmed:isTitleDuplicateConfirmed,hasTitleDuplicate:hasTitleDuplicate,title:title}=this.state;const duplicateWarningId=generateId();return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{"data-test-subj":"savedObjectSaveModal",className:"osdSavedObjectSaveModal",onClose:this.props.onClose},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.saveTitle",defaultMessage:"Save {objectType}",values:{objectType:this.props.objectType}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,this.renderDuplicateTitleCallout(duplicateWarningId),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{component:"form",onSubmit:this.onFormSubmit,id:"savedObjectSaveModalForm"},!this.props.showDescription&&this.props.description&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},this.props.description),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),this.renderCopyOnSave(),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.titleLabel",defaultMessage:"Title"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],{fullWidth:true,autoFocus:true,"data-test-subj":"savedObjectTitle",value:title,onChange:this.onTitleChange,isInvalid:!isTitleDuplicateConfirmed&&hasTitleDuplicate||title.length===0,"aria-describedby":this.state.hasTitleDuplicate?duplicateWarningId:undefined})),this.renderViewDescription(),typeof this.props.options==="function"?this.props.options(this.state):this.props.options)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{"data-test-subj":"saveCancelButton",onClick:this.props.onClose},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModal.cancelButtonLabel",defaultMessage:"Cancel"})),this.renderConfirmButton()))}}function SavedObjectSaveModalOrigin(props){const[returnToOriginMode,setReturnToOriginMode]=Object(external_osdSharedDeps_React_["useState"])(Boolean(props.originatingApp));const{documentInfo:documentInfo}=props;const returnLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.saveModalOrigin.returnToOriginLabel",{defaultMessage:"Return"});const addLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.saveModalOrigin.addToOriginLabel",{defaultMessage:"Add"});const getReturnToOriginSwitch=state=>{if(!props.originatingApp){return}const origin=props.getAppNameFromId?props.getAppNameFromId(props.originatingApp)||props.originatingApp:props.originatingApp;if(!state.copyOnSave||props.originatingApp==="dashboards"){var _props$returnToOrigin;const originVerb=!documentInfo.id||state.copyOnSave?addLabel:returnLabel;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{"data-test-subj":"returnToOriginModeSwitch",checked:returnToOriginMode,onChange:event=>{setReturnToOriginMode(event.target.checked)},label:(_props$returnToOrigin=props.returnToOriginSwitchLabel)!==null&&_props$returnToOrigin!==void 0?_props$returnToOrigin:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjects.saveModalOrigin.originAfterSavingSwitchLabel",defaultMessage:"{originVerb} to {origin} after saving",values:{originVerb:originVerb,origin:origin}})})))}else{setReturnToOriginMode(false)}};const onModalSave=onSaveProps=>{props.onSave({...onSaveProps,returnToOrigin:returnToOriginMode})};const confirmButtonLabel=returnToOriginMode?external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.saveModalOrigin.saveAndReturnLabel",{defaultMessage:"Save and return"}):null;return external_osdSharedDeps_React_default.a.createElement(saved_object_save_modal_SavedObjectSaveModal,{onSave:onModalSave,onClose:props.onClose,title:documentInfo.title,showCopyOnSave:documentInfo.id?true:false,initialCopyOnSave:Boolean(documentInfo.id)&&returnToOriginMode,confirmButtonLabel:confirmButtonLabel,objectType:props.objectType,options:getReturnToOriginSwitch,description:documentInfo.description,showDescription:true})}var external_osdSharedDeps_ReactDom_=__webpack_require__(8);var external_osdSharedDeps_ReactDom_default=__webpack_require__.n(external_osdSharedDeps_ReactDom_);function isSuccess(result){return"id"in result}function showSaveModal(saveModal,I18nContext){const container=document.createElement("div");const closeModal=()=>{external_osdSharedDeps_ReactDom_default.a.unmountComponentAtNode(container);document.body.removeChild(container)};const onSave=saveModal.props.onSave;const onSaveConfirmed=async function(){const response=await onSave(...arguments);if(Boolean(isSuccess(response)?response.id:response.error)){closeModal()}return response};document.body.appendChild(container);const element=external_osdSharedDeps_React_default.a.cloneElement(saveModal,{onSave:onSaveConfirmed,onClose:closeModal});external_osdSharedDeps_ReactDom_default.a.render(external_osdSharedDeps_React_default.a.createElement(I18nContext,null,element),container)}var utils_ts_=__webpack_require__(11);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function saved_object_finder_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_object_finder_SavedObjectFinderUi extends external_osdSharedDeps_React_default.a.Component{constructor(props){super(props);saved_object_finder_defineProperty(this,"isComponentMounted",false);saved_object_finder_defineProperty(this,"debouncedFetch",external_osdSharedDeps_Lodash_default.a.debounce(async query=>{const metaDataMap=this.getSavedObjectMetaDataMap();const fields=Object.values(metaDataMap).map(metaData=>metaData.includeFields||[]).reduce((allFields,currentFields)=>allFields.concat(currentFields),["title"]);const perPage=this.props.uiSettings.get(LISTING_LIMIT_SETTING);const resp=await this.props.savedObjects.client.find({type:Object.keys(metaDataMap),fields:[...new Set(fields)],search:query?"".concat(query,"*"):undefined,page:1,perPage:perPage,searchFields:["title^3","description"],defaultSearchOperator:"AND"});const getDataSource=async id=>{const client=this.props.savedObjects.client;return await client.get("data-source",id)};const savedObjects=await Promise.all(resp.savedObjects.map(async obj=>{if(obj.type==="index-pattern"){const result={...obj};result.attributes.title=await Object(utils_ts_["getIndexPatternTitle"])(obj.attributes.title,obj.references,getDataSource);return result}else{return obj}}));resp.savedObjects=savedObjects.filter(savedObject=>{const metaData=metaDataMap[savedObject.type];if(metaData.showSavedObject){return metaData.showSavedObject(savedObject)}else{return true}});if(!this.isComponentMounted){return}if(query===this.state.query){this.setState({isFetchingItems:false,page:0,items:resp.savedObjects.map(savedObject=>{const{attributes:{title:title},id:id,type:type}=savedObject;return{title:typeof title==="string"?title:"",id:id,type:type,savedObject:savedObject}})})}},300));saved_object_finder_defineProperty(this,"getPageOfItems",()=>{const items=this.state.items.slice();const{sortDirection:sortDirection}=this.state;if(sortDirection||!this.state.query){items.sort((_ref,_ref2)=>{let{title:titleA}=_ref;let{title:titleB}=_ref2;let order=1;if(sortDirection==="desc"){order=-1}return order*(titleA||"").toLowerCase().localeCompare((titleB||"").toLowerCase())})}const startIndex=this.state.page*this.state.perPage;const lastIndex=startIndex+this.state.perPage;return items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).slice(startIndex,lastIndex)});saved_object_finder_defineProperty(this,"fetchItems",()=>{this.setState({isFetchingItems:true},this.debouncedFetch.bind(null,this.state.query))});this.state={items:[],isFetchingItems:false,page:0,perPage:props.initialPageSize||props.fixedPageSize||10,query:"",filterOpen:false,filteredTypes:[],sortOpen:false}}componentWillUnmount(){this.isComponentMounted=false;this.debouncedFetch.cancel()}componentDidMount(){this.isComponentMounted=true;this.fetchItems()}render(){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.renderSearchBar(),this.renderListing())}getSavedObjectMetaDataMap(){return this.props.savedObjectMetaData.reduce((map,metaData)=>({...map,[metaData.type]:metaData}),{})}getPageCount(){return Math.ceil((this.state.filteredTypes.length===0?this.state.items.length:this.state.items.filter(item=>this.state.filteredTypes.length===0||this.state.filteredTypes.includes(item.type)).length)/this.state.perPage)}getAvailableSavedObjectMetaData(){const typesInItems=new Set;this.state.items.forEach(item=>{typesInItems.add(item.type)});return this.props.savedObjectMetaData.filter(metaData=>typesInItems.has(metaData.type))}getSortOptions(){const sortOptions=[external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"asc",icon:this.state.sortDirection==="asc"||this.state.query===""&&this.state.sortDirection!=="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"asc"})}},external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.sortAsc",{defaultMessage:"Ascending"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"desc",icon:this.state.sortDirection==="desc"?"check":"empty",onClick:()=>{this.setState({sortDirection:"desc"})}},external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.sortDesc",{defaultMessage:"Descending"}))];if(this.state.query){sortOptions.push(external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:"auto",icon:!this.state.sortDirection?"check":"empty",onClick:()=>{this.setState({sortDirection:undefined})}},external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.sortAuto",{defaultMessage:"Best match"})))}return sortOptions}renderSearchBar(){const availableSavedObjectMetaData=this.getAvailableSavedObjectMetaData();return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"m"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{placeholder:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.searchPlaceholder",{defaultMessage:"Search"}),fullWidth:true,value:this.state.query,onChange:e=>{this.setState({query:e.target.value},this.fetchItems)},"data-test-subj":"savedObjectFinderSearchInput",isLoading:this.state.isFetchingItems})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelSortPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.sortOpen,closePopover:()=>this.setState({sortOpen:false}),button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(_ref3=>{let{sortOpen:sortOpen}=_ref3;return{sortOpen:!sortOpen}}),iconType:"arrowDown",isSelected:this.state.sortOpen,"data-test-subj":"savedObjectFinderSortButton"},external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.sortButtonLabel",{defaultMessage:"Sort"}))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.getSortOptions()})),this.props.showFilter&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{id:"addPanelFilterPopover",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",isOpen:this.state.filterOpen,closePopover:()=>this.setState({filterOpen:false}),button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{onClick:()=>this.setState(_ref4=>{let{filterOpen:filterOpen}=_ref4;return{filterOpen:!filterOpen}}),iconType:"arrowDown","data-test-subj":"savedObjectFinderFilterButton",isSelected:this.state.filterOpen,numFilters:this.props.savedObjectMetaData.length,hasActiveFilters:this.state.filteredTypes.length>0,numActiveFilters:this.state.filteredTypes.length},external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjects.finder.filterButtonLabel",{defaultMessage:"Types"}))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuPanel"],{watchedItemProps:["icon","disabled"],items:this.props.savedObjectMetaData.map(metaData=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiContextMenuItem"],{key:metaData.type,disabled:!availableSavedObjectMetaData.includes(metaData),icon:this.state.filteredTypes.includes(metaData.type)?"check":"empty","data-test-subj":"savedObjectFinderFilter-".concat(metaData.type),onClick:()=>{this.setState(_ref5=>{let{filteredTypes:filteredTypes}=_ref5;return{filteredTypes:filteredTypes.includes(metaData.type)?filteredTypes.filter(t=>t!==metaData.type):[...filteredTypes,metaData.type],page:0}})}},metaData.name))})))),this.props.children?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},this.props.children):null)}renderListing(){const items=this.state.items.length===0?[]:this.getPageOfItems();const{onChoose:onChoose,savedObjectMetaData:savedObjectMetaData}=this.props;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.state.isFetchingItems&&this.state.items.length===0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"center"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingSpinner"],{"data-test-subj":"savedObjectFinderLoadingIndicator"}))),items.length>0?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiListGroup"],{"data-test-subj":"savedObjectFinderItemList",maxWidth:false},items.map(item=>{const currentSavedObjectMetaData=savedObjectMetaData.find(metaData=>metaData.type===item.type);const fullName=currentSavedObjectMetaData.getTooltipForSavedObject?currentSavedObjectMetaData.getTooltipForSavedObject(item.savedObject):"".concat(item.title," (").concat(currentSavedObjectMetaData.name,")");const iconType=(currentSavedObjectMetaData||{getIconForSavedObject:()=>"document"}).getIconForSavedObject(item.savedObject);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiListGroupItem"],{key:item.id,iconType:iconType,label:item.title,onClick:onChoose?()=>{onChoose(item.id,item.type,fullName,item.savedObject)}:undefined,title:fullName,"data-test-subj":"savedObjectTitle".concat((item.title||"").split(" ").join("-"))})})):!this.state.isFetchingItems&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiEmptyPrompt"],{body:this.props.noItemsMessage}),this.getPageCount()>1&&(this.props.fixedPageSize?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onPageClick:page=>{this.setState({page:page})}}):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTablePagination"],{activePage:this.state.page,pageCount:this.getPageCount(),onChangePage:page=>{this.setState({page:page})},onChangeItemsPerPage:perPage=>{this.setState({perPage:perPage})},itemsPerPage:this.state.perPage,itemsPerPageOptions:[5,10,15,25]})))}}const getSavedObjectFinder=(savedObject,uiSettings)=>props=>external_osdSharedDeps_React_default.a.createElement(saved_object_finder_SavedObjectFinderUi,_extends({},props,{savedObjects:savedObject,uiSettings:uiSettings}));const public_plugin=()=>new plugin_SavedObjectsPublicPlugin}]);
(window["visTypeTable_bundle_jsonpfunction"]=window["visTypeTable_bundle_jsonpfunction"]||[]).push([[1],{33:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return TableOptions}));var external_osdSharedDeps_Lodash_=__webpack_require__(4);var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_ElasticEui_=__webpack_require__(2);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(14);var public_=__webpack_require__(8);var charts_public_=__webpack_require__(32);var types=__webpack_require__(6);const totalAggregations=[{value:types["a"].SUM,text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.totalAggregations.sumText",{defaultMessage:"Sum"})},{value:types["a"].AVG,text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.totalAggregations.averageText",{defaultMessage:"Average"})},{value:types["a"].MIN,text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.totalAggregations.minText",{defaultMessage:"Min"})},{value:types["a"].MAX,text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.totalAggregations.maxText",{defaultMessage:"Max"})},{value:types["a"].COUNT,text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.totalAggregations.countText",{defaultMessage:"Count"})}];const{tabifyGetColumns:tabifyGetColumns}=public_["search"];function TableOptions(_ref){let{aggs:aggs,stateParams:stateParams,setValidity:setValidity,setValue:setValue}=_ref;const percentageColumns=Object(external_osdSharedDeps_React_["useMemo"])(()=>[{value:"",text:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.defaultPercentageCol",{defaultMessage:"Donâ€™t show"})},...tabifyGetColumns(aggs.getResponseAggs(),true).filter(col=>Object(external_osdSharedDeps_Lodash_["get"])(col.aggConfig.toSerializedFieldFormat(),"id")==="number").map(_ref2=>{let{name:name}=_ref2;return{value:name,text:name}})],[aggs]);const isPerPageValid=stateParams.perPage===""||stateParams.perPage>0;Object(external_osdSharedDeps_React_["useEffect"])(()=>{setValidity(isPerPageValid)},[isPerPageValid,setValidity]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{if(!percentageColumns.find(_ref3=>{let{value:value}=_ref3;return value===stateParams.percentageCol})&&percentageColumns[0]&&percentageColumns[0].value!==stateParams.percentageCol){setValue("percentageCol",percentageColumns[0].value)}},[percentageColumns,stateParams.percentageCol,setValidity,setValue]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{paddingSize:"s"},external_osdSharedDeps_React_default.a.createElement(charts_public_["NumberInputOption"],{label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"visTypeTable.params.perPageLabel",defaultMessage:"Max rows per page"})," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{content:"Leaving this field empty means it will use number of buckets from the response.",position:"right"})),isInvalid:!isPerPageValid,min:1,paramName:"perPage",value:stateParams.perPage,setValue:setValue}),external_osdSharedDeps_React_default.a.createElement(charts_public_["SwitchOption"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.showMetricsLabel",{defaultMessage:"Show metrics for every bucket/level"}),paramName:"showMetricsAtAllLevels",value:stateParams.showMetricsAtAllLevels,setValue:setValue,"data-test-subj":"showMetricsAtAllLevels"}),external_osdSharedDeps_React_default.a.createElement(charts_public_["SwitchOption"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.showPartialRowsLabel",{defaultMessage:"Show partial rows"}),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.showPartialRowsTip",{defaultMessage:"Show rows that have partial data. This will still calculate metrics for every bucket/level, even if they are not displayed."}),paramName:"showPartialRows",value:stateParams.showPartialRows,setValue:setValue,"data-test-subj":"showPartialRows"}),external_osdSharedDeps_React_default.a.createElement(charts_public_["SwitchOption"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.showTotalLabel",{defaultMessage:"Show total"}),paramName:"showTotal",value:stateParams.showTotal,setValue:setValue,"data-test-subj":"showTotal"}),external_osdSharedDeps_React_default.a.createElement(charts_public_["SelectOption"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.totalFunctionLabel",{defaultMessage:"Total function"}),disabled:!stateParams.showTotal,options:totalAggregations,paramName:"totalFunc",value:stateParams.totalFunc,setValue:setValue,"data-test-subj":"totalFunctionOptions"}),external_osdSharedDeps_React_default.a.createElement(charts_public_["SelectOption"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("visTypeTable.params.PercentageColLabel",{defaultMessage:"Percentage column"}),options:percentageColumns,paramName:"percentageCol",value:stateParams.percentageCol,setValue:setValue,"data-test-subj":"datatableVisualizationPercentageCol"}))}}}]);
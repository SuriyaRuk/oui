(window["savedObjectsManagement_bundle_jsonpfunction"]=window["savedObjectsManagement_bundle_jsonpfunction"]||[]).push([[2],{20:function(module,exports,__webpack_require__){"use strict";var isOldIE=function isOldIE(){var memo;return function memorize(){if(typeof memo==="undefined"){memo=Boolean(window&&document&&document.all&&!window.atob)}return memo}}();var getTarget=function getTarget(){var memo={};return function memorize(target){if(typeof memo[target]==="undefined"){var styleTarget=document.querySelector(target);if(window.HTMLIFrameElement&&styleTarget instanceof window.HTMLIFrameElement){try{styleTarget=styleTarget.contentDocument.head}catch(e){styleTarget=null}}memo[target]=styleTarget}return memo[target]}}();var stylesInDom=[];function getIndexByIdentifier(identifier){var result=-1;for(var i=0;i<stylesInDom.length;i++){if(stylesInDom[i].identifier===identifier){result=i;break}}return result}function modulesToDom(list,options){var idCountMap={};var identifiers=[];for(var i=0;i<list.length;i++){var item=list[i];var id=options.base?item[0]+options.base:item[0];var count=idCountMap[id]||0;var identifier="".concat(id," ").concat(count);idCountMap[id]=count+1;var index=getIndexByIdentifier(identifier);var obj={css:item[1],media:item[2],sourceMap:item[3]};if(index!==-1){stylesInDom[index].references++;stylesInDom[index].updater(obj)}else{stylesInDom.push({identifier:identifier,updater:addStyle(obj,options),references:1})}identifiers.push(identifier)}return identifiers}function insertStyleElement(options){var style=document.createElement("style");var attributes=options.attributes||{};if(typeof attributes.nonce==="undefined"){var nonce=true?__webpack_require__.nc:undefined;if(nonce){attributes.nonce=nonce}}Object.keys(attributes).forEach((function(key){style.setAttribute(key,attributes[key])}));if(typeof options.insert==="function"){options.insert(style)}else{var target=getTarget(options.insert||"head");if(!target){throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.")}target.appendChild(style)}return style}function removeStyleElement(style){if(style.parentNode===null){return false}style.parentNode.removeChild(style)}var replaceText=function replaceText(){var textStore=[];return function replace(index,replacement){textStore[index]=replacement;return textStore.filter(Boolean).join("\n")}}();function applyToSingletonTag(style,index,remove,obj){var css=remove?"":obj.media?"@media ".concat(obj.media," {").concat(obj.css,"}"):obj.css;if(style.styleSheet){style.styleSheet.cssText=replaceText(index,css)}else{var cssNode=document.createTextNode(css);var childNodes=style.childNodes;if(childNodes[index]){style.removeChild(childNodes[index])}if(childNodes.length){style.insertBefore(cssNode,childNodes[index])}else{style.appendChild(cssNode)}}}function applyToTag(style,options,obj){var css=obj.css;var media=obj.media;var sourceMap=obj.sourceMap;if(media){style.setAttribute("media",media)}else{style.removeAttribute("media")}if(sourceMap&&typeof btoa!=="undefined"){css+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))))," */")}if(style.styleSheet){style.styleSheet.cssText=css}else{while(style.firstChild){style.removeChild(style.firstChild)}style.appendChild(document.createTextNode(css))}}var singleton=null;var singletonCounter=0;function addStyle(obj,options){var style;var update;var remove;if(options.singleton){var styleIndex=singletonCounter++;style=singleton||(singleton=insertStyleElement(options));update=applyToSingletonTag.bind(null,style,styleIndex,false);remove=applyToSingletonTag.bind(null,style,styleIndex,true)}else{style=insertStyleElement(options);update=applyToTag.bind(null,style,options);remove=function remove(){removeStyleElement(style)}}update(obj);return function updateStyle(newObj){if(newObj){if(newObj.css===obj.css&&newObj.media===obj.media&&newObj.sourceMap===obj.sourceMap){return}update(obj=newObj)}else{remove()}}}module.exports=function(list,options){options=options||{};if(!options.singleton&&typeof options.singleton!=="boolean"){options.singleton=isOldIE()}list=list||[];var lastIdentifiers=modulesToDom(list,options);return function update(newList){newList=newList||[];if(Object.prototype.toString.call(newList)!=="[object Array]"){return}for(var i=0;i<lastIdentifiers.length;i++){var identifier=lastIdentifiers[i];var index=getIndexByIdentifier(identifier);stylesInDom[index].references--}var newLastIdentifiers=modulesToDom(newList,options);for(var _i=0;_i<lastIdentifiers.length;_i++){var _identifier=lastIdentifiers[_i];var _index=getIndexByIdentifier(_identifier);if(stylesInDom[_index].references===0){stylesInDom[_index].updater();stylesInDom.splice(_index,1)}}lastIdentifiers=newLastIdentifiers}}},21:function(module,exports,__webpack_require__){"use strict";module.exports=function(cssWithMappingToString){var list=[];list.toString=function toString(){return this.map((function(item){var content=cssWithMappingToString(item);if(item[2]){return"@media ".concat(item[2]," {").concat(content,"}")}return content})).join("")};list.i=function(modules,mediaQuery,dedupe){if(typeof modules==="string"){modules=[[null,modules,""]]}var alreadyImportedModules={};if(dedupe){for(var i=0;i<this.length;i++){var id=this[i][0];if(id!=null){alreadyImportedModules[id]=true}}}for(var _i=0;_i<modules.length;_i++){var item=[].concat(modules[_i]);if(dedupe&&alreadyImportedModules[item[0]]){continue}if(mediaQuery){if(!item[2]){item[2]=mediaQuery}else{item[2]="".concat(mediaQuery," and ").concat(item[2])}}list.push(item)}};return list}},83:function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */var saveAs=saveAs||function(view){"use strict";if(typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var doc=view.document,get_URL=function(){return view.URL||view.webkitURL||view},save_link=doc.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,click=function(node){var event=new MouseEvent("click");node.dispatchEvent(event)},webkit_req_fs=view.webkitRequestFileSystem,req_fs=view.requestFileSystem||webkit_req_fs||view.mozRequestFileSystem,throw_outside=function(ex){(view.setImmediate||view.setTimeout)((function(){throw ex}),0)},force_saveable_type="application/octet-stream",fs_min_size=0,arbitrary_revoke_timeout=500,revoke=function(file){var revoker=function(){if(typeof file==="string"){get_URL().revokeObjectURL(file)}else{file.remove()}};if(view.chrome){revoker()}else{setTimeout(revoker,arbitrary_revoke_timeout)}},dispatch=function(filesaver,event_types,event){event_types=[].concat(event_types);var i=event_types.length;while(i--){var listener=filesaver["on"+event_types[i]];if(typeof listener==="function"){try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}},auto_bom=function(blob){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)){return new Blob(["\ufeff",blob],{type:blob.type})}return blob},FileSaver=function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}var filesaver=this,type=blob.type,blob_changed=false,object_url,target_view,dispatch_all=function(){dispatch(filesaver,"writestart progress write writeend".split(" "))},fs_error=function(){if(blob_changed||!object_url){object_url=get_URL().createObjectURL(blob)}if(target_view){target_view.location.href=object_url}else{var new_tab=view.open(object_url,"_blank");if(new_tab==undefined&&typeof safari!=="undefined"){view.location.href=object_url}}filesaver.readyState=filesaver.DONE;dispatch_all();revoke(object_url)},abortable=function(func){return function(){if(filesaver.readyState!==filesaver.DONE){return func.apply(this,arguments)}}},create_if_not_found={create:true,exclusive:false},slice;filesaver.readyState=filesaver.INIT;if(!name){name="download"}if(can_use_save_link){object_url=get_URL().createObjectURL(blob);save_link.href=object_url;save_link.download=name;setTimeout((function(){click(save_link);dispatch_all();revoke(object_url);filesaver.readyState=filesaver.DONE}));return}if(view.chrome&&type&&type!==force_saveable_type){slice=blob.slice||blob.webkitSlice;blob=slice.call(blob,0,blob.size,force_saveable_type);blob_changed=true}if(webkit_req_fs&&name!=="download"){name+=".download"}if(type===force_saveable_type||webkit_req_fs){target_view=view}if(!req_fs){fs_error();return}fs_min_size+=blob.size;req_fs(view.TEMPORARY,fs_min_size,abortable((function(fs){fs.root.getDirectory("saved",create_if_not_found,abortable((function(dir){var save=function(){dir.getFile(name,create_if_not_found,abortable((function(file){file.createWriter(abortable((function(writer){writer.onwriteend=function(event){target_view.location.href=file.toURL();filesaver.readyState=filesaver.DONE;dispatch(filesaver,"writeend",event);revoke(file)};writer.onerror=function(){var error=writer.error;if(error.code!==error.ABORT_ERR){fs_error()}};"writestart progress write abort".split(" ").forEach((function(event){writer["on"+event]=filesaver["on"+event]}));writer.write(blob);filesaver.abort=function(){writer.abort();filesaver.readyState=filesaver.DONE};filesaver.readyState=filesaver.WRITING})),fs_error)})),fs_error)};dir.getFile(name,{create:false},abortable((function(file){file.remove();save()})),abortable((function(ex){if(ex.code===ex.NOT_FOUND_ERR){save()}else{fs_error()}})))})),fs_error)})),fs_error)},FS_proto=FileSaver.prototype,saveAs=function(blob,name,no_auto_bom){return new FileSaver(blob,name,no_auto_bom)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(blob,name,no_auto_bom){if(!no_auto_bom){blob=auto_bom(blob)}return navigator.msSaveOrOpenBlob(blob,name||"download")}}FS_proto.abort=function(){var filesaver=this;filesaver.readyState=filesaver.DONE;dispatch(filesaver,"abort")};FS_proto.readyState=FS_proto.INIT=0;FS_proto.WRITING=1;FS_proto.DONE=2;FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null;return saveAs}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(true&&module.exports){module.exports.saveAs=saveAs}else if(true&&__webpack_require__(84)!==null&&__webpack_require__(85)!=null){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return saveAs}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}},84:function(module,exports){module.exports=function(){throw new Error("define cannot be used indirect")}},85:function(module,exports){(function(__webpack_amd_options__){module.exports=__webpack_amd_options__}).call(this,{})},86:function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(87);case"v7light":return __webpack_require__(89);case"v8dark":return __webpack_require__(91);case"v8light":return __webpack_require__(93)}},87:function(module,exports,__webpack_require__){var api=__webpack_require__(20);var content=__webpack_require__(88);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},88:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #7DE2D1; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #F66; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},89:function(module,exports,__webpack_require__){var api=__webpack_require__(20);var content=__webpack_require__(90);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},90:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #017D73; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #BD271E; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},91:function(module,exports,__webpack_require__){var api=__webpack_require__(20);var content=__webpack_require__(92);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},92:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #7DE2D1; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #F66; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},93:function(module,exports,__webpack_require__){var api=__webpack_require__(20);var content=__webpack_require__(94);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},94:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(21);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.savedObjectsManagementImportSummary__row {\n  margin-bottom: 4px; }\n\n.savedObjectsManagementImportSummary__title {\n  min-width: 0; }\n\n.savedObjectsManagementImportSummary__createdCount {\n  color: #01786f; }\n\n.savedObjectsManagementImportSummary__errorCount {\n  color: #BD271E; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},95:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return SavedObjectsTablePage}));var external_osdSharedDeps_React_=__webpack_require__(10);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var external_osdSharedDeps_Lodash_=__webpack_require__(0);var external_osdSharedDeps_Lodash_default=__webpack_require__.n(external_osdSharedDeps_Lodash_);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);var file_saver=__webpack_require__(83);var external_osdSharedDeps_ElasticEui_=__webpack_require__(11);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(12);var public_=__webpack_require__(16);var lib=__webpack_require__(4);const Header=_ref=>{let{onExportAll:onExportAll,onImport:onImport,onRefresh:onRefresh,filteredCount:filteredCount}=_ref;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",alignItems:"baseline"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],null,external_osdSharedDeps_React_default.a.createElement("h1",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.savedObjectsTitle",defaultMessage:"Saved Objects"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{alignItems:"baseline",gutterSize:"m",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"exportAction","data-test-subj":"exportAllObjects",onClick:onExportAll},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.exportButtonLabel",defaultMessage:"Export {filteredCount, plural, one{# object} other {# objects}}",values:{filteredCount:filteredCount}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"importAction","data-test-subj":"importObjects",onClick:onImport},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.importButtonLabel",defaultMessage:"Import"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{size:"s",iconType:"refresh",onClick:onRefresh},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.header.refreshButtonLabel",defaultMessage:"Refresh"})))))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTextColor"],{color:"subdued"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.howToDeleteSavedObjectsDescription",defaultMessage:"Manage and share your saved objects. To edit the underlying data of an object, go to its associated application."})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))};var external_osdSharedDeps_Moment_=__webpack_require__(14);var external_osdSharedDeps_Moment_default=__webpack_require__.n(external_osdSharedDeps_Moment_);function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class table_Table extends external_osdSharedDeps_React_["PureComponent"]{constructor(props){super(props);_defineProperty(this,"state",{isSearchTextValid:true,parseErrorMessage:null,isExportPopoverOpen:false,isIncludeReferencesDeepChecked:true,activeAction:undefined,isColumnDataLoaded:false});_defineProperty(this,"loadColumnData",async()=>{await Promise.all(this.props.columnRegistry.getAll().map(column=>column.loadData()));this.setState({isColumnDataLoaded:true})});_defineProperty(this,"onChange",_ref=>{let{query:query,error:error}=_ref;if(error){this.setState({isSearchTextValid:false,parseErrorMessage:error.message});return}this.setState({isSearchTextValid:true,parseErrorMessage:null});this.props.onQueryChange({query:query})});_defineProperty(this,"closeExportPopover",()=>{this.setState({isExportPopoverOpen:false})});_defineProperty(this,"toggleExportPopoverVisibility",()=>{this.setState(state=>({isExportPopoverOpen:!state.isExportPopoverOpen}))});_defineProperty(this,"toggleIsIncludeReferencesDeepChecked",()=>{this.setState(state=>({isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}))});_defineProperty(this,"onExportClick",()=>{const{onExport:onExport}=this.props;const{isIncludeReferencesDeepChecked:isIncludeReferencesDeepChecked}=this.state;onExport(isIncludeReferencesDeepChecked);this.setState({isExportPopoverOpen:false})})}componentDidMount(){this.loadColumnData()}render(){var _this$state$activeAct,_this$state$activeAct2;const{pageIndex:pageIndex,pageSize:pageSize,itemId:itemId,items:items,totalItemCount:totalItemCount,isSearching:isSearching,filters:filters,selectionConfig:selection,onDelete:onDelete,onActionRefresh:onActionRefresh,selectedSavedObjects:selectedSavedObjects,onTableChange:onTableChange,goInspectObject:goInspectObject,onShowRelationships:onShowRelationships,basePath:basePath,actionRegistry:actionRegistry,columnRegistry:columnRegistry,namespaceRegistry:namespaceRegistry,dateFormat:dateFormat}=this.props;const pagination={pageIndex:pageIndex,pageSize:pageSize,totalItemCount:totalItemCount,pageSizeOptions:[5,10,20,50]};const columns=[{field:"type",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,"data-test-subj":"savedObjectsTableRowType",render:(type,object)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:object.meta.icon||"apps",size:"s","data-test-subj":"objectType"}))},{field:"meta.title",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTitleName",{defaultMessage:"Title"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,"data-test-subj":"savedObjectsTableRowTitle",render:(title,object)=>{const{path:path=""}=object.meta.inAppUrl||{};const canGoInApp=this.props.canGoInApp(object);if(!canGoInApp){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},title||Object(lib["getDefaultTitle"])(object))}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:basePath.prepend(path)},title||Object(lib["getDefaultTitle"])(object))}},{field:"updated_at",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnUpdatedAtName",{defaultMessage:"Last updated"}),dataType:"date",sortable:true,description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnUpdatedAtDescription",{defaultMessage:"Last update of the saved object"}),"data-test-subj":"updated-at",render:updatedAt=>updatedAt&&external_osdSharedDeps_Moment_default()(updatedAt).format(dateFormat)},...columnRegistry.getAll().map(column=>({...column.euiColumn,sortable:false,"data-test-subj":"savedObjectsTableColumn-".concat(column.id)})),{name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActionsName",{defaultMessage:"Actions"}),width:"80px",actions:[{name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect",onClick:object=>goInspectObject(object),available:object=>!!object.meta.editUrl,"data-test-subj":"savedObjectsTableAction-inspect"},{name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.viewRelationshipsActionName",{defaultMessage:"Relationships"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.columnActions.viewRelationshipsActionDescription",{defaultMessage:"View the relationships this saved object has to other saved objects"}),type:"icon",icon:"kqlSelector",onClick:object=>onShowRelationships(object),"data-test-subj":"savedObjectsTableAction-relationships"},...actionRegistry.getAll().map(action=>({...action.euiAction,"data-test-subj":"savedObjectsTableAction-".concat(action.id),onClick:object=>{this.setState({activeAction:action});action.registerOnFinishCallback(()=>{this.setState({activeAction:undefined});const{refreshOnFinish:refreshOnFinish=(()=>false)}=action;if(refreshOnFinish()){onActionRefresh(object)}});if(action.euiAction.onClick){action.euiAction.onClick(object)}}}))]}];let queryParseError;if(!this.state.isSearchTextValid){const parseErrorMsg=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.searchBar.unableToParseQueryErrorMessage",{defaultMessage:"Unable to parse query"});queryParseError=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormErrorText"],null,"".concat(parseErrorMsg,". ").concat(this.state.parseErrorMessage))}const button=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{iconType:"arrowDown",iconSide:"right",onClick:this.toggleExportPopoverVisibility,isDisabled:selectedSavedObjects.length===0},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.exportPopoverButtonLabel",defaultMessage:"Export"}));const activeActionContents=(_this$state$activeAct=(_this$state$activeAct2=this.state.activeAction)===null||_this$state$activeAct2===void 0?void 0:_this$state$activeAct2.render())!==null&&_this$state$activeAct!==void 0?_this$state$activeAct:null;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,activeActionContents,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSearchBar"],{box:{"data-test-subj":"savedObjectSearchBar"},filters:filters,onChange:this.onChange,toolsRight:[external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{key:"deleteSO",iconType:"trash",color:"danger",onClick:onDelete,isDisabled:selectedSavedObjects.length===0||!this.props.canDelete,title:this.props.canDelete?undefined:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.deleteButtonTitle",{defaultMessage:"Unable to delete saved objects"}),"data-test-subj":"savedObjectsManagementDelete"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.deleteButtonLabel",defaultMessage:"Delete"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{key:"exportSOOptions",button:button,isOpen:this.state.isExportPopoverOpen,closePopover:this.closeExportPopover},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.exportOptionsLabel",defaultMessage:"Options"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{name:"includeReferencesDeep",label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:this.state.isIncludeReferencesDeepChecked,onChange:this.toggleIsIncludeReferencesDeepChecked})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{key:"exportSO",iconType:"exportAction",onClick:this.onExportClick,fill:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.table.exportButtonLabel",defaultMessage:"Export"}))))]}),queryParseError,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement("div",{"data-test-subj":"savedObjectsTable"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBasicTable"],{loading:isSearching,itemId:itemId,items:items,columns:columns,pagination:pagination,selection:selection,onChange:onTableChange,rowProps:item=>({"data-test-subj":"savedObjectsTableRow row-".concat(item.id)})})))}}var resolve_saved_objects=__webpack_require__(2);const OverwriteModal=_ref=>{let{conflict:conflict,onFinish:onFinish}=_ref;const{obj:obj,error:error}=conflict;let initialDestinationId;let selectControl=null;if(error.type==="conflict"){initialDestinationId=error.destinationId}else{initialDestinationId=error.destinations[0].id}const[destinationId,setDestinationId]=Object(external_osdSharedDeps_React_["useState"])(initialDestinationId);if(error.type==="ambiguous_conflict"){const selectProps={options:error.destinations.map(destination=>{var _destination$title;const header=(_destination$title=destination.title)!==null&&_destination$title!==void 0?_destination$title:"".concat(type," [id=").concat(destination.id,"]");const lastUpdated=destination.updatedAt?external_osdSharedDeps_Moment_default()(destination.updatedAt).fromNow():"never";const idText="ID: ".concat(destination.id);const lastUpdatedText="Last updated: ".concat(lastUpdated);return{value:destination.id,inputDisplay:destination.id,dropdownDisplay:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement("strong",null,header),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s",color:"subdued"},external_osdSharedDeps_React_default.a.createElement("p",{className:"euiTextColor--subdued"},idText,external_osdSharedDeps_React_default.a.createElement("br",null),lastUpdatedText)))}}),onChange:value=>{setDestinationId(value)}};selectControl=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSuperSelect"],{options:selectProps.options,valueOfSelected:destinationId,onChange:selectProps.onChange,prepend:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.selectControlLabel",{defaultMessage:"Object ID"}),hasDividers:true,fullWidth:true,compressed:true})}const{type:type,meta:meta}=obj;const title=meta.title||Object(lib["getDefaultTitle"])(obj);const bodyText=error.type==="conflict"?external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.body.conflict",{defaultMessage:'"{title}" conflicts with an existing object. Overwrite it?',values:{title:title}}):external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.body.ambiguousConflict",{defaultMessage:'"{title}" conflicts with multiple existing objects. Overwrite one?',values:{title:title}});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.title",{defaultMessage:"Overwrite {type}?",values:{type:type}}),cancelButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.cancelButtonText",{defaultMessage:"Skip"}),confirmButtonText:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.overwriteModal.overwriteButtonText",{defaultMessage:"Overwrite"}),buttonColor:"danger",onCancel:()=>onFinish(false),onConfirm:()=>onFinish(true,destinationId),defaultFocusedButton:external_osdSharedDeps_ElasticEui_["EUI_MODAL_CONFIRM_BUTTON"],maxWidth:"500px"},external_osdSharedDeps_React_default.a.createElement("p",null,bodyText),selectControl)};const createNewCopiesDisabled={id:"createNewCopiesDisabled",text:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.disabledTitle",{defaultMessage:"Check for existing objects"}),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.disabledText",{defaultMessage:"Check if objects were previously copied or imported."})};const createNewCopiesEnabled={id:"createNewCopiesEnabled",text:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.enabledTitle",{defaultMessage:"Create new objects with random IDs"}),tooltip:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.createNewCopies.enabledText",{defaultMessage:"Use this option to create one or more copies of the object."})};const overwriteEnabled={id:"overwriteEnabled",label:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.overwrite.enabledLabel",{defaultMessage:"Automatically overwrite conflicts"})};const overwriteDisabled={id:"overwriteDisabled",label:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.overwrite.disabledLabel",{defaultMessage:"Request action on conflict"})};const importOptionsTitle=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importModeControl.importOptionsTitle",{defaultMessage:"Import options"});const createLabel=_ref=>{let{text:text,tooltip:tooltip}=_ref;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,text)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{content:tooltip,position:"left",type:"iInCircle"})))};const ImportModeControl=_ref2=>{let{initialValues:initialValues,isLegacyFile:isLegacyFile,updateSelection:updateSelection}=_ref2;const[createNewCopies,setCreateNewCopies]=Object(external_osdSharedDeps_React_["useState"])(initialValues.createNewCopies);const[overwrite,setOverwrite]=Object(external_osdSharedDeps_React_["useState"])(initialValues.overwrite);const onChange=partial=>{if(partial.createNewCopies!==undefined){setCreateNewCopies(partial.createNewCopies)}else if(partial.overwrite!==undefined){setOverwrite(partial.overwrite)}updateSelection({createNewCopies:createNewCopies,overwrite:overwrite,...partial})};const overwriteRadio=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiRadioGroup"],{options:[overwriteEnabled,overwriteDisabled],idSelected:overwrite?overwriteEnabled.id:overwriteDisabled.id,onChange:id=>onChange({overwrite:id===overwriteEnabled.id}),disabled:createNewCopies,"data-test-subj":"savedObjectsManagement-importModeControl-overwriteRadioGroup"});if(isLegacyFile){return overwriteRadio}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormFieldset"],{legend:{children:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("span",null,importOptionsTitle))}},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesDisabled.id,label:createLabel(createNewCopiesDisabled),checked:!createNewCopies,onChange:()=>onChange({createNewCopies:false})},overwriteRadio),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCheckableCard"],{id:createNewCopiesEnabled.id,label:createLabel(createNewCopiesEnabled),checked:createNewCopies,onChange:()=>onChange({createNewCopies:true})}))};var import_summary=__webpack_require__(86);const DEFAULT_ICON="apps";const unsupportedTypeErrorMessage=external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.importSummary.unsupportedTypeError",{defaultMessage:"Unsupported object type"});const getErrorMessage=_ref=>{let{error:error}=_ref;if(error.type==="unknown"){return error.message}else if(error.type==="unsupported_type"){return unsupportedTypeErrorMessage}};const mapFailedImport=failure=>{const{obj:obj}=failure;const{type:type,id:id,meta:meta}=obj;const title=meta.title||Object(lib["getDefaultTitle"])(obj);const icon=meta.icon||DEFAULT_ICON;const errorMessage=getErrorMessage(failure);return{type:type,id:id,title:title,icon:icon,outcome:"error",errorMessage:errorMessage}};const mapImportSuccess=obj=>{const{type:type,id:id,meta:meta,overwrite:overwrite}=obj;const title=meta.title||Object(lib["getDefaultTitle"])(obj);const icon=meta.icon||DEFAULT_ICON;const outcome=overwrite?"overwritten":"created";return{type:type,id:id,title:title,icon:icon,outcome:outcome}};const getCountIndicators=importItems=>{if(!importItems.length){return null}const outcomeCounts=importItems.reduce((acc,_ref2)=>{var _acc$get;let{outcome:outcome}=_ref2;return acc.set(outcome,((_acc$get=acc.get(outcome))!==null&&_acc$get!==void 0?_acc$get:0)+1)},new Map);const createdCount=outcomeCounts.get("created");const overwrittenCount=outcomeCounts.get("overwritten");const errorCount=outcomeCounts.get("error");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,createdCount&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__createdCount"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.createdCountHeader",defaultMessage:"{createdCount} new",values:{createdCount:createdCount}})))),overwrittenCount&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__overwrittenCount"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.overwrittenCountHeader",defaultMessage:"{overwrittenCount} overwritten",values:{overwrittenCount:overwrittenCount}})))),errorCount&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement("h4",{className:"savedObjectsManagementImportSummary__errorCount"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.errorCountHeader",defaultMessage:"{errorCount} error",values:{errorCount:errorCount}})))))};const getStatusIndicator=_ref3=>{let{outcome:outcome,errorMessage:errorMessage="Error"}=_ref3;switch(outcome){case"created":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{type:"checkInCircleFilled",color:"success",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.importSummary.createdOutcomeLabel",{defaultMessage:"Created"})});case"overwritten":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{type:"check",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.importSummary.overwrittenOutcomeLabel",{defaultMessage:"Overwritten"})});case"error":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"danger",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.importSummary.errorOutcomeLabel",{defaultMessage:"{errorMessage}",values:{errorMessage:errorMessage}})})}};const ImportSummary=_ref4=>{let{failedImports:failedImports,successfulImports:successfulImports}=_ref4;const importItems=external_osdSharedDeps_Lodash_default.a.sortBy([...failedImports.map(x=>mapFailedImport(x)),...successfulImports.map(x=>mapImportSuccess(x))],["type","title"]);return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"s","data-test-subj":importItems.length?"importSavedObjectsSuccess":"importSavedObjectsSuccessNoneImported"},external_osdSharedDeps_React_default.a.createElement("h3",null,importItems.length===1?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.headerLabelSingular",defaultMessage:"1 object imported"}):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.importSummary.headerLabelPlural",defaultMessage:"{importCount} objects imported",values:{importCount:importItems.length}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),getCountIndicators(importItems),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiHorizontalRule"],null),importItems.map((item,index)=>{const{type:type,title:title,icon:icon}=item;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,key:index,alignItems:"center",gutterSize:"s",className:"savedObjectsManagementImportSummary__row"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:icon,size:"s"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{className:"savedObjectsManagementImportSummary__title"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_osdSharedDeps_React_default.a.createElement("p",{className:"eui-textTruncate",title:title},title))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement("div",{className:"eui-textRight"},getStatusIndicator(item))))}))};function flyout_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const CREATE_NEW_COPIES_DEFAULT=false;const OVERWRITE_ALL_DEFAULT=true;const flyout_getErrorMessage=e=>{var _e$body,_e$body2;const errorMessage=(_e$body=e.body)!==null&&_e$body!==void 0&&_e$body.error&&(_e$body2=e.body)!==null&&_e$body2!==void 0&&_e$body2.message?"".concat(e.body.error,": ").concat(e.body.message):e.message;return external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFileErrorMessage",{defaultMessage:'The file could not be processed due to error: "{error}"',values:{error:errorMessage}})};class flyout_Flyout extends external_osdSharedDeps_React_["Component"]{constructor(props){super(props);flyout_defineProperty(this,"fetchIndexPatterns",async()=>{var _await$this$props$ind;const indexPatterns=(_await$this$props$ind=await this.props.indexPatterns.getCache())===null||_await$this$props$ind===void 0?void 0:_await$this$props$ind.map(savedObject=>({id:savedObject.id,title:savedObject.attributes.title}));this.setState({indexPatterns:indexPatterns})});flyout_defineProperty(this,"changeImportMode",importMode=>{this.setState(()=>({importMode:importMode}))});flyout_defineProperty(this,"setImportFile",files=>{if(!files||!files[0]){this.setState({file:undefined,isLegacyFile:false});return}const file=files[0];this.setState({file:file,isLegacyFile:/\.json$/i.test(file.name)||file.type==="application/json"})});flyout_defineProperty(this,"import",async()=>{const{http:http}=this.props;const{file:file,importMode:importMode}=this.state;this.setState({status:"loading",error:undefined});try{const response=await Object(lib["importFile"])(http,file,importMode);this.setState(Object(lib["processImportResponse"])(response),()=>{var _this$state$unmatched;if(((_this$state$unmatched=this.state.unmatchedReferences)===null||_this$state$unmatched===void 0?void 0:_this$state$unmatched.length)===0){this.resolveImportErrors()}})}catch(e){this.setState({status:"error",error:flyout_getErrorMessage(e)});return}});flyout_defineProperty(this,"getConflictResolutions",async failures=>{const resolutions={};for(const conflict of failures){const[overwrite,destinationId]=await new Promise(done=>{this.setState({conflictingRecord:{conflict:conflict,done:done}})});if(overwrite){const{type:type,id:id}=conflict.obj;resolutions["".concat(type,":").concat(id)]={retry:true,options:{overwrite:true,...destinationId&&{destinationId:destinationId}}}}this.setState({conflictingRecord:undefined})}return resolutions});flyout_defineProperty(this,"resolveImportErrors",async()=>{this.setState({error:undefined,status:"loading",loadingMessage:undefined});try{const updatedState=await Object(lib["resolveImportErrors"])({http:this.props.http,state:this.state,getConflictResolutions:this.getConflictResolutions});this.setState(updatedState)}catch(e){this.setState({status:"error",error:flyout_getErrorMessage(e)})}});flyout_defineProperty(this,"legacyImport",async()=>{const{serviceRegistry:serviceRegistry,indexPatterns:indexPatterns,overlays:overlays,http:http,allowedTypes:allowedTypes}=this.props;const{file:file,importMode:importMode}=this.state;this.setState({status:"loading",error:undefined});Object(lib["logLegacyImport"])(http);let contents;try{contents=await Object(lib["importLegacyFile"])(file)}catch(e){this.setState({status:"error",error:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importLegacyFileErrorMessage",{defaultMessage:"The file could not be processed."})});return}if(!Array.isArray(contents)){this.setState({status:"error",error:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.invalidFormatOfImportedFileErrorMessage",{defaultMessage:"Saved objects file format is invalid and cannot be imported."})});return}contents=contents.filter(content=>allowedTypes.includes(content._type)).map(doc=>({...doc,_migrationVersion:doc._migrationVersion||{}}));const{conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,importedObjectCount:importedObjectCount,failedImports:failedImports}=await Object(resolve_saved_objects["b"])(contents,importMode.overwrite,serviceRegistry.all().map(e=>e.service),indexPatterns,overlays.openConfirm);const byId={};conflictedIndexPatterns.map(_ref=>{let{doc:doc,obj:obj}=_ref;return{doc:doc,obj:obj._serialize()}}).forEach(_ref2=>{let{doc:doc,obj:obj}=_ref2;return obj.references.forEach(ref=>{byId[ref.id]=byId[ref.id]!=null?byId[ref.id].concat({doc:doc,obj:obj}):[{doc:doc,obj:obj}]})});const unmatchedReferences=Object.entries(byId).reduce((accum,_ref3)=>{let[existingIndexPatternId,list]=_ref3;accum.push({existingIndexPatternId:existingIndexPatternId,newIndexPatternId:undefined,list:list.map(_ref4=>{let{doc:doc}=_ref4;return{id:existingIndexPatternId,type:doc._type,title:doc._source.title}})});return accum},[]);this.setState({conflictedIndexPatterns:conflictedIndexPatterns,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports,unmatchedReferences:unmatchedReferences,importCount:importedObjectCount,status:unmatchedReferences.length===0?"success":"idle"})});flyout_defineProperty(this,"confirmLegacyImport",async()=>{const{conflictedIndexPatterns:conflictedIndexPatterns,importMode:importMode,conflictedSavedObjectsLinkedToSavedSearches:conflictedSavedObjectsLinkedToSavedSearches,conflictedSearchDocs:conflictedSearchDocs,failedImports:failedImports}=this.state;const{serviceRegistry:serviceRegistry,indexPatterns:indexPatterns,search:search}=this.props;this.setState({error:undefined,status:"loading",loadingMessage:undefined});let importCount=this.state.importCount;if(this.hasUnmatchedReferences){try{const resolutions=this.resolutions;this.setState({loadingMessage:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.resolvingConflictsLoadingMessage",{defaultMessage:"Resolving conflicts"})});if(resolutions.length){importCount+=await Object(resolve_saved_objects["a"])(resolutions,conflictedIndexPatterns,importMode.overwrite,{indexPatterns:indexPatterns,search:search})}this.setState({loadingMessage:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.savingConflictsLoadingMessage",{defaultMessage:"Saving conflicts"})});importCount+=await Object(resolve_saved_objects["e"])(conflictedSavedObjectsLinkedToSavedSearches,importMode.overwrite);this.setState({loadingMessage:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.savedSearchAreLinkedProperlyLoadingMessage",{defaultMessage:"Ensure saved searches are linked properly"})});importCount+=await Object(resolve_saved_objects["c"])(conflictedSearchDocs,serviceRegistry.all().map(e=>e.service),indexPatterns,importMode.overwrite);this.setState({loadingMessage:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.confirmLegacyImport.retryingFailedObjectsLoadingMessage",{defaultMessage:"Retrying failed objects"})});importCount+=await Object(resolve_saved_objects["e"])(failedImports.map(_ref5=>{let{obj:obj}=_ref5;return obj}),importMode.overwrite)}catch(e){this.setState({status:"error",error:flyout_getErrorMessage(e),loadingMessage:undefined});return}}this.setState({status:"success",importCount:importCount})});flyout_defineProperty(this,"onIndexChanged",(id,e)=>{const value=e.target.value;this.setState(state=>{var _state$unmatchedRefer;const conflictIndex=(_state$unmatchedRefer=state.unmatchedReferences)===null||_state$unmatchedRefer===void 0?void 0:_state$unmatchedRefer.findIndex(conflict=>conflict.existingIndexPatternId===id);if(conflictIndex===undefined||conflictIndex===-1){return state}return{unmatchedReferences:[...state.unmatchedReferences.slice(0,conflictIndex),{...state.unmatchedReferences[conflictIndex],newIndexPatternId:value},...state.unmatchedReferences.slice(conflictIndex+1)]}})});this.state={conflictedIndexPatterns:undefined,conflictedSavedObjectsLinkedToSavedSearches:undefined,conflictedSearchDocs:undefined,unmatchedReferences:undefined,conflictingRecord:undefined,error:undefined,file:undefined,importCount:0,indexPatterns:undefined,importMode:{createNewCopies:CREATE_NEW_COPIES_DEFAULT,overwrite:OVERWRITE_ALL_DEFAULT},loadingMessage:undefined,isLegacyFile:false,status:"idle"}}componentDidMount(){this.fetchIndexPatterns()}get hasUnmatchedReferences(){return this.state.unmatchedReferences&&this.state.unmatchedReferences.length>0}get resolutions(){return this.state.unmatchedReferences.reduce((accum,_ref6)=>{let{existingIndexPatternId:existingIndexPatternId,newIndexPatternId:newIndexPatternId}=_ref6;if(newIndexPatternId){accum.push({oldId:existingIndexPatternId,newId:newIndexPatternId})}return accum},[])}renderUnmatchedReferences(){const{unmatchedReferences:unmatchedReferences}=this.state;if(!unmatchedReferences){return null}const columns=[{field:"existingIndexPatternId",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnIdName",{defaultMessage:"ID"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnIdDescription",{defaultMessage:"ID of the index pattern"}),sortable:true},{field:"list",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnCountName",{defaultMessage:"Count"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnCountDescription",{defaultMessage:"How many affected objects"}),render:list=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,list.length)},{field:"list",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsName",{defaultMessage:"Sample of affected objects"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnSampleOfAffectedObjectsDescription",{defaultMessage:"Sample of affected objects"}),render:list=>external_osdSharedDeps_React_default.a.createElement("ul",{style:{listStyle:"none"}},Object(external_osdSharedDeps_Lodash_["take"])(list,3).map((obj,key)=>external_osdSharedDeps_React_default.a.createElement("li",{key:key},obj.title)))},{field:"existingIndexPatternId",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.renderConflicts.columnNewIndexPatternName",{defaultMessage:"New index pattern"}),render:id=>{const options=this.state.indexPatterns.map(indexPattern=>({text:indexPattern.title,value:indexPattern.id,"data-test-subj":"indexPatternOption-".concat(indexPattern.title)}));options.unshift({text:"-- Skip Import --",value:""});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{"data-test-subj":"managementChangeIndexSelection-".concat(id),onChange:e=>this.onIndexChanged(id,e),options:options})}}];const pagination={pageSizeOptions:[5,10,25]};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:unmatchedReferences,columns:columns,pagination:pagination})}renderError(){const{error:error,status:status}=this.state;if(status!=="error"){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.errorCalloutTitle",defaultMessage:"Sorry, there was an error"}),color:"danger"},external_osdSharedDeps_React_default.a.createElement("p",{"data-test-subj":"importSavedObjectsErrorText"},error)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}renderBody(){const{status:status,loadingMessage:loadingMessage,importCount:importCount,failedImports:failedImports=[],successfulImports:successfulImports=[],isLegacyFile:isLegacyFile,importMode:importMode}=this.state;if(status==="loading"){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceAround"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],null,external_osdSharedDeps_React_default.a.createElement("p",null,loadingMessage))))}if(isLegacyFile===false&&status==="success"){return external_osdSharedDeps_React_default.a.createElement(ImportSummary,{failedImports:failedImports,successfulImports:successfulImports})}if(failedImports.length&&!this.hasUnmatchedReferences){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsFailedWarning",title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importFailedTitle",defaultMessage:"Import failed"}),color:"warning",iconType:"help"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importFailedDescription",defaultMessage:"Failed to import {failedImportCount} of {totalImportCount} objects. Import failed",values:{failedImportCount:failedImports.length,totalImportCount:importCount+failedImports.length}})),external_osdSharedDeps_React_default.a.createElement("p",null,failedImports.map(_ref7=>{var _message;let{error:error,obj:obj}=_ref7;if(error.type==="missing_references"){return error.references.map(reference=>external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFailedMissingReference",{defaultMessage:"{type} [id={id}] could not locate {refType} [id={refId}]",values:{id:obj.id,type:obj.type,refId:reference.id,refType:reference.type}}))}else if(error.type==="unsupported_type"){return external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.flyout.importFailedUnsupportedType",{defaultMessage:"{type} [id={id}] unsupported type",values:{id:obj.id,type:obj.type}})}return Object(external_osdSharedDeps_Lodash_["get"])(error,"body.message",(_message=error.message)!==null&&_message!==void 0?_message:"")}).join(" ")))}if(status==="success"){if(importCount===0){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsSuccessNoneImported",title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulCallout.noObjectsImportedTitle",defaultMessage:"No objects imported"}),color:"primary"})}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsSuccess",title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulTitle",defaultMessage:"Import successful"}),color:"success",iconType:"check"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessfulDescription",defaultMessage:"Successfully imported {importCount} objects.",values:{importCount:importCount}})))}if(this.hasUnmatchedReferences){return this.renderUnmatchedReferences()}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.selectFileToImportFormRowLabel",defaultMessage:"Select a file to import"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilePicker"],{accept:".ndjson, .json",fullWidth:true,initialPromptText:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importPromptText",defaultMessage:"Import"}),onChange:this.setImportFile})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true},external_osdSharedDeps_React_default.a.createElement(ImportModeControl,{initialValues:importMode,isLegacyFile:isLegacyFile,updateSelection:newValues=>this.changeImportMode(newValues)})))}renderFooter(){const{isLegacyFile:isLegacyFile,status:status}=this.state;const{done:done,close:close}=this.props;let confirmButton;if(status==="success"){confirmButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:done,size:"s",fill:true,"data-test-subj":"importSavedObjectsDoneBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessful.confirmButtonLabel",defaultMessage:"Done"}))}else if(this.hasUnmatchedReferences){confirmButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:isLegacyFile?this.confirmLegacyImport:this.resolveImportErrors,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsConfirmBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSuccessful.confirmAllChangesButtonLabel",defaultMessage:"Confirm all changes"}))}else{confirmButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:isLegacyFile?this.legacyImport:this.import,size:"s",fill:true,isLoading:status==="loading","data-test-subj":"importSavedObjectsImportBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.import.confirmButtonLabel",defaultMessage:"Import"}))}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:close,size:"s",disabled:status==="loading"||isLegacyFile===false&&status==="success","data-test-subj":"importSavedObjectsCancelBtn"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.import.cancelButtonLabel",defaultMessage:"Cancel"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},confirmButton))}renderSubheader(){if(this.state.status==="loading"||this.state.status==="success"){return null}let legacyFileWarning;if(this.state.isLegacyFile){legacyFileWarning=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsLegacyWarning",title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.legacyFileUsedTitle",defaultMessage:"Support for JSON files is going away"}),color:"warning",iconType:"help"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.legacyFileUsedBody",defaultMessage:"Use our updated export to generate NDJSON files, and you'll be all set."}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}))}let indexPatternConflictsWarning;if(this.hasUnmatchedReferences){indexPatternConflictsWarning=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{"data-test-subj":"importSavedObjectsConflictsWarning",title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsTitle",defaultMessage:"Index Pattern Conflicts"}),color:"warning",iconType:"help"},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsDescription",defaultMessage:"The following saved objects use index patterns that do not exist. Please select the index patterns you'd like re-associated with them. You can {indexPatternLink} if necessary.",values:{indexPatternLink:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:this.props.newIndexPatternUrl},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.indexPatternConflictsCalloutLinkText",defaultMessage:"create a new index pattern"}))}})))}if(!legacyFileWarning&&!indexPatternConflictsWarning){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,legacyFileWarning&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),legacyFileWarning,indexPatternConflictsWarning&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),indexPatternConflictsWarning)}render(){const{close:close}=this.props;let confirmOverwriteModal;const{conflictingRecord:conflictingRecord}=this.state;if(conflictingRecord){const{conflict:conflict}=conflictingRecord;const onFinish=(overwrite,destinationId)=>conflictingRecord.done([overwrite,destinationId]);confirmOverwriteModal=external_osdSharedDeps_React_default.a.createElement(OverwriteModal,{conflict:conflict,onFinish:onFinish})}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyout"],{onClose:close,size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"m"},external_osdSharedDeps_React_default.a.createElement("h2",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.flyout.importSavedObjectTitle",defaultMessage:"Import saved objects"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyoutBody"],null,this.renderSubheader(),this.renderError(),this.renderBody()),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyoutFooter"],null,this.renderFooter()),confirmOverwriteModal)}}class relationships_Relationships extends external_osdSharedDeps_React_["Component"]{constructor(props){super(props);this.state={relationships:[],isLoading:false,error:undefined}}UNSAFE_componentWillMount(){this.getRelationshipData()}UNSAFE_componentWillReceiveProps(nextProps){if(nextProps.savedObject.id!==this.props.savedObject.id){this.getRelationshipData()}}async getRelationshipData(){const{savedObject:savedObject,getRelationships:getRelationships}=this.props;this.setState({isLoading:true});try{const relationships=await getRelationships(savedObject.type,savedObject.id);this.setState({relationships:relationships,isLoading:false,error:undefined})}catch(err){this.setState({error:err.message,isLoading:false})}}renderError(){const{error:error}=this.state;if(!error){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],{title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.renderErrorMessage",defaultMessage:"Error"}),color:"danger"},external_osdSharedDeps_React_default.a.createElement("p",null,error))}renderRelationships(){const{goInspectObject:goInspectObject,savedObject:savedObject,basePath:basePath}=this.props;const{relationships:relationships,isLoading:isLoading,error:error}=this.state;if(error){return this.renderError()}if(isLoading){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"})}const columns=[{field:"type",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTypeName",{defaultMessage:"Type"}),width:"50px",align:"center",description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTypeDescription",{defaultMessage:"Type of the saved object"}),sortable:false,render:(type,object)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{"aria-label":Object(lib["getSavedObjectLabel"])(type),type:object.meta.icon||"apps",size:"s","data-test-subj":"relationshipsObjectType"}))},{field:"relationship",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnRelationshipName",{defaultMessage:"Direct relationship"}),dataType:"string",sortable:false,width:"125px","data-test-subj":"directRelationship",render:relationship=>{if(relationship==="parent"){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.columnRelationship.parentAsValue",defaultMessage:"Parent"}))}if(relationship==="child"){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.relationships.columnRelationship.childAsValue",defaultMessage:"Child"}))}}},{field:"meta.title",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTitleName",{defaultMessage:"Title"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnTitleDescription",{defaultMessage:"Title of the saved object"}),dataType:"string",sortable:false,render:(title,object)=>{const{path:path=""}=object.meta.inAppUrl||{};const canGoInApp=this.props.canGoInApp(object);if(!canGoInApp){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"s","data-test-subj":"relationshipsTitle"},title||Object(lib["getDefaultTitle"])(object))}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{href:basePath.prepend(path),"data-test-subj":"relationshipsTitle"},title||Object(lib["getDefaultTitle"])(object))}},{name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActionsName",{defaultMessage:"Actions"}),actions:[{name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActions.inspectActionName",{defaultMessage:"Inspect"}),description:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.columnActions.inspectActionDescription",{defaultMessage:"Inspect this saved object"}),type:"icon",icon:"inspect","data-test-subj":"relationshipsTableAction-inspect",onClick:object=>goInspectObject(object),available:object=>!!object.meta.editUrl}]}];const filterTypesMap=new Map(relationships.map(relationship=>[relationship.type,{value:relationship.type,name:relationship.type,view:relationship.type}]));const search={filters:[{type:"field_value_selection",field:"relationship",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.name",{defaultMessage:"Direct relationship"}),multiSelect:"or",options:[{value:"parent",name:"parent",view:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.parentAsValue.view",{defaultMessage:"Parent"})},{value:"child",name:"child",view:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.relationship.childAsValue.view",{defaultMessage:"Child"})}]},{type:"field_value_selection",field:"type",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.search.filters.type.name",{defaultMessage:"Type"}),multiSelect:"or",options:[...filterTypesMap.values()]}]};return external_osdSharedDeps_React_default.a.createElement("div",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCallOut"],null,external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.relationships.relationshipsTitle",{defaultMessage:"Here are the saved objects related to {title}. "+"Deleting this {type} affects its parent objects, but not its children.",values:{type:savedObject.type,title:savedObject.meta.title||Object(lib["getDefaultTitle"])(savedObject)}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],null),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:relationships,columns:columns,pagination:true,search:search,rowProps:()=>({"data-test-subj":"relationshipsTableRow"})}))}render(){const{close:close,savedObject:savedObject}=this.props;return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyout"],{onClose:close},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyoutHeader"],{hasBorder:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"m",className:"eui-textBreakWord"},external_osdSharedDeps_React_default.a.createElement("h2",null,savedObject.meta.title||Object(lib["getDefaultTitle"])(savedObject)))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlyoutBody"],null,this.renderRelationships()))}}function saved_objects_table_defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}class saved_objects_table_SavedObjectsTable extends external_osdSharedDeps_React_["Component"]{constructor(props){super(props);saved_objects_table_defineProperty(this,"_isMounted",false);saved_objects_table_defineProperty(this,"fetchCounts",async()=>{var _namespaceRegistry$ge;const{allowedTypes:allowedTypes,namespaceRegistry:namespaceRegistry}=this.props;const{queryText:queryText,visibleTypes:visibleTypes,visibleNamespaces:visibleNamespaces}=Object(lib["parseQuery"])(this.state.activeQuery);const filteredTypes=Object(lib["filterQuery"])(allowedTypes,visibleTypes);const availableNamespaces=((_namespaceRegistry$ge=namespaceRegistry.getAll())===null||_namespaceRegistry$ge===void 0?void 0:_namespaceRegistry$ge.map(ns=>ns.id))||[];const filteredCountOptions={typesToInclude:filteredTypes,searchString:queryText};if(availableNamespaces.length){const filteredNamespaces=Object(lib["filterQuery"])(availableNamespaces,visibleNamespaces);filteredCountOptions.namespacesToInclude=filteredNamespaces}const filteredSavedObjectCounts=await Object(lib["getSavedObjectCounts"])(this.props.http,filteredCountOptions);const exportAllOptions=[];const exportAllSelectedOptions={};const filteredTypeCounts=filteredSavedObjectCounts.type||{};Object.keys(filteredTypeCounts).forEach(id=>{exportAllOptions.push({id:id,label:"".concat(id," (").concat(filteredTypeCounts[id]||0,")")});exportAllSelectedOptions[id]=true});const countOptions={typesToInclude:allowedTypes,searchString:queryText};if(availableNamespaces.length){countOptions.namespacesToInclude=availableNamespaces}const savedObjectCounts=await Object(lib["getSavedObjectCounts"])(this.props.http,countOptions);this.setState(state=>({...state,savedObjectCounts:savedObjectCounts,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions}))});saved_objects_table_defineProperty(this,"fetchSavedObjects",()=>{this.setState({isSearching:true},this.debouncedFetchObjects)});saved_objects_table_defineProperty(this,"fetchSavedObject",(type,id)=>{this.setState({isSearching:true},()=>this.debouncedFetchObject(type,id))});saved_objects_table_defineProperty(this,"debouncedFetchObjects",Object(external_osdSharedDeps_Lodash_["debounce"])(async()=>{var _namespaceRegistry$ge2;const{activeQuery:query,page:page,perPage:perPage}=this.state;const{notifications:notifications,http:http,allowedTypes:allowedTypes,namespaceRegistry:namespaceRegistry}=this.props;const{queryText:queryText,visibleTypes:visibleTypes,visibleNamespaces:visibleNamespaces}=Object(lib["parseQuery"])(query);const filteredTypes=Object(lib["filterQuery"])(allowedTypes,visibleTypes);const findOptions={search:queryText?"".concat(queryText,"*"):undefined,perPage:perPage,page:page+1,fields:["id"],type:filteredTypes};const availableNamespaces=((_namespaceRegistry$ge2=namespaceRegistry.getAll())===null||_namespaceRegistry$ge2===void 0?void 0:_namespaceRegistry$ge2.map(ns=>ns.id))||[];if(availableNamespaces.length){const filteredNamespaces=Object(lib["filterQuery"])(availableNamespaces,visibleNamespaces);findOptions.namespaces=filteredNamespaces}if(findOptions.type.length>1){findOptions.sortField="type"}try{const resp=await Object(lib["findObjects"])(http,findOptions);if(!this._isMounted){return}this.setState(_ref=>{let{activeQuery:activeQuery}=_ref;if(activeQuery.text!==query.text){return null}return{savedObjects:resp.savedObjects,filteredItemCount:resp.total,isSearching:false}})}catch(error){if(this._isMounted){this.setState({isSearching:false})}notifications.toasts.addDanger({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.unableFindSavedObjectsNotificationMessage",{defaultMessage:"Unable find saved objects"}),text:"".concat(error)})}},300));saved_objects_table_defineProperty(this,"debouncedFetchObject",Object(external_osdSharedDeps_Lodash_["debounce"])(async(type,id)=>{const{notifications:notifications,http:http}=this.props;try{const resp=await Object(lib["findObject"])(http,type,id);if(!this._isMounted){return}this.setState(_ref2=>{let{savedObjects:savedObjects,filteredItemCount:filteredItemCount}=_ref2;const refreshedSavedObjects=savedObjects.map(object=>object.type===type&&object.id===id?resp:object);return{savedObjects:refreshedSavedObjects,filteredItemCount:filteredItemCount,isSearching:false}})}catch(error){if(this._isMounted){this.setState({isSearching:false})}notifications.toasts.addDanger({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.unableFindSavedObjectNotificationMessage",{defaultMessage:"Unable to find saved object"}),text:"".concat(error)})}},300));saved_objects_table_defineProperty(this,"refreshObjects",async()=>{await Promise.all([this.fetchSavedObjects(),this.fetchCounts()])});saved_objects_table_defineProperty(this,"refreshObject",async _ref3=>{let{type:type,id:id}=_ref3;await this.fetchSavedObject(type,id)});saved_objects_table_defineProperty(this,"onSelectionChanged",selection=>{this.setState({selectedSavedObjects:selection})});saved_objects_table_defineProperty(this,"onQueryChange",_ref4=>{let{query:query}=_ref4;this.setState({activeQuery:query,page:0,selectedSavedObjects:[]},()=>{this.fetchSavedObjects();this.fetchCounts()})});saved_objects_table_defineProperty(this,"onTableChange",async table=>{const{index:page,size:perPage}=table.page||{};this.setState({page:page,perPage:perPage,selectedSavedObjects:[]},this.fetchSavedObjects)});saved_objects_table_defineProperty(this,"onShowRelationships",object=>{this.setState({isShowingRelationships:true,relationshipObject:object})});saved_objects_table_defineProperty(this,"onHideRelationships",()=>{this.setState({isShowingRelationships:false,relationshipObject:undefined})});saved_objects_table_defineProperty(this,"onExport",async includeReferencesDeep=>{const{selectedSavedObjects:selectedSavedObjects}=this.state;const{notifications:notifications,http:http}=this.props;const objectsToExport=selectedSavedObjects.map(obj=>({id:obj.id,type:obj.type}));let blob;try{blob=await Object(lib["fetchExportObjects"])(http,objectsToExport,includeReferencesDeep)}catch(e){notifications.toasts.addDanger({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw e}Object(file_saver["saveAs"])(blob,"export.ndjson");const exportDetails=await Object(lib["extractExportDetails"])(blob);this.showExportSuccessMessage(exportDetails)});saved_objects_table_defineProperty(this,"onExportAll",async()=>{const{exportAllSelectedOptions:exportAllSelectedOptions,isIncludeReferencesDeepChecked:isIncludeReferencesDeepChecked,activeQuery:activeQuery}=this.state;const{notifications:notifications,http:http}=this.props;const{queryText:queryText}=Object(lib["parseQuery"])(activeQuery);const exportTypes=Object.entries(exportAllSelectedOptions).reduce((accum,_ref5)=>{let[id,selected]=_ref5;if(selected){accum.push(id)}return accum},[]);let blob;try{blob=await Object(lib["fetchExportByTypeAndSearch"])(http,exportTypes,queryText?"".concat(queryText,"*"):undefined,isIncludeReferencesDeepChecked)}catch(e){notifications.toasts.addDanger({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.dangerNotification",{defaultMessage:"Unable to generate export"})});throw e}Object(file_saver["saveAs"])(blob,"export.ndjson");const exportDetails=await Object(lib["extractExportDetails"])(blob);this.showExportSuccessMessage(exportDetails);this.setState({isShowingExportAllOptionsModal:false})});saved_objects_table_defineProperty(this,"showExportSuccessMessage",exportDetails=>{const{notifications:notifications}=this.props;if(exportDetails&&exportDetails.missingReferences.length>0){notifications.toasts.addWarning({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.successWithMissingRefsNotification",{defaultMessage:"Your file is downloading in the background. "+"Some related objects could not be found. "+"Please see the last line in the exported file for a list of missing objects."})})}else{notifications.toasts.addSuccess({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.export.successNotification",{defaultMessage:"Your file is downloading in the background"})})}});saved_objects_table_defineProperty(this,"finishImport",()=>{this.hideImportFlyout();this.fetchSavedObjects();this.fetchCounts()});saved_objects_table_defineProperty(this,"showImportFlyout",()=>{this.setState({isShowingImportFlyout:true})});saved_objects_table_defineProperty(this,"hideImportFlyout",()=>{this.setState({isShowingImportFlyout:false})});saved_objects_table_defineProperty(this,"onDelete",()=>{this.setState({isShowingDeleteConfirmModal:true})});saved_objects_table_defineProperty(this,"delete",async()=>{const{savedObjectsClient:savedObjectsClient}=this.props;const{selectedSavedObjects:selectedSavedObjects,isDeleting:isDeleting}=this.state;if(isDeleting){return}this.setState({isDeleting:true});const indexPatterns=selectedSavedObjects.filter(object=>object.type==="index-pattern");if(indexPatterns.length){await this.props.indexPatterns.clearCache()}const objects=await savedObjectsClient.bulkGet(selectedSavedObjects);const deletes=objects.savedObjects.map(object=>savedObjectsClient.delete(object.type,object.id,{force:true}));await Promise.all(deletes);this.setState({selectedSavedObjects:[]});await this.fetchSavedObjects();await this.fetchCounts();this.setState({isShowingDeleteConfirmModal:false,isDeleting:false})});saved_objects_table_defineProperty(this,"getRelationships",async(type,id)=>{const{allowedTypes:allowedTypes,http:http}=this.props;return await Object(lib["getRelationships"])(http,type,id,allowedTypes)});saved_objects_table_defineProperty(this,"changeIncludeReferencesDeep",()=>{this.setState(state=>({isIncludeReferencesDeepChecked:!state.isIncludeReferencesDeepChecked}))});saved_objects_table_defineProperty(this,"closeExportAllModal",()=>{this.setState({isShowingExportAllOptionsModal:false})});this.state={totalCount:0,page:0,perPage:props.perPageConfig||50,savedObjects:[],savedObjectCounts:props.allowedTypes.reduce((typeToCountMap,type)=>{typeToCountMap[type]=0;return typeToCountMap},{}),activeQuery:external_osdSharedDeps_ElasticEui_["Query"].parse(""),selectedSavedObjects:[],isShowingImportFlyout:false,isSearching:false,filteredItemCount:0,isShowingRelationships:false,relationshipObject:undefined,isShowingDeleteConfirmModal:false,isShowingExportAllOptionsModal:false,isDeleting:false,exportAllOptions:[],exportAllSelectedOptions:{},isIncludeReferencesDeepChecked:true}}componentDidMount(){this._isMounted=true;this.fetchSavedObjects();this.fetchCounts()}componentWillUnmount(){this._isMounted=false;this.debouncedFetchObjects.cancel()}renderFlyout(){if(!this.state.isShowingImportFlyout){return null}const{applications:applications}=this.props;const newIndexPatternUrl=applications.getUrlForApp("management",{path:"opensearch-dashboards/indexPatterns"});return external_osdSharedDeps_React_default.a.createElement(flyout_Flyout,{close:this.hideImportFlyout,done:this.finishImport,http:this.props.http,serviceRegistry:this.props.serviceRegistry,indexPatterns:this.props.indexPatterns,newIndexPatternUrl:newIndexPatternUrl,allowedTypes:this.props.allowedTypes,overlays:this.props.overlays,search:this.props.search})}renderRelationships(){if(!this.state.isShowingRelationships){return null}return external_osdSharedDeps_React_default.a.createElement(relationships_Relationships,{basePath:this.props.http.basePath,savedObject:this.state.relationshipObject,getRelationships:this.getRelationships,close:this.onHideRelationships,goInspectObject:this.props.goInspectObject,canGoInApp:this.props.canGoInApp})}renderDeleteConfirmModal(){const{isShowingDeleteConfirmModal:isShowingDeleteConfirmModal,isDeleting:isDeleting,selectedSavedObjects:selectedSavedObjects}=this.state;if(!isShowingDeleteConfirmModal){return null}let modal;if(isDeleting){modal=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOverlayMask"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLoadingSpinner"],{size:"xl"}))}else{const onCancel=()=>{this.setState({isShowingDeleteConfirmModal:false})};const onConfirm=()=>{this.delete()};modal=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiConfirmModal"],{title:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModalTitle",defaultMessage:"Delete saved objects"}),onCancel:onCancel,onConfirm:onConfirm,buttonColor:"danger",cancelButtonText:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}),confirmButtonText:isDeleting?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.deleteProcessButtonLabel",defaultMessage:"Deleting"}):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.deleteButtonLabel",defaultMessage:"Delete"}),defaultFocusedButton:external_osdSharedDeps_ElasticEui_["EUI_MODAL_CONFIRM_BUTTON"]},external_osdSharedDeps_React_default.a.createElement("p",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.deleteSavedObjectsConfirmModalDescription",defaultMessage:"This action will delete the following saved objects:"})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiInMemoryTable"],{items:selectedSavedObjects,columns:[{field:"type",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.typeColumnName",{defaultMessage:"Type"}),width:"50px",render:(type,object)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{position:"top",content:Object(lib["getSavedObjectLabel"])(type)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIcon"],{type:object.meta.icon||"apps"}))},{field:"id",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.idColumnName",{defaultMessage:"Id"})},{field:"meta.title",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.deleteSavedObjectsConfirmModal.titleColumnName",{defaultMessage:"Title"})}],pagination:true,sorting:false}))}return modal}renderExportAllOptionsModal(){const{isShowingExportAllOptionsModal:isShowingExportAllOptionsModal,filteredItemCount:filteredItemCount,exportAllOptions:exportAllOptions,exportAllSelectedOptions:exportAllSelectedOptions,isIncludeReferencesDeepChecked:isIncludeReferencesDeepChecked}=this.state;if(!isShowingExportAllOptionsModal){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModal"],{onClose:this.closeExportAllModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeader"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalHeaderTitle"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModalTitle",defaultMessage:"Export {filteredItemCount, plural, one{# object} other {# objects}}",values:{filteredItemCount:filteredItemCount}}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalBody"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModalDescription",defaultMessage:"Select which types to export"}),labelType:"legend"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCheckboxGroup"],{options:exportAllOptions,idToSelectedMap:exportAllSelectedOptions,onChange:optionId=>{const newExportAllSelectedOptions={...exportAllSelectedOptions,...{[optionId]:!exportAllSelectedOptions[optionId]}};this.setState({exportAllSelectedOptions:newExportAllSelectedOptions})}})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"m"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{name:"includeReferencesDeep",label:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.includeReferencesDeepLabel",defaultMessage:"Include related objects"}),checked:isIncludeReferencesDeepChecked,onChange:this.changeIncludeReferencesDeep})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiModalFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"flexEnd"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonEmpty"],{onClick:this.closeExportAllModal},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.cancelButtonLabel",defaultMessage:"Cancel"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{fill:true,onClick:this.onExportAll},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"savedObjectsManagement.objectsTable.exportObjectsConfirmModal.exportAllButtonLabel",defaultMessage:"Export all"}))))))))}render(){const{selectedSavedObjects:selectedSavedObjects,page:page,perPage:perPage,savedObjects:savedObjects,filteredItemCount:filteredItemCount,isSearching:isSearching,savedObjectCounts:savedObjectCounts}=this.state;const{http:http,allowedTypes:allowedTypes,applications:applications,namespaceRegistry:namespaceRegistry}=this.props;const selectionConfig={onSelectionChange:this.onSelectionChanged};const typeCounts=savedObjectCounts.type||{};const filterOptions=allowedTypes.map(type=>({value:type,name:type,view:"".concat(type," (").concat(typeCounts[type]||0,")")}));const filters=[{type:"field_value_selection",field:"type",name:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.typeFilterName",{defaultMessage:"Type"}),multiSelect:"or",options:filterOptions}];const availableNamespaces=namespaceRegistry.getAll()||[];if(availableNamespaces.length){const nsCounts=savedObjectCounts.namespaces||{};const nsFilterOptions=availableNamespaces.map(ns=>({name:ns.name,value:ns.id,view:"".concat(ns.name," (").concat(nsCounts[ns.id]||0,")")}));filters.push({type:"field_value_selection",field:"namespaces",name:namespaceRegistry.getAlias()||external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.objectsTable.table.namespaceFilterName",{defaultMessage:"Namespaces"}),multiSelect:"or",options:nsFilterOptions})}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPageContent"],{horizontalPosition:"center"},this.renderFlyout(),this.renderRelationships(),this.renderDeleteConfirmModal(),this.renderExportAllOptionsModal(),external_osdSharedDeps_React_default.a.createElement(Header,{onExportAll:()=>this.setState({isShowingExportAllOptionsModal:true}),onImport:this.showImportFlyout,onRefresh:this.refreshObjects,filteredCount:filteredItemCount}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_osdSharedDeps_React_default.a.createElement(public_["RedirectAppLinks"],{application:applications},external_osdSharedDeps_React_default.a.createElement(table_Table,{basePath:http.basePath,itemId:"id",actionRegistry:this.props.actionRegistry,columnRegistry:this.props.columnRegistry,selectionConfig:selectionConfig,selectedSavedObjects:selectedSavedObjects,onQueryChange:this.onQueryChange,onTableChange:this.onTableChange,filters:filters,onExport:this.onExport,canDelete:applications.capabilities.savedObjectsManagement.delete,onDelete:this.onDelete,onActionRefresh:this.refreshObject,goInspectObject:this.props.goInspectObject,pageIndex:page,pageSize:perPage,items:savedObjects,totalItemCount:filteredItemCount,isSearching:isSearching,onShowRelationships:this.onShowRelationships,canGoInApp:this.props.canGoInApp,dateFormat:this.props.dateFormat})))}}const SavedObjectsTablePage=_ref=>{let{coreStart:coreStart,dataStart:dataStart,allowedTypes:allowedTypes,serviceRegistry:serviceRegistry,actionRegistry:actionRegistry,columnRegistry:columnRegistry,namespaceRegistry:namespaceRegistry,setBreadcrumbs:setBreadcrumbs}=_ref;const capabilities=coreStart.application.capabilities;const itemsPerPage=coreStart.uiSettings.get("savedObjects:perPage",50);const dateFormat=coreStart.uiSettings.get("dateFormat");Object(external_osdSharedDeps_React_["useEffect"])(()=>{setBreadcrumbs([{text:external_osdSharedDeps_OsdI18n_["i18n"].translate("savedObjectsManagement.breadcrumb.index",{defaultMessage:"Saved objects"}),href:"/"}])},[setBreadcrumbs]);return external_osdSharedDeps_React_default.a.createElement(saved_objects_table_SavedObjectsTable,{allowedTypes:allowedTypes,serviceRegistry:serviceRegistry,actionRegistry:actionRegistry,columnRegistry:columnRegistry,namespaceRegistry:namespaceRegistry,savedObjectsClient:coreStart.savedObjects.client,indexPatterns:dataStart.indexPatterns,search:dataStart.search,http:coreStart.http,overlays:coreStart.overlays,notifications:coreStart.notifications,applications:coreStart.application,perPageConfig:itemsPerPage,goInspectObject:savedObject=>{const{editUrl:editUrl}=savedObject.meta;if(editUrl){return coreStart.application.navigateToUrl(coreStart.http.basePath.prepend("/app".concat(editUrl)))}},dateFormat:dateFormat,canGoInApp:savedObject=>{const{inAppUrl:inAppUrl}=savedObject.meta;return inAppUrl?Boolean(Object(external_osdSharedDeps_Lodash_["get"])(capabilities,inAppUrl.uiCapabilitiesPath)):false}})}}}]);
(window["advancedSettings_bundle_jsonpfunction"]=window["advancedSettings_bundle_jsonpfunction"]||[]).push([[1],{14:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return isDefaultValue}));__webpack_require__.d(__webpack_exports__,"e",(function(){return toEditableConfig}));__webpack_require__.d(__webpack_exports__,"c",(function(){return getCategoryName}));__webpack_require__.d(__webpack_exports__,"a",(function(){return DEFAULT_CATEGORY}));__webpack_require__.d(__webpack_exports__,"b",(function(){return getAriaName}));function isDefaultValue(setting){return setting.isCustom||setting.value===undefined||setting.value===""||String(setting.value)===String(setting.defVal)}function getValType(def,value){if(def.type){return def.type}if(Array.isArray(value)||Array.isArray(def.value)){return"array"}const typeofVal=def.value!=null?typeof def.value:typeof value;if(typeofVal==="bigint"){return"number"}if(typeofVal==="symbol"||typeofVal==="object"||typeofVal==="function"){throw new Error("incompatible UiSettingsType: '".concat(def.name,"' type ").concat(typeofVal," | ").concat(JSON.stringify(def)))}return typeofVal}var external_osdSharedDeps_Lodash_=__webpack_require__(8);function getAriaName(name){return Object(external_osdSharedDeps_Lodash_["words"])(name||"").map(word=>word.toLowerCase()).join(" ")}const DEFAULT_CATEGORY="general";function toEditableConfig(_ref){let{def:def,name:name,value:value,isCustom:isCustom,isOverridden:isOverridden}=_ref;if(!def){def={}}const validationTyped=def.validation;const conf={name:name,displayName:def.name||name,ariaName:def.name||getAriaName(name),value:value,category:def.category&&def.category.length?def.category:[DEFAULT_CATEGORY],isCustom:isCustom,isOverridden:isOverridden,readonly:!!def.readonly,defVal:def.value,type:getValType(def,value),description:def.description,deprecation:def.deprecation,validation:validationTyped&&validationTyped.regexString?{regex:new RegExp(validationTyped.regexString),message:validationTyped.message}:def.validation,options:def.options,optionLabels:def.optionLabels,requiresPageReload:!!def.requiresPageReload};return conf}var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);const upperFirst=function(){let str=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";return str.replace(/^./,strng=>strng.toUpperCase())};const names={general:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.generalLabel",{defaultMessage:"General"}),appearance:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.appearanceLabel",{defaultMessage:"Appearance"}),timeline:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.timelineLabel",{defaultMessage:"Timeline"}),notifications:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.notificationsLabel",{defaultMessage:"Notifications"}),visualizations:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.visualizationsLabel",{defaultMessage:"Visualizations"}),discover:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.discoverLabel",{defaultMessage:"Discover"}),dashboard:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.dashboardLabel",{defaultMessage:"Dashboard"}),reporting:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.reportingLabel",{defaultMessage:"Reporting"}),search:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.searchLabel",{defaultMessage:"Search"}),securitySolution:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.categoryNames.securitySolutionLabel",{defaultMessage:"Security Solution"})};function getCategoryName(category){return category?names[category]||upperFirst(category):""}},33:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"Field",(function(){return field_Field}));__webpack_require__.d(__webpack_exports__,"getEditableValue",(function(){return getEditableValue}));__webpack_require__.d(__webpack_exports__,"default",(function(){return field_Field}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var classnames=__webpack_require__(15);var classnames_default=__webpack_require__.n(classnames);var textmate=__webpack_require__(16);var markdown=__webpack_require__(17);var json=__webpack_require__(22);var external_osdSharedDeps_ElasticEui_=__webpack_require__(2);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(3);var lib=__webpack_require__(14);function _extends(){_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};return _extends.apply(this,arguments)}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}const getEditableValue=(type,value,defVal)=>{const val=value===null||value===undefined?defVal:value;switch(type){case"array":return val.join(", ");case"boolean":return!!val;case"number":return Number(val);case"image":return val;default:return val||""}};class field_Field extends external_osdSharedDeps_React_["PureComponent"]{constructor(){super(...arguments);_defineProperty(this,"changeImageForm",external_osdSharedDeps_React_default.a.createRef());_defineProperty(this,"handleChange",unsavedChanges=>{this.props.handleChange(this.props.setting.name,unsavedChanges)});_defineProperty(this,"resetField",()=>{const{type:type,defVal:defVal}=this.props.setting;if(type==="image"){this.cancelChangeImage();return this.handleChange({value:getEditableValue(type,defVal),changeImage:true})}return this.handleChange({value:getEditableValue(type,defVal)})});_defineProperty(this,"onCodeEditorChange",value=>{const{defVal:defVal,type:type}=this.props.setting;let newUnsavedValue;let errorParams={};switch(type){case"json":const isJsonArray=Array.isArray(JSON.parse(defVal||"{}"));newUnsavedValue=value.trim()||(isJsonArray?"[]":"{}");try{JSON.parse(newUnsavedValue)}catch(e){errorParams={error:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.codeEditorSyntaxErrorMessage",{defaultMessage:"Invalid JSON syntax"}),isInvalid:true}}break;default:newUnsavedValue=value}this.handleChange({value:newUnsavedValue,...errorParams})});_defineProperty(this,"onFieldChangeSwitch",e=>this.onFieldChange(e.target.checked));_defineProperty(this,"onFieldChangeEvent",e=>this.onFieldChange(e.target.value));_defineProperty(this,"onFieldChange",targetValue=>{const{type:type,validation:validation,value:value,defVal:defVal}=this.props.setting;let newUnsavedValue;switch(type){case"boolean":const{unsavedChanges:unsavedChanges}=this.props;const currentValue=unsavedChanges?unsavedChanges.value:getEditableValue(type,value,defVal);newUnsavedValue=!currentValue;break;case"number":newUnsavedValue=Number(targetValue);break;default:newUnsavedValue=targetValue}let errorParams={};if(validation!==null&&validation!==void 0&&validation.regex){if(!validation.regex.test(newUnsavedValue.toString())){errorParams={error:validation.message,isInvalid:true}}}this.handleChange({value:newUnsavedValue,...errorParams})});_defineProperty(this,"onImageChange",async files=>{if(files==null)return;if(!files.length){this.setState({unsavedValue:null});return}const file=files[0];const{maxSize:maxSize}=this.props.setting.validation;try{let base64Image="";if(file instanceof File){base64Image=await this.getImageAsBase64(file)}let errorParams={};const isInvalid=!!(maxSize!==null&&maxSize!==void 0&&maxSize.length&&base64Image.length>maxSize.length);if(isInvalid){errorParams={isInvalid:isInvalid,error:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.imageTooLargeErrorMessage",{defaultMessage:"Image is too large, maximum size is {maxSizeDescription}",values:{maxSizeDescription:maxSize.description}})}}this.handleChange({changeImage:true,value:base64Image,...errorParams})}catch(err){this.props.toasts.addDanger(external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.imageChangeErrorMessage",{defaultMessage:"Image could not be saved"}));this.cancelChangeImage()}});_defineProperty(this,"changeImage",()=>{this.handleChange({value:null,changeImage:true})});_defineProperty(this,"cancelChangeImage",()=>{var _this$changeImageForm;if((_this$changeImageForm=this.changeImageForm.current)!==null&&_this$changeImageForm!==void 0&&_this$changeImageForm.fileInput){this.changeImageForm.current.fileInput.value="";this.changeImageForm.current.handleChange()}if(this.props.clearChange){this.props.clearChange(this.props.setting.name)}})}getDisplayedDefaultValue(type,defVal){let optionLabels=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(defVal===undefined||defVal===null||defVal===""){return"null"}switch(type){case"array":return defVal.join(", ");case"select":return optionLabels.hasOwnProperty(String(defVal))?optionLabels[String(defVal)]:String(defVal);default:return String(defVal)}}componentDidUpdate(prevProps){var _prevProps$unsavedCha,_this$props$unsavedCh;if(prevProps.setting.type==="image"&&(_prevProps$unsavedCha=prevProps.unsavedChanges)!==null&&_prevProps$unsavedCha!==void 0&&_prevProps$unsavedCha.value&&!((_this$props$unsavedCh=this.props.unsavedChanges)!==null&&_this$props$unsavedCh!==void 0&&_this$props$unsavedCh.value)){this.cancelChangeImage()}}async getImageAsBase64(file){const reader=new FileReader;reader.readAsDataURL(file);return new Promise((resolve,reject)=>{reader.onload=()=>{resolve(reader.result||undefined)};reader.onerror=err=>{reject(err)}})}renderField(setting,ariaDescribedBy){const{enableSaving:enableSaving,unsavedChanges:unsavedChanges,loading:loading}=this.props;const{name:name,value:value,type:type,options:options,optionLabels:optionLabels={},isOverridden:isOverridden,defVal:defVal,ariaName:ariaName}=setting;const a11yProps=ariaDescribedBy?{"aria-label":ariaName,"aria-describedby":ariaDescribedBy}:{"aria-label":ariaName};const currentValue=unsavedChanges?unsavedChanges.value:getEditableValue(type,value,defVal);switch(type){case"boolean":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],_extends({label:!!currentValue?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.onLabel",defaultMessage:"On"}):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.offLabel",defaultMessage:"Off"}),checked:!!currentValue,onChange:this.onFieldChangeSwitch,disabled:loading||isOverridden||!enableSaving,"data-test-subj":"advancedSetting-editField-".concat(name)},a11yProps));case"markdown":case"json":return external_osdSharedDeps_React_default.a.createElement("div",{"data-test-subj":"advancedSetting-editField-".concat(name)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCodeEditor"],_extends({},a11yProps,{mode:type,theme:"textmate",value:currentValue,onChange:this.onCodeEditorChange,width:"100%",height:"auto",minLines:6,maxLines:30,isReadOnly:isOverridden||!enableSaving,setOptions:{showLineNumbers:false,tabSize:2},editorProps:{$blockScrolling:Infinity},showGutter:false})));case"image":const changeImage=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.changeImage;if(!Object(lib["d"])(setting)&&!changeImage){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiImage"],_extends({},a11yProps,{allowFullScreen:true,url:value,alt:name}))}else{return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilePicker"],{disabled:loading||isOverridden||!enableSaving,onChange:this.onImageChange,accept:".jpg,.jpeg,.png",ref:this.changeImageForm,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name),"aria-label":name})}case"select":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],_extends({},a11yProps,{value:currentValue,options:options.map(option=>({text:optionLabels.hasOwnProperty(option)?optionLabels[option]:option,value:option})),onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}));case"number":return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldNumber"],_extends({},a11yProps,{value:currentValue,onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}));default:return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldText"],_extends({},a11yProps,{value:currentValue,onChange:this.onFieldChangeEvent,isLoading:loading,disabled:loading||isOverridden||!enableSaving,fullWidth:true,"data-test-subj":"advancedSetting-editField-".concat(name)}))}}renderLabel(setting){return setting.name}renderHelpText(setting){if(setting.isOverridden){return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.helpText",defaultMessage:"This setting is overridden by the OpenSearch Dashboards server and can not be changed."}))}const canUpdateSetting=this.props.enableSaving;const defaultLink=this.renderResetToDefaultLink(setting);const imageLink=this.renderChangeImageLink(setting);if(canUpdateSetting&&(defaultLink||imageLink)){return external_osdSharedDeps_React_default.a.createElement("span",null,defaultLink,imageLink)}return null}renderTitle(setting){const{unsavedChanges:unsavedChanges}=this.props;const isInvalid=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.isInvalid;const unsavedIconLabel=unsavedChanges?isInvalid?external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.invalidIconLabel",{defaultMessage:"Invalid"}):external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.unsavedIconLabel",{defaultMessage:"Unsaved"}):undefined;return external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement("span",{className:"mgtAdvancedSettings__fieldTitle"},setting.displayName||setting.name),setting.isCustom?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{type:"asterisk",color:"primary","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.customSettingAriaLabel",{defaultMessage:"Custom setting"}),content:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.customSettingTooltip",defaultMessage:"Custom setting"})}):"",unsavedChanges?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{anchorClassName:"mgtAdvancedSettings__fieldTitleUnsavedIcon",type:isInvalid?"alert":"dot",color:isInvalid?"danger":"warning","aria-label":unsavedIconLabel,content:unsavedIconLabel}):"")}renderDescription(setting){let description;let deprecation;if(setting.deprecation){const links=this.props.dockLinks;deprecation=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{content:setting.deprecation.message},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiBadge"],{color:"warning",onClick:()=>{window.open(links.noDocumentation.management[setting.deprecation.docLinksKey],"_blank")},onClickAriaLabel:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.deprecationClickAreaLabel",{defaultMessage:"Click to view deprecation documentation for {settingName}.",values:{settingName:setting.name}})},"Deprecated")),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}if(external_osdSharedDeps_React_default.a.isValidElement(setting.description)){description=setting.description}else{description=external_osdSharedDeps_React_default.a.createElement("div",{dangerouslySetInnerHTML:{__html:setting.description||""}})}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,deprecation,description,this.renderDefaultValue(setting))}renderDefaultValue(setting){const{type:type,defVal:defVal,optionLabels:optionLabels}=setting;if(Object(lib["d"])(setting)){return}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs"},type==="json"?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.defaultValueTypeJsonText",defaultMessage:"Default: {value}",values:{value:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCodeBlock"],{language:"json",paddingSize:"s",overflowHeight:defVal.length>=500?300:undefined},this.getDisplayedDefaultValue(type,defVal))}})):external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_["Fragment"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.defaultValueText",defaultMessage:"Default: {value}",values:{value:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiCode"],null,this.getDisplayedDefaultValue(type,defVal,optionLabels))}}))))}renderResetToDefaultLink(setting){var _this$props$unsavedCh2;const{defVal:defVal,ariaName:ariaName,name:name}=setting;if(defVal===((_this$props$unsavedCh2=this.props.unsavedChanges)===null||_this$props$unsavedCh2===void 0?void 0:_this$props$unsavedCh2.value)||Object(lib["d"])(setting)||this.props.loading){return}return external_osdSharedDeps_React_default.a.createElement("span",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.resetToDefaultLinkAriaLabel",{defaultMessage:"Reset {ariaName} to default",values:{ariaName:ariaName}}),onClick:this.resetField,"data-test-subj":"advancedSetting-resetField-".concat(name)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.resetToDefaultLinkText",defaultMessage:"Reset to default"})),"   ")}renderChangeImageLink(setting){var _this$props$unsavedCh3;const changeImage=(_this$props$unsavedCh3=this.props.unsavedChanges)===null||_this$props$unsavedCh3===void 0?void 0:_this$props$unsavedCh3.changeImage;const{type:type,value:value,ariaName:ariaName,name:name}=setting;if(type!=="image"||!value||changeImage){return}return external_osdSharedDeps_React_default.a.createElement("span",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.changeImageLinkAriaLabel",{defaultMessage:"Change {ariaName}",values:{ariaName:ariaName}}),onClick:this.changeImage,"data-test-subj":"advancedSetting-changeImage-".concat(name)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"advancedSettings.field.changeImageLinkText",defaultMessage:"Change image"})))}render(){const{setting:setting,unsavedChanges:unsavedChanges}=this.props;const error=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.error;const isInvalid=unsavedChanges===null||unsavedChanges===void 0?void 0:unsavedChanges.isInvalid;const className=classnames_default()("mgtAdvancedSettings__field",{"mgtAdvancedSettings__field--unsaved":unsavedChanges,"mgtAdvancedSettings__field--invalid":isInvalid});const groupId="".concat(setting.name,"-group");const unsavedId="".concat(setting.name,"-unsaved");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDescribedFormGroup"],{id:groupId,className:className,title:this.renderTitle(setting),description:this.renderDescription(setting),fullWidth:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{isInvalid:isInvalid,error:error,label:this.renderLabel(setting),helpText:this.renderHelpText(setting),className:"mgtAdvancedSettings__fieldRow",hasChildLabel:setting.type!=="boolean",fullWidth:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,this.renderField(setting,unsavedChanges?"".concat(groupId," ").concat(unsavedId):undefined),unsavedChanges&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiScreenReaderOnly"],null,external_osdSharedDeps_React_default.a.createElement("p",{id:"".concat(unsavedId)},unsavedChanges.error?unsavedChanges.error:external_osdSharedDeps_OsdI18n_["i18n"].translate("advancedSettings.field.settingIsUnsaved",{defaultMessage:"Setting is currently not saved."}))))))}}}}]);
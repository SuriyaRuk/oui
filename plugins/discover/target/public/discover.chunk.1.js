(window["discover_bundle_jsonpfunction"]=window["discover_bundle_jsonpfunction"]||[]).push([[1],{72:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"j",(function(){return useSelector}));__webpack_require__.d(__webpack_exports__,"i",(function(){return useDispatch}));var _data_explorer_public__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(64);var _data_explorer_public__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_data_explorer_public__WEBPACK_IMPORTED_MODULE_0__);__webpack_require__.d(__webpack_exports__,"h",(function(){return _data_explorer_public__WEBPACK_IMPORTED_MODULE_0__["setIndexPattern"]}));var _discover_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(17);__webpack_require__.d(__webpack_exports__,"a",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["a"]}));__webpack_require__.d(__webpack_exports__,"b",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["d"]}));__webpack_require__.d(__webpack_exports__,"c",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["e"]}));__webpack_require__.d(__webpack_exports__,"d",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["f"]}));__webpack_require__.d(__webpack_exports__,"e",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["g"]}));__webpack_require__.d(__webpack_exports__,"f",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["h"]}));__webpack_require__.d(__webpack_exports__,"g",(function(){return _discover_slice__WEBPACK_IMPORTED_MODULE_1__["i"]}));const useSelector=_data_explorer_public__WEBPACK_IMPORTED_MODULE_0__["useTypedSelector"];const useDispatch=_data_explorer_public__WEBPACK_IMPORTED_MODULE_0__["useTypedDispatch"]},73:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return DiscoverContext}));__webpack_require__.d(__webpack_exports__,"useDiscoverContext",(function(){return useDiscoverContext}));var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);var _opensearch_dashboards_react_public__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(23);var _opensearch_dashboards_react_public__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_opensearch_dashboards_react_public__WEBPACK_IMPORTED_MODULE_1__);var _opensearch_dashboards_services__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5);var _utils_use_search__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(81);const SearchContext=react__WEBPACK_IMPORTED_MODULE_0___default.a.createContext({});function DiscoverContext(_ref){let{children:children}=_ref;const{services:deServices}=Object(_opensearch_dashboards_react_public__WEBPACK_IMPORTED_MODULE_1__["useOpenSearchDashboards"])();const services=Object(_opensearch_dashboards_services__WEBPACK_IMPORTED_MODULE_2__["f"])();const searchParams=Object(_utils_use_search__WEBPACK_IMPORTED_MODULE_3__["b"])({...deServices,...services});return react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(_opensearch_dashboards_react_public__WEBPACK_IMPORTED_MODULE_1__["OpenSearchDashboardsContextProvider"],{services:services},react__WEBPACK_IMPORTED_MODULE_0___default.a.createElement(SearchContext.Provider,{value:searchParams},children))}const useDiscoverContext=()=>react__WEBPACK_IMPORTED_MODULE_0___default.a.useContext(SearchContext)},75:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return isSortable}));__webpack_require__.d(__webpack_exports__,"a",(function(){return getSort}));var lodash__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(12);var lodash__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash__WEBPACK_IMPORTED_MODULE_0__);function isSortable(fieldName,indexPattern){const field=indexPattern.getFieldByName(fieldName);return field&&field.sortable}function createSortObject(sortPair,indexPattern){if(Array.isArray(sortPair)&&sortPair.length===2&&isSortable(String(sortPair[0]),indexPattern)){const[field,direction]=sortPair;return{[field]:direction}}else if(lodash__WEBPACK_IMPORTED_MODULE_0___default.a.isPlainObject(sortPair)&&isSortable(Object.keys(sortPair)[0],indexPattern)){return sortPair}}function isLegacySort(sort){return sort.length===2&&typeof sort[0]==="string"&&(sort[1]==="desc"||sort[1]==="asc")}function getSort(sort,indexPattern){if(Array.isArray(sort)){if(isLegacySort(sort)){return[{[sort[0]]:sort[1]}]}return sort.map(sortPair=>createSortObject(sortPair,indexPattern)).filter(sortPairObj=>typeof sortPairObj==="object")}return[]}function getSortArray(sort,indexPattern){return getSort(sort,indexPattern).map(sortPair=>Object.entries(sortPair).pop())}},76:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getSortForSearchSource}));var _get_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75);var _get_default_sort__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(77);function getSortForSearchSource(sort,indexPattern){let defaultDirection=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"desc";if(!sort||!indexPattern){return[]}else if(Array.isArray(sort)&&sort.length===0){sort=Object(_get_default_sort__WEBPACK_IMPORTED_MODULE_1__["a"])(indexPattern,defaultDirection)}const{timeFieldName:timeFieldName}=indexPattern;return Object(_get_sort__WEBPACK_IMPORTED_MODULE_0__["a"])(sort,indexPattern).map(sortPair=>{if(indexPattern.isTimeNanosBased()&&timeFieldName&&sortPair[timeFieldName]){return{[timeFieldName]:{order:sortPair[timeFieldName],numeric_type:"date_nanos"}}}return sortPair})}},77:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return getDefaultSort}));var _get_sort__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(75);function getDefaultSort(indexPattern){let defaultSortOrder=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"desc";if(indexPattern.timeFieldName&&Object(_get_sort__WEBPACK_IMPORTED_MODULE_0__["b"])(indexPattern.timeFieldName,indexPattern)){return[[indexPattern.timeFieldName,defaultSortOrder]]}else{return[["_score",defaultSortOrder]]}}},78:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=void 0;var _moment=_interopRequireDefault(__webpack_require__(62));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}var unitsMap={ms:{weight:1,type:"fixed",base:1},s:{weight:2,type:"fixed",base:1e3},m:{weight:3,type:"mixed",base:1e3*60},h:{weight:4,type:"mixed",base:1e3*60*60},d:{weight:5,type:"mixed",base:1e3*60*60*24},w:{weight:6,type:"calendar",base:NaN},M:{weight:7,type:"calendar",base:NaN},y:{weight:9,type:"calendar",base:NaN}};var units=Object.keys(unitsMap).sort((function(a,b){return unitsMap[b].weight-unitsMap[a].weight}));var unitsDesc=_toConsumableArray(units);var unitsAsc=_toConsumableArray(units).reverse();var isDate=function isDate(d){return Object.prototype.toString.call(d)==="[object Date]"};var isValidDate=function isValidDate(d){return isDate(d)&&!isNaN(d.valueOf())};function parse(text){var _ref=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},_ref$roundUp=_ref.roundUp,roundUp=_ref$roundUp===void 0?false:_ref$roundUp,_ref$momentInstance=_ref.momentInstance,momentInstance=_ref$momentInstance===void 0?_moment.default:_ref$momentInstance,forceNow=_ref.forceNow;if(!text)return undefined;if(momentInstance.isMoment(text))return text;if(isDate(text))return momentInstance(text);if(forceNow!==undefined&&!isValidDate(forceNow)){throw new Error("forceNow must be a valid Date")}var time;var mathString="";var index;var parseString;if(text.substring(0,3)==="now"){time=momentInstance(forceNow);mathString=text.substring("now".length)}else{index=text.indexOf("||");if(index===-1){parseString=text;mathString=""}else{parseString=text.substring(0,index);mathString=text.substring(index+2)}time=momentInstance(parseString)}if(!mathString.length){return time}return parseDateMath(mathString,time,roundUp)}function parseDateMath(mathString,time,roundUp){var dateTime=time;var len=mathString.length;var i=0;while(i<len){var c=mathString.charAt(i++);var type=void 0;var num=void 0;var unit=void 0;if(c==="/"){type=0}else if(c==="+"){type=1}else if(c==="-"){type=2}else{return}if(isNaN(mathString.charAt(i))){num=1}else if(mathString.length===2){num=mathString.charAt(i)}else{var numFrom=i;while(!isNaN(mathString.charAt(i))){i++;if(i>=len)return}num=parseInt(mathString.substring(numFrom,i),10)}if(type===0){if(num!==1){return}}unit=mathString.charAt(i++);for(var j=i;j<len;j++){var unitChar=mathString.charAt(i);if(/[a-z]/i.test(unitChar)){unit+=unitChar;i++}else{break}}if(units.indexOf(unit)===-1){return}else{if(type===0){if(roundUp)dateTime.endOf(unit);else dateTime.startOf(unit)}else if(type===1){dateTime.add(num,unit)}else if(type===2){dateTime.subtract(num,unit)}}}return dateTime}var _default={parse:parse,unitsMap:Object.freeze(unitsMap),units:Object.freeze(units),unitsAsc:Object.freeze(unitsAsc),unitsDesc:Object.freeze(unitsDesc)};exports.default=_default;module.exports=exports.default},81:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ResultStatus}));__webpack_require__.d(__webpack_exports__,"b",(function(){return useSearch}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_Rxjs_=__webpack_require__(24);var external_osdSharedDeps_RxjsOperators_=__webpack_require__(67);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);var external_osdSharedDeps_Lodash_=__webpack_require__(12);var public_=__webpack_require__(65);var data_public_=__webpack_require__(4);var target=__webpack_require__(78);var target_default=__webpack_require__.n(target);function validateTimeRange(_ref,toastNotifications){let{from:from,to:to}=_ref;const fromMoment=target_default.a.parse(from);const toMoment=target_default.a.parse(to);if(!fromMoment||!toMoment||!fromMoment.isValid()||!toMoment.isValid()){toastNotifications.addDanger({title:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.notifications.invalidTimeRangeTitle",{defaultMessage:"Invalid time range"}),text:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.notifications.invalidTimeRangeText",{defaultMessage:"The provided time range is invalid. (from: '{from}', to: '{to}')",values:{from:from,to:to}})});return false}return true}var get_sort_for_search_source=__webpack_require__(76);var common=__webpack_require__(8);const updateSearchSource=async _ref=>{let{indexPattern:indexPattern,services:services,searchSource:searchSource,sort:sort,histogramConfigs:histogramConfigs}=_ref;const{uiSettings:uiSettings,data:data}=services;const sortForSearchSource=Object(get_sort_for_search_source["a"])(sort,indexPattern,uiSettings.get(common["j"]));const size=uiSettings.get(common["h"]);const filters=data.query.filterManager.getFilters();const searchSourceInstance=searchSource||await data.search.searchSource.create();const timeRangeSearchSource=await data.search.searchSource.create();const{isDefault:isDefault}=data_public_["indexPatterns"];if(isDefault(indexPattern)){const timefilter=data.query.timefilter.timefilter;timeRangeSearchSource.setField("filter",()=>timefilter.createFilter(indexPattern))}searchSourceInstance.setParent(timeRangeSearchSource);searchSourceInstance.setFields({index:indexPattern,sort:sortForSearchSource,size:size,query:data.query.queryString.getQuery()||null,highlightAll:true,version:true,filter:filters});if(histogramConfigs){const dslAggs=histogramConfigs.toDsl();searchSourceInstance.setField("aggs",dslAggs)}return searchSourceInstance};var state_management=__webpack_require__(72);function findIndexPatternById(indexPatterns,id){if(!Array.isArray(indexPatterns)||!id){return}return indexPatterns.find(o=>o.id===id)}function getFallbackIndexPatternId(indexPatterns){let defaultIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"";if(defaultIndex&&findIndexPatternById(indexPatterns,defaultIndex)){return defaultIndex}return!indexPatterns||!indexPatterns.length||!indexPatterns[0].id?"":indexPatterns[0].id}function getIndexPatternId(){let id=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"";let indexPatterns=arguments.length>1?arguments[1]:undefined;let defaultIndex=arguments.length>2&&arguments[2]!==undefined?arguments[2]:"";if(!id||!findIndexPatternById(indexPatterns,id)){return getFallbackIndexPatternId(indexPatterns,defaultIndex)}return id}const useIndexPattern=services=>{const indexPatternIdFromState=Object(state_management["j"])(state=>state.metadata.indexPattern);const[indexPattern,setIndexPattern]=Object(external_osdSharedDeps_React_["useState"])(undefined);const{data:data,toastNotifications:toastNotifications,uiSettings:config,store:store}=services;Object(external_osdSharedDeps_React_["useEffect"])(()=>{let isMounted=true;const fetchIndexPatternDetails=id=>{data.indexPatterns.get(id).then(result=>{if(isMounted){setIndexPattern(result)}}).catch(()=>{if(isMounted){const indexPatternMissingWarning=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.valueIsNotConfiguredIndexPatternIDWarningTitle",{defaultMessage:"{id} is not a configured index pattern ID",values:{id:'"'.concat(id,'"')}});toastNotifications.addDanger({title:indexPatternMissingWarning})}})};if(!indexPatternIdFromState){data.indexPatterns.getCache().then(indexPatternList=>{const newId=getIndexPatternId("",indexPatternList,config.get("defaultIndex"));store.dispatch(Object(state_management["h"])(newId));fetchIndexPatternDetails(newId)})}else{fetchIndexPatternDetails(indexPatternIdFromState)}return()=>{isMounted=false}},[indexPatternIdFromState,data.indexPatterns,toastNotifications,config,store]);return indexPattern};var opensearch_dashboards_services=__webpack_require__(5);function createHistogramConfigs(indexPattern,histogramInterval,data){const visStateAggs=[{type:"count",schema:"metric"},{type:"date_histogram",schema:"segment",params:{field:indexPattern.timeFieldName,interval:histogramInterval,timeRange:data.query.timefilter.timefilter.getTime()}}];return data.search.aggs.createAggConfigs(indexPattern,visStateAggs)}const buildPointSeriesData=(table,dimensions)=>{const{x:x,y:y}=dimensions;const xAccessor=table.columns[x.accessor].id;const yAccessor=table.columns[y.accessor].id;const chart={};chart.xAxisOrderedValues=Object(external_osdSharedDeps_Lodash_["uniq"])(table.rows.map(r=>r[xAccessor]));chart.xAxisFormat=x.format;chart.xAxisLabel=table.columns[x.accessor].name;const{intervalOpenSearchUnit:intervalOpenSearchUnit,intervalOpenSearchValue:intervalOpenSearchValue,interval:interval,bounds:bounds}=x.params;chart.ordered={date:true,interval:interval,intervalOpenSearchUnit:intervalOpenSearchUnit,intervalOpenSearchValue:intervalOpenSearchValue,min:bounds.min,max:bounds.max};chart.yAxisLabel=table.columns[y.accessor].name;chart.values=table.rows.filter(row=>row&&row[yAccessor]!=="NaN").map(row=>({x:row[xAccessor],y:row[yAccessor]}));return chart};var external_osdSharedDeps_Moment_=__webpack_require__(62);var external_osdSharedDeps_Moment_default=__webpack_require__.n(external_osdSharedDeps_Moment_);function getDimensions(aggs,data){const[metric,agg]=aggs.aggs;const{from:from,to:to}=data.query.timefilter.timefilter.getTime();agg.params.timeRange={from:target_default.a.parse(from),to:target_default.a.parse(to,{roundUp:true})};const bounds=agg.params.timeRange?data.query.timefilter.timefilter.calculateBounds(agg.params.timeRange):null;const buckets=data_public_["search"].aggs.isDateHistogramBucketAggConfig(agg)?agg.buckets:undefined;if(!buckets||!bounds){return}const{opensearchUnit:opensearchUnit,opensearchValue:opensearchValue}=buckets.getInterval();return{x:{accessor:0,label:agg.makeLabel(),format:agg.toSerializedFieldFormat(),params:{date:true,interval:external_osdSharedDeps_Moment_default.a.duration(opensearchValue,opensearchUnit),intervalOpenSearchValue:opensearchValue,intervalOpenSearchUnit:opensearchUnit,format:buckets.getScaledDateFormat(),bounds:buckets.getBounds()}},y:{accessor:1,format:metric.toSerializedFieldFormat(),label:metric.makeLabel()}}}let ResultStatus;(function(ResultStatus){ResultStatus["UNINITIALIZED"]="uninitialized";ResultStatus["LOADING"]="loading";ResultStatus["READY"]="ready";ResultStatus["NO_RESULTS"]="none"})(ResultStatus||(ResultStatus={}));const useSearch=services=>{const initalSearchComplete=Object(external_osdSharedDeps_React_["useRef"])(false);const[savedSearch,setSavedSearch]=Object(external_osdSharedDeps_React_["useState"])(undefined);const{savedSearch:savedSearchId,sort:sort,interval:interval}=Object(state_management["j"])(state=>state.discover);const{data:data,filterManager:filterManager,getSavedSearchById:getSavedSearchById,core:core,toastNotifications:toastNotifications,chrome:chrome}=services;const indexPattern=useIndexPattern(services);const timefilter=data.query.timefilter.timefilter;const fetchStateRef=Object(external_osdSharedDeps_React_["useRef"])({abortController:undefined,fieldCounts:{}});const inspectorAdapters={requests:new public_["RequestAdapter"]};const shouldSearchOnPageLoad=Object(external_osdSharedDeps_React_["useCallback"])(()=>services.uiSettings.get(common["i"])||(savedSearch===null||savedSearch===void 0?void 0:savedSearch.id)!==undefined||timefilter.getRefreshInterval().pause===false,[savedSearch,services.uiSettings,timefilter]);const data$=Object(external_osdSharedDeps_React_["useMemo"])(()=>new external_osdSharedDeps_Rxjs_["BehaviorSubject"]({status:shouldSearchOnPageLoad()?ResultStatus.LOADING:ResultStatus.UNINITIALIZED}),[shouldSearchOnPageLoad]);const refetch$=Object(external_osdSharedDeps_React_["useMemo"])(()=>new external_osdSharedDeps_Rxjs_["Subject"],[]);const fetch=Object(external_osdSharedDeps_React_["useCallback"])(async()=>{if(!indexPattern){data$.next({status:shouldSearchOnPageLoad()?ResultStatus.LOADING:ResultStatus.UNINITIALIZED});return}if(!validateTimeRange(timefilter.getTime(),toastNotifications)){return data$.next({status:ResultStatus.NO_RESULTS,rows:[]})}if(fetchStateRef.current.abortController)fetchStateRef.current.abortController.abort();fetchStateRef.current.abortController=new AbortController;const histogramConfigs=indexPattern.timeFieldName?createHistogramConfigs(indexPattern,interval||"auto",data):undefined;const searchSource=await updateSearchSource({indexPattern:indexPattern,services:services,sort:sort,searchSource:savedSearch===null||savedSearch===void 0?void 0:savedSearch.searchSource,histogramConfigs:histogramConfigs});try{var _fetchStateRef$curren;if(((_fetchStateRef$curren=fetchStateRef.current.rows)===null||_fetchStateRef$curren===void 0?void 0:_fetchStateRef$curren.length)===0){data$.next({status:ResultStatus.LOADING})}inspectorAdapters.requests.reset();const title=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.inspectorRequestDataTitle",{defaultMessage:"data"});const description=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.inspectorRequestDescription",{defaultMessage:"This request queries OpenSearch to fetch the data for the search."});const inspectorRequest=inspectorAdapters.requests.start(title,{description:description});inspectorRequest.stats(Object(opensearch_dashboards_services["d"])(searchSource));searchSource.getSearchRequestBody().then(body=>{inspectorRequest.json(body)});const fetchResp=await searchSource.fetch({abortSignal:fetchStateRef.current.abortController.signal});inspectorRequest.stats(Object(opensearch_dashboards_services["e"])(fetchResp,searchSource)).ok({json:fetchResp});const hits=fetchResp.hits.total;const rows=fetchResp.hits.hits;let bucketInterval={};let chartData;for(const row of rows){const fields=Object.keys(indexPattern.flattenHit(row));for(const fieldName of fields){fetchStateRef.current.fieldCounts[fieldName]=(fetchStateRef.current.fieldCounts[fieldName]||0)+1}}if(histogramConfigs){const bucketAggConfig=histogramConfigs.aggs[1];const tabifiedData=Object(opensearch_dashboards_services["o"])(histogramConfigs,fetchResp);const dimensions=getDimensions(histogramConfigs,data);if(dimensions){if(bucketAggConfig&&data_public_["search"].aggs.isDateHistogramBucketAggConfig(bucketAggConfig)){var _bucketAggConfig$buck;bucketInterval=(_bucketAggConfig$buck=bucketAggConfig.buckets)===null||_bucketAggConfig$buck===void 0?void 0:_bucketAggConfig$buck.getInterval()}chartData=buildPointSeriesData(tabifiedData,dimensions)}}fetchStateRef.current.fieldCounts=fetchStateRef.current.fieldCounts;fetchStateRef.current.rows=rows;data$.next({status:rows.length>0?ResultStatus.READY:ResultStatus.NO_RESULTS,fieldCounts:fetchStateRef.current.fieldCounts,hits:hits,rows:rows,bucketInterval:bucketInterval,chartData:chartData})}catch(error){if(error instanceof Error&&error.name==="AbortError")return;data$.next({status:ResultStatus.NO_RESULTS,rows:[]});data.search.showError(error)}finally{initalSearchComplete.current=true}},[indexPattern,interval,timefilter,toastNotifications,data,services,savedSearch===null||savedSearch===void 0?void 0:savedSearch.searchSource,data$,sort,shouldSearchOnPageLoad,inspectorAdapters.requests]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const fetch$=Object(external_osdSharedDeps_Rxjs_["merge"])(refetch$,filterManager.getFetches$(),timefilter.getFetch$(),timefilter.getTimeUpdate$(),timefilter.getAutoRefreshFetch$(),data.query.queryString.getUpdates$()).pipe(Object(external_osdSharedDeps_RxjsOperators_["debounceTime"])(100));const subscription=fetch$.subscribe(()=>{(async()=>{try{await fetch()}catch(error){core.fatalErrors.add(error)}})()});if(shouldSearchOnPageLoad()||initalSearchComplete.current===true){refetch$.next()}return()=>{subscription.unsubscribe()}},[data$,data.query.queryString,filterManager,refetch$,timefilter,fetch,core.fatalErrors,shouldSearchOnPageLoad]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{(async()=>{const savedSearchInstance=await getSavedSearchById(savedSearchId);setSavedSearch(savedSearchInstance);const filters=Object(external_osdSharedDeps_Lodash_["cloneDeep"])(savedSearchInstance.searchSource.getOwnField("filter"));const query=savedSearchInstance.searchSource.getField("query")||data.query.queryString.getDefaultQuery();const actualFilters=[];if(filters!==undefined){const result=typeof filters==="function"?filters():filters;if(result!==undefined){actualFilters.push(...Array.isArray(result)?result:[result])}}filterManager.setAppFilters(actualFilters);data.query.queryString.setQuery(query);if(savedSearchInstance!==null&&savedSearchInstance!==void 0&&savedSearchInstance.id){chrome.recentlyAccessed.add(savedSearchInstance.getFullPath(),savedSearchInstance.title,savedSearchInstance.id)}})();return()=>{}},[getSavedSearchById,savedSearchId]);return{data$:data$,refetch$:refetch$,indexPattern:indexPattern,savedSearch:savedSearch,inspectorAdapters:inspectorAdapters}}}}]);
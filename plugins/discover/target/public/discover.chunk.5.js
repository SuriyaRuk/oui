(window["discover_bundle_jsonpfunction"]=window["discover_bundle_jsonpfunction"]||[]).push([[5],{138:function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(139);case"v7light":return __webpack_require__(141);case"v8dark":return __webpack_require__(143);case"v8light":return __webpack_require__(145)}},139:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(140);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},140:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSideBarFieldListHeader {\n  padding-left: 8px; }\n\n.dscSidebar__item:hover,\n.dscSidebar__item:focus {\n  background-color: #031119; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},141:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(142);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},142:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSideBarFieldListHeader {\n  padding-left: 8px; }\n\n.dscSidebar__item:hover,\n.dscSidebar__item:focus {\n  background-color: #e6f0f8; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},143:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(144);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},144:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSideBarFieldListHeader {\n  padding-left: 8px; }\n\n.dscSidebar__item:hover,\n.dscSidebar__item:focus {\n  background-color: #0b2026; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},145:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(146);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},146:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSideBarFieldListHeader {\n  padding-left: 8px; }\n\n.dscSidebar__item:hover,\n.dscSidebar__item:focus {\n  background-color: #e4f2f2; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},147:function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(148);case"v7light":return __webpack_require__(150);case"v8dark":return __webpack_require__(152);case"v8light":return __webpack_require__(154)}},148:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(149);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},149:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscFieldDetails__barContainer {\n  min-width: 0; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},150:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(151);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},151:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscFieldDetails__barContainer {\n  min-width: 0; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},152:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(153);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},153:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscFieldDetails__barContainer {\n  min-width: 0; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},154:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(155);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},155:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscFieldDetails__barContainer {\n  min-width: 0; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},156:function(module,exports,__webpack_require__){switch(window.__osdThemeTag__){case"v7dark":return __webpack_require__(157);case"v7light":return __webpack_require__(159);case"v8dark":return __webpack_require__(161);case"v8light":return __webpack_require__(163)}},157:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(158);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},158:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSidebarItem__fieldPopoverPanel {\n  min-width: 260px;\n  max-width: 300px; }\n\n.dscSidebarField__actionButton {\n  opacity: 0;\n  transition: opacity 150ms; }\n  @media only screen and (max-width: 574px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n.dscSidebarField:hover .dscSidebarField__actionButton, .dscSidebarField:focus .dscSidebarField__actionButton {\n  opacity: 1; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},159:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(160);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},160:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSidebarItem__fieldPopoverPanel {\n  min-width: 260px;\n  max-width: 300px; }\n\n.dscSidebarField__actionButton {\n  opacity: 0;\n  transition: opacity 150ms; }\n  @media only screen and (max-width: 574px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n.dscSidebarField:hover .dscSidebarField__actionButton, .dscSidebarField:focus .dscSidebarField__actionButton {\n  opacity: 1; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},161:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(162);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},162:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSidebarItem__fieldPopoverPanel {\n  min-width: 260px;\n  max-width: 300px; }\n\n.dscSidebarField__actionButton {\n  opacity: 0;\n  transition: opacity 150ms; }\n  @media only screen and (max-width: 574px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n.dscSidebarField:hover .dscSidebarField__actionButton, .dscSidebarField:focus .dscSidebarField__actionButton {\n  opacity: 1; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},163:function(module,exports,__webpack_require__){var api=__webpack_require__(11);var content=__webpack_require__(164);content=content.__esModule?content.default:content;if(typeof content==="string"){content=[[module.i,content,""]]}var options={};options.insert="head";options.singleton=false;var update=api(content,options);module.exports=content.locals||{}},164:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7);var _node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0__);var ___CSS_LOADER_EXPORT___=_node_modules_css_loader_dist_runtime_api_js__WEBPACK_IMPORTED_MODULE_0___default()((function(i){return i[1]}));___CSS_LOADER_EXPORT___.push([module.i,"/*!\n * SPDX-License-Identifier: Apache-2.0\n *\n * The OpenSearch Contributors require contributions made to\n * this file be licensed under the Apache-2.0 license or a\n * compatible open source license.\n *\n * Modifications Copyright OpenSearch Contributors. See\n * GitHub history for details.\n */\n\n.dscSidebarItem__fieldPopoverPanel {\n  min-width: 260px;\n  max-width: 300px; }\n\n.dscSidebarField__actionButton {\n  opacity: 0;\n  transition: opacity 150ms; }\n  @media only screen and (max-width: 574px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 575px) and (max-width: 767px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n  @media only screen and (min-width: 768px) and (max-width: 991px) {\n    .dscSidebarField__actionButton {\n      opacity: 1; } }\n.dscSidebarField:hover .dscSidebarField__actionButton, .dscSidebarField:focus .dscSidebarField__actionButton {\n  opacity: 1; }\n",""]);__webpack_exports__["default"]=___CSS_LOADER_EXPORT___},176:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",(function(){return DiscoverPanel}));var external_osdSharedDeps_React_=__webpack_require__(0);var external_osdSharedDeps_React_default=__webpack_require__.n(external_osdSharedDeps_React_);var state_management=__webpack_require__(72);var discover_sidebar=__webpack_require__(138);var external_osdSharedDeps_OsdI18n_=__webpack_require__(1);var external_osdSharedDeps_ElasticEui_=__webpack_require__(2);var external_osdSharedDeps_OsdI18nReact_=__webpack_require__(6);function StringFieldProgressBar(_ref){let{value:value,percent:percent,count:count}=_ref;const ariaLabel="".concat(value,": ").concat(count," (").concat(percent,"%)");return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiProgress"],{value:percent,max:100,color:"secondary","aria-label":ariaLabel,size:"s"})}var discover_field_bucket=__webpack_require__(147);function DiscoverFieldBucket(_ref){let{field:field,bucket:bucket,onAddFilter:onAddFilter}=_ref;const emptyTxt=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.detailViews.emptyStringText",{defaultMessage:"Empty string"});const addLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.detailViews.filterValueButtonAriaLabel",{defaultMessage:'Filter for {field}: "{value}"',values:{value:bucket.value,field:field.name}});const removeLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.detailViews.filterOutValueButtonAriaLabel",{defaultMessage:'Filter out {field}: "{value}"',values:{value:bucket.value,field:field.name}});return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",responsive:false,gutterSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{className:"dscFieldDetails__barContainer",grow:1},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{justifyContent:"spaceBetween",gutterSize:"xs",responsive:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:1,className:"eui-textTruncate"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{title:bucket.display===""?emptyTxt:"".concat(bucket.display,": ").concat(bucket.count," (").concat(bucket.percent.toFixed(1),"%)"),size:"xs",className:"eui-textTruncate"},bucket.display===""?emptyTxt:bucket.display)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false,className:"eui-textTruncate"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{color:"secondary",size:"xs",className:"eui-textTruncate"},bucket.percent.toFixed(1),"%"))),external_osdSharedDeps_React_default.a.createElement(StringFieldProgressBar,{value:bucket.value,percent:bucket.percent,count:bucket.count})),field.filterable&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement("div",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{iconSize:"s",iconType:"plusInCircle",onClick:()=>onAddFilter(field,bucket.value,"+"),"aria-label":addLabel,"data-test-subj":"plus-".concat(field.name,"-").concat(bucket.value),style:{minHeight:"auto",minWidth:"auto",paddingRight:2,paddingLeft:2,paddingTop:0,paddingBottom:0},className:"euiButtonIcon--auto"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{iconSize:"s",iconType:"minusInCircle",onClick:()=>onAddFilter(field,bucket.value,"-"),"aria-label":removeLabel,"data-test-subj":"minus-".concat(field.name,"-").concat(bucket.value),style:{minHeight:"auto",minWidth:"auto",paddingTop:0,paddingBottom:0,paddingRight:2,paddingLeft:2},className:"euiButtonIcon--auto"})))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"s"}))}function getWarnings(field){let warnings=[];if(field.scripted){warnings.push(external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.scriptedFieldsTakeLongExecuteDescription",{defaultMessage:"Scripted fields can take a long time to execute."}))}if(warnings.length>1){warnings=warnings.map((function(warning,i){return(i>0?"\n":"")+(i+1)+" - "+warning}))}return warnings}var public_=__webpack_require__(66);var opensearch_dashboards_services=__webpack_require__(5);var data_public_=__webpack_require__(4);function getTriggerConstant(type){return type===data_public_["OSD_FIELD_TYPES"].GEO_POINT||type===data_public_["OSD_FIELD_TYPES"].GEO_SHAPE?public_["VISUALIZE_GEO_FIELD_TRIGGER"]:public_["VISUALIZE_FIELD_TRIGGER"]}function getTrigger(type){return type===data_public_["OSD_FIELD_TYPES"].GEO_POINT||type===data_public_["OSD_FIELD_TYPES"].GEO_SHAPE?public_["visualizeGeoFieldTrigger"]:public_["visualizeFieldTrigger"]}async function getCompatibleActions(fieldName,indexPatternId,contextualFields,trigger){const compatibleActions=await Object(opensearch_dashboards_services["g"])().getTriggerCompatibleActions(trigger,{indexPatternId:indexPatternId,fieldName:fieldName,contextualFields:contextualFields});return compatibleActions}async function getVisualizeHref(field,indexPatternId,contextualFields){var _compatibleActions$0$,_compatibleActions$;if(!indexPatternId)return undefined;const triggerOptions={indexPatternId:indexPatternId,fieldName:field.name,contextualFields:contextualFields,trigger:getTrigger(field.type)};const compatibleActions=await getCompatibleActions(field.name,indexPatternId,contextualFields,getTriggerConstant(field.type));return compatibleActions.length===1?(_compatibleActions$0$=(_compatibleActions$=compatibleActions[0]).getHref)===null||_compatibleActions$0$===void 0?void 0:_compatibleActions$0$.call(_compatibleActions$,triggerOptions):undefined}function triggerVisualizeActions(field,indexPatternId,contextualFields){if(!indexPatternId)return;const trigger=getTriggerConstant(field.type);const triggerOptions={indexPatternId:indexPatternId,fieldName:field.name,contextualFields:contextualFields};Object(opensearch_dashboards_services["g"])().getTrigger(trigger).exec(triggerOptions)}async function isFieldVisualizable(field,indexPatternId,contextualFields){if(field.name==="_id"||!indexPatternId){return false}const trigger=getTriggerConstant(field.type);const compatibleActions=await getCompatibleActions(field.name,indexPatternId,contextualFields,trigger);return compatibleActions.length>0&&field.visualizable}function DiscoverFieldDetails(_ref){let{columns:columns,details:details,field:field,indexPattern:indexPattern,onAddFilter:onAddFilter}=_ref;const warnings=getWarnings(field);const[showVisualizeLink,setShowVisualizeLink]=Object(external_osdSharedDeps_React_["useState"])(false);const[visualizeLink,setVisualizeLink]=Object(external_osdSharedDeps_React_["useState"])("");Object(external_osdSharedDeps_React_["useEffect"])(()=>{const checkIfVisualizable=async()=>{const visualizable=await isFieldVisualizable(field,indexPattern.id,columns).catch(()=>false);setShowVisualizeLink(visualizable);if(visualizable){const href=await getVisualizeHref(field,indexPattern.id,columns).catch(()=>"");setVisualizeLink(href||"")}};checkIfVisualizable()},[field,indexPattern.id,columns]);const handleVisualizeLinkClick=event=>{event.preventDefault();triggerVisualizeActions(field,indexPattern.id,columns)};return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement("div",{className:"dscFieldDetails","data-test-subj":"fieldVisualizeContainer"},details.error&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs","data-test-subj":"fieldVisualizeError"},details.error),!details.error&&details.buckets.length>0&&external_osdSharedDeps_React_default.a.createElement("div",{style:{marginTop:"4px"},"data-test-subj":"fieldVisualizeBucketContainer"},details.buckets.map((bucket,idx)=>external_osdSharedDeps_React_default.a.createElement(DiscoverFieldBucket,{key:"bucket".concat(idx),bucket:bucket,field:field,onAddFilter:onAddFilter}))),showVisualizeLink&&visualizeLink&&external_osdSharedDeps_React_default.a.createElement("div",{"data-test-subj":"fieldVisualizeLink"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSpacer"],{size:"xs"}),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButton"],{onClick:e=>handleVisualizeLinkClick(e),href:visualizeLink,size:"s",className:"dscFieldDetails__visualizeBtn","data-test-subj":"fieldVisualize-".concat(field.name)},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.detailViews.visualizeLinkText",defaultMessage:"Visualize"})),warnings.length>0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiIconTip"],{type:"alert",color:"warning",content:warnings.join(" ")}))),!details.error&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs",textAlign:"center"},!indexPattern.metaFields.includes(field.name)&&!field.scripted?external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiLink"],{onClick:()=>onAddFilter("_exists_",field.name,"+")},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.detailViews.existsText",defaultMessage:"Exists in"})," ",details.exists):external_osdSharedDeps_React_default.a.createElement("span",null,details.exists)," ","/ ",details.total," ",external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.detailViews.recordsText",defaultMessage:"records"}))))}var opensearchDashboardsReact_public_=__webpack_require__(23);var helpers=__webpack_require__(25);function getFieldTypeName(type){switch(type){case"boolean":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.booleanAriaLabel",{defaultMessage:"Boolean field"});case"conflict":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.conflictFieldAriaLabel",{defaultMessage:"Conflicting field"});case"date":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.dateFieldAriaLabel",{defaultMessage:"Date field"});case"geo_point":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.geoPointFieldAriaLabel",{defaultMessage:"Geo point field"});case"geo_shape":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.geoShapeFieldAriaLabel",{defaultMessage:"Geo shape field"});case"ip":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.ipAddressFieldAriaLabel",{defaultMessage:"IP address field"});case"murmur3":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.murmur3FieldAriaLabel",{defaultMessage:"Murmur3 field"});case"number":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.numberFieldAriaLabel",{defaultMessage:"Number field"});case"source":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.sourceFieldAriaLabel",{defaultMessage:"Source field"});case"string":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.stringFieldAriaLabel",{defaultMessage:"String field"});case"nested":return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.nestedFieldAriaLabel",{defaultMessage:"Nested field"});default:return external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldNameIcons.unknownFieldAriaLabel",{defaultMessage:"Unknown field"})}}var discover_field=__webpack_require__(156);const DiscoverField=_ref=>{let{field:field,selected:selected,onAddField:onAddField,onRemoveField:onRemoveField,columns:columns,indexPattern:indexPattern,onAddFilter:onAddFilter,getDetails:getDetails,useShortDots:useShortDots}=_ref;const addLabelAria=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.addButtonAriaLabel",{defaultMessage:"Add {field} to table",values:{field:field.name}});const removeLabelAria=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.removeButtonAriaLabel",{defaultMessage:"Remove {field} from table",values:{field:field.name}});const infoLabelAria=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.infoButtonAriaLabel",{defaultMessage:"View {field} summary",values:{field:field.name}});const isSourceField=field.name==="_source";const[infoIsOpen,setOpen]=Object(external_osdSharedDeps_React_["useState"])(false);const toggleDisplay=f=>{if(selected){onRemoveField(f.name)}else{onAddField(f.name)}};function wrapOnDot(str){return str?str.replace(/\./g,".​"):""}const fieldName=external_osdSharedDeps_React_default.a.createElement("span",{"data-test-subj":"field-".concat(field.name),title:field.name,className:"dscSidebarField__name eui-textBreakWord"},useShortDots?wrapOnDot(Object(helpers["b"])(field.name)):wrapOnDot(field.displayName));let actionButton;if(!isSourceField&&!selected){actionButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{delay:"long",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.addFieldTooltip",{defaultMessage:"Add field as column"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"plusInCircleFilled",onClick:ev=>{if(ev.type==="click"){ev.currentTarget.focus()}ev.preventDefault();ev.stopPropagation();toggleDisplay(field)},"data-test-subj":"fieldToggle-".concat(field.name),"aria-label":addLabelAria,className:"dscSidebarField__actionButton"}))}else if(!isSourceField&&selected){actionButton=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiToolTip"],{delay:"long",content:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.removeFieldTooltip",{defaultMessage:"Remove field from table"})},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{color:"danger",iconType:"cross",onClick:ev=>{if(ev.type==="click"){ev.currentTarget.focus()}ev.preventDefault();ev.stopPropagation();toggleDisplay(field)},"data-test-subj":"fieldToggle-".concat(field.name),"aria-label":removeLabelAria,className:"dscSidebarField__actionButton"}))}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{gutterSize:"s",alignItems:"center",responsive:false,className:"dscSidebarField"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(opensearchDashboardsReact_public_["FieldIcon"],{type:field.type,label:getFieldTypeName(field.type),scripted:field.scripted})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:true},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiText"],{size:"xs"},fieldName)),!isSourceField&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{ownFocus:true,display:"block",isOpen:infoIsOpen,closePopover:()=>setOpen(false),anchorPosition:"rightUp",button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonIcon"],{iconType:"inspect",size:"xs",onClick:()=>setOpen(state=>!state),"aria-label":infoLabelAria,"data-test-subj":"field-".concat(field.name,"-showDetails"),className:"dscSidebarField__actionButton"}),panelClassName:"dscSidebarItem__fieldPopoverPanel"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverTitle"],null," ",external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.discoverField.fieldTopValuesLabel",{defaultMessage:"Top 5 values"})),infoIsOpen&&external_osdSharedDeps_React_default.a.createElement(DiscoverFieldDetails,{columns:columns,details:getDetails(field),field:field,indexPattern:indexPattern,onAddFilter:onAddFilter}))),!isSourceField&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},actionButton))};const NUM_FILTERS=3;function DiscoverFieldSearch(_ref){let{onChange:onChange,value:value,types:types}=_ref;const searchPlaceholder=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.searchPlaceHolder",{defaultMessage:"Search field names"});const aggregatableLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.aggregatableLabel",{defaultMessage:"Aggregatable"});const searchableLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.searchableLabel",{defaultMessage:"Searchable"});const typeLabel=external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.typeLabel",{defaultMessage:"Type"});const typeOptions=types?types.map(type=>({value:type,text:type})):[{value:"any",text:"any"}];const[activeFiltersCount,setActiveFiltersCount]=Object(external_osdSharedDeps_React_["useState"])(0);const[isPopoverOpen,setPopoverOpen]=Object(external_osdSharedDeps_React_["useState"])(false);const[values,setValues]=Object(external_osdSharedDeps_React_["useState"])({searchable:"any",aggregatable:"any",type:"any",missing:true});const filterBtnAriaLabel=isPopoverOpen?external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.toggleFieldFilterButtonHideAriaLabel",{defaultMessage:"Hide field filter settings"}):external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.toggleFieldFilterButtonShowAriaLabel",{defaultMessage:"Show field filter settings"});const handleFacetButtonClicked=()=>{setPopoverOpen(!isPopoverOpen)};const applyFilterValue=(id,filterValue)=>{switch(filterValue){case"any":if(id!=="type"){onChange(id,undefined)}else{onChange(id,filterValue)}break;case"true":onChange(id,true);break;case"false":onChange(id,false);break;default:onChange(id,filterValue)}};const isFilterActive=(name,filterValue)=>name!=="missing"&&filterValue!=="any";const handleValueChange=(name,filterValue)=>{const previousValue=values[name];updateFilterCount(name,previousValue,filterValue);const updatedValues={...values};updatedValues[name]=filterValue;setValues(updatedValues);applyFilterValue(name,filterValue)};const updateFilterCount=(name,previousValue,currentValue)=>{const previouslyFilterActive=isFilterActive(name,previousValue);const filterActive=isFilterActive(name,currentValue);const diff=Number(filterActive)-Number(previouslyFilterActive);setActiveFiltersCount(activeFiltersCount+diff)};const handleMissingChange=e=>{const missingValue=e.target.checked;handleValueChange("missing",missingValue)};const select=(id,selectOptions,selectValue)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSelect"],{id:"".concat(id,"-select"),options:selectOptions,value:selectValue,onChange:e=>handleValueChange(id,e.target.value),"aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.fieldSelectorLabel",{defaultMessage:"Selection of {id} filter options",values:{id:id}}),"data-test-subj":"".concat(id,"Select"),compressed:true});const toggleButtons=id=>[{id:"".concat(id,"-any"),label:"any"},{id:"".concat(id,"-true"),label:"yes"},{id:"".concat(id,"-false"),label:"no"}];const buttonGroup=(id,legend)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiButtonGroup"],{legend:legend,options:toggleButtons(id),idSelected:"".concat(id,"-").concat(values[id]),onChange:optionId=>handleValueChange(id,optionId.replace("".concat(id,"-"),"")),buttonSize:"compressed",isFullWidth:true,"data-test-subj":"".concat(id,"ButtonGroup")});const selectionPanel=external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{hasBorder:false,hasShadow:false,paddingSize:"s"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiForm"],{"data-test-subj":"filterSelectionPanel"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:aggregatableLabel,display:"columnCompressed"},buttonGroup("aggregatable",aggregatableLabel)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:searchableLabel,display:"columnCompressed"},buttonGroup("searchable",searchableLabel)),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFormRow"],{fullWidth:true,label:typeLabel,display:"columnCompressed"},select("type",typeOptions,values.type))));return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexGroup"],{responsive:false,gutterSize:"xs"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiOutsideClickDetector"],{onOutsideClick:()=>{},isDisabled:!isPopoverOpen},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFieldSearch"],{"aria-label":searchPlaceholder,"data-test-subj":"fieldFilterSearchInput",fullWidth:true,onChange:event=>onChange("name",event.currentTarget.value),placeholder:searchPlaceholder,value:value}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFlexItem"],{grow:false},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterGroup"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopover"],{id:"dataPanelTypeFilter",panelClassName:"euiFilterGroup__popoverPanel",panelPaddingSize:"none",anchorPosition:"downLeft",display:"block",isOpen:isPopoverOpen,closePopover:()=>{setPopoverOpen(false)},button:external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiFilterButton"],{iconType:"filter",iconSide:"left",hasActiveFilters:activeFiltersCount>0,"aria-label":filterBtnAriaLabel,"data-test-subj":"toggleFieldFilterButton",numFilters:NUM_FILTERS,onClick:handleFacetButtonClicked,numActiveFilters:activeFiltersCount,isSelected:isPopoverOpen},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.fieldFilterFacetButtonLabel",defaultMessage:"Filter by type"}))},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverTitle"],null,external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.filterByTypeLabel",{defaultMessage:"Filter by type"})),selectionPanel,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPopoverFooter"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSwitch"],{label:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.hideMissingFieldsLabel",{defaultMessage:"Hide missing fields"}),checked:values.missing,onChange:handleMissingChange,"data-test-subj":"missingSwitch"}))))))}var common=__webpack_require__(8);function getDefaultFieldFilter(){return{missing:true,type:"any",name:"",aggregatable:null,searchable:null}}function setFieldFilterProp(state,name,value){const newState={...state};if(name==="missing"){newState.missing=Boolean(value)}else if(name==="aggregatable"){newState.aggregatable=typeof value!=="boolean"?null:value}else if(name==="searchable"){newState.searchable=typeof value!=="boolean"?null:value}else if(name==="name"){newState.name=String(value)}else if(name==="type"){newState.type=String(value)}return newState}function isFieldFiltered(field,filterState,fieldCounts){const matchFilter=filterState.type==="any"||field.type===filterState.type;const isAggregatable=filterState.aggregatable===null||field.aggregatable===filterState.aggregatable;const isSearchable=filterState.searchable===null||field.searchable===filterState.searchable;const scriptedOrMissing=!filterState.missing||field.type==="_source"||field.scripted||fieldCounts[field.name]>0;const matchName=!filterState.name||field.name.indexOf(filterState.name)!==-1;return matchFilter&&isAggregatable&&isSearchable&&scriptedOrMissing&&matchName}function groupFields(fields,columns,popularLimit,fieldCounts,fieldFilterState){const result={selected:[],popular:[],unpopular:[]};if(!Array.isArray(fields)||!Array.isArray(columns)||typeof fieldCounts!=="object"){return result}const popular=fields.filter(field=>!columns.includes(field.name)&&field.count).sort((a,b)=>(b.count||0)-(a.count||0)).map(field=>field.name).slice(0,popularLimit);const compareFn=(a,b)=>{if(!a.displayName){return 0}return a.displayName.localeCompare(b.displayName||"")};const fieldsSorted=fields.sort(compareFn);for(const field of fieldsSorted){if(!isFieldFiltered(field,fieldFilterState,fieldCounts)){continue}if(columns.includes(field.name)){result.selected.push(field)}else if(popular.includes(field.name)&&field.type!=="_source"){result.popular.push(field)}else if(field.type!=="_source"){result.unpopular.push(field)}}result.selected.sort((a,b)=>{const aIndex=columns.indexOf(a.name);const bIndex=columns.indexOf(b.name);return aIndex-bIndex});return result}const NO_ANALYSIS_TYPES=["geo_point","geo_shape","attachment"];const getFieldValues=_ref=>{let{hits:hits,field:field,indexPattern:indexPattern}=_ref;const name=field.name;const flattenHit=indexPattern.flattenHit;return hits.map(hit=>flattenHit(hit)[name])};const getFieldValueCounts=params=>{const{hits:hits,field:field,indexPattern:indexPattern,count:count=5,grouped:grouped=false}=params;const{type:fieldType}=field;if(NO_ANALYSIS_TYPES.includes(fieldType)){return{error:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForGeoFieldsErrorMessage",{defaultMessage:"Analysis is not available for {fieldType} fields.",values:{fieldType:fieldType}})}}const allValues=getFieldValues({hits:hits,field:field,indexPattern:indexPattern});const missing=allValues.filter(v=>v===undefined||v===null).length;try{const groups=groupValues(allValues,grouped);const counts=Object.keys(groups).sort((a,b)=>groups[b].count-groups[a].count).slice(0,count).map(key=>({value:groups[key].value,count:groups[key].count,percent:groups[key].count/(hits.length-missing)*100,display:indexPattern.getFormatterForField(field).convert(groups[key].value)}));if(hits.length===missing){return{error:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.fieldCalculator.fieldIsNotPresentInDocumentsErrorMessage",{defaultMessage:"This field is present in your OpenSearch mapping but not in the {hitsLength} documents shown in the doc table. You may still be able to visualize or search on it.",values:{hitsLength:hits.length}})}}return{total:hits.length,exists:hits.length-missing,missing:missing,buckets:counts}}catch(e){return{error:e instanceof Error?e.message:String(e)}}};const groupValues=(allValues,grouped)=>{const values=grouped?allValues:allValues.flat();return values.filter(v=>{if(v instanceof Object&&!Array.isArray(v)){throw new Error(external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.fieldCalculator.analysisIsNotAvailableForObjectFieldsErrorMessage",{defaultMessage:"Analysis is not available for object fields."}))}return v!==undefined&&v!==null}).reduce((groups,value)=>{if(groups.hasOwnProperty(value)){groups[value].count++}else{groups[value]={value:value,count:1}}return groups},{})};function get_details_getDetails(field,hits,indexPattern){const defaultDetails={error:"",exists:0,total:0,buckets:[]};if(!indexPattern){return{...defaultDetails,error:external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.noIndexPatternSelectedErrorMessage",{defaultMessage:"Index pattern not specified."})}}const details={...defaultDetails,...getFieldValueCounts({hits:hits,field:field,indexPattern:indexPattern,count:5,grouped:false})};if(details.buckets){for(const bucket of details.buckets){bucket.display=indexPattern.getFormatterForField(field).convert(bucket.value)}}return details}function getIndexPatternFieldList(indexPattern,fieldCounts){if(!indexPattern||!fieldCounts)return[];return[...indexPattern.fields.getAll()]}function DiscoverSidebar(_ref){let{columns:columns,fieldCounts:fieldCounts,hits:hits,onAddField:onAddField,onAddFilter:onAddFilter,onRemoveField:onRemoveField,onReorderFields:onReorderFields,selectedIndexPattern:selectedIndexPattern}=_ref;const[fields,setFields]=Object(external_osdSharedDeps_React_["useState"])(null);const[fieldFilterState,setFieldFilterState]=Object(external_osdSharedDeps_React_["useState"])(getDefaultFieldFilter());const services=Object(external_osdSharedDeps_React_["useMemo"])(()=>Object(opensearch_dashboards_services["f"])(),[]);Object(external_osdSharedDeps_React_["useEffect"])(()=>{const newFields=getIndexPatternFieldList(selectedIndexPattern,fieldCounts);setFields(newFields)},[selectedIndexPattern,fieldCounts,hits,services]);const onChangeFieldSearch=Object(external_osdSharedDeps_React_["useCallback"])((field,value)=>{const newState=setFieldFilterProp(fieldFilterState,field,value);setFieldFilterState(newState)},[fieldFilterState]);const getDetailsByField=Object(external_osdSharedDeps_React_["useCallback"])(ipField=>get_details_getDetails(ipField,hits,selectedIndexPattern),[hits,selectedIndexPattern]);const popularLimit=services.uiSettings.get(common["f"]);const useShortDots=services.uiSettings.get(data_public_["UI_SETTINGS"].SHORT_DOTS_ENABLE);const{selected:selectedFields,popular:popularFields,unpopular:unpopularFields}=Object(external_osdSharedDeps_React_["useMemo"])(()=>groupFields(fields,columns,popularLimit,fieldCounts,fieldFilterState),[fields,columns,popularLimit,fieldCounts,fieldFilterState]);const fieldTypes=Object(external_osdSharedDeps_React_["useMemo"])(()=>{const result=["any"];if(Array.isArray(fields)){for(const field of fields){if(result.indexOf(field.type)===-1){result.push(field.type)}}}return result},[fields]);const onDragEnd=Object(external_osdSharedDeps_React_["useCallback"])(_ref2=>{let{source:source,destination:destination}=_ref2;if(!source||!destination||!fields)return;if(source.droppableId==="SELECTED_FIELDS"&&destination.droppableId==="SELECTED_FIELDS"){onReorderFields(source.index,destination.index);return}if(source.droppableId!=="SELECTED_FIELDS"&&destination.droppableId==="SELECTED_FIELDS"){const fieldListMap={POPULAR_FIELDS:popularFields,UNPOPULAR_FIELDS:unpopularFields};const fieldList=fieldListMap[source.droppableId];const field=fieldList[source.index];onAddField(field.name,destination.index);return}},[fields,onAddField,onReorderFields,popularFields,unpopularFields]);if(!selectedIndexPattern||!fields){return null}return external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["I18nProvider"],null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDragDropContext"],{onDragEnd:onDragEnd},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSplitPanel"].Outer,{className:"sidebar-list eui-yScroll","aria-label":external_osdSharedDeps_OsdI18n_["i18n"].translate("discover.fieldChooser.filter.indexAndFieldsSectionAriaLabel",{defaultMessage:"Index and fields"}),borderRadius:"none",color:"transparent"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSplitPanel"].Inner,{grow:false,paddingSize:"s"},external_osdSharedDeps_React_default.a.createElement(DiscoverFieldSearch,{onChange:onChangeFieldSearch,value:fieldFilterState.name,types:fieldTypes})),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiSplitPanel"].Inner,{className:"eui-yScroll",paddingSize:"none"},fields.length>0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_React_default.a.Fragment,null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",id:"selected_fields",className:"dscSideBarFieldListHeader"},external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.filter.selectedFieldsTitle",defaultMessage:"Selected fields"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"SELECTED_FIELDS",spacing:"m","data-test-subj":"fieldList-selected"},selectedFields.map((field,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"m",key:"field".concat(field.name),draggableId:field.name,index:index},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{"data-attr-field":field.name,paddingSize:"s",className:"dscSidebar__item","data-test-subj":"fieldList-field"},external_osdSharedDeps_React_default.a.createElement(DiscoverField,{field:field,selected:true,onAddField:onAddField,onRemoveField:onRemoveField,columns:columns,indexPattern:selectedIndexPattern,getDetails:getDetailsByField,useShortDots:useShortDots,onAddFilter:onAddFilter}))))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",id:"available_fields",className:"dscSideBarFieldListHeader"},external_osdSharedDeps_React_default.a.createElement("h3",null,external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.filter.availableFieldsTitle",defaultMessage:"Available fields"}))),popularFields.length>0&&external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{hasBorder:false,paddingSize:"none",hasShadow:false,className:"dscFieldList dscFieldList--popular","aria-labelledby":"available_fields available_fields_popular","data-test-subj":"fieldList-popular",color:"primary"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiTitle"],{size:"xxxs",className:"dscSideBarFieldListHeader"},external_osdSharedDeps_React_default.a.createElement("h4",{style:{fontWeight:"normal"},id:"available_fields_popular"},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_OsdI18nReact_["FormattedMessage"],{id:"discover.fieldChooser.filter.popularTitle",defaultMessage:"Popular"}))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"POPULAR_FIELDS",spacing:"m",cloneDraggables:true},popularFields.map((field,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"m",key:"field".concat(field.name),draggableId:field.name,index:index},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{"data-attr-field":field.name,paddingSize:"s",className:"dscSidebar__item","data-test-subj":"fieldList-field"},external_osdSharedDeps_React_default.a.createElement(DiscoverField,{columns:columns,field:field,indexPattern:selectedIndexPattern,onAddField:onAddField,onRemoveField:onRemoveField,onAddFilter:onAddFilter,getDetails:getDetailsByField,useShortDots:useShortDots})))))),external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDroppable"],{droppableId:"UNPOPULAR_FIELDS",spacing:"m",cloneDraggables:true,className:"dscFieldList dscFieldList--unpopular","aria-labelledby":"available_fields","data-test-subj":"fieldList-unpopular"},unpopularFields.map((field,index)=>external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiDraggable"],{spacing:"m",key:"field".concat(field.name),draggableId:field.name,index:index},external_osdSharedDeps_React_default.a.createElement(external_osdSharedDeps_ElasticEui_["EuiPanel"],{"data-attr-field":field.name,paddingSize:"s",className:"dscSidebar__item","data-test-subj":"fieldList-field"},external_osdSharedDeps_React_default.a.createElement(DiscoverField,{columns:columns,field:field,indexPattern:selectedIndexPattern,onAddField:onAddField,onRemoveField:onRemoveField,onAddFilter:onAddFilter,getDetails:getDetailsByField,useShortDots:useShortDots}))))))))))}var context=__webpack_require__(73);var use_search=__webpack_require__(81);var popularize_field=__webpack_require__(79);function DiscoverPanel(props){const{services:services}=Object(opensearchDashboardsReact_public_["useOpenSearchDashboards"])();const{data:{query:{filterManager:filterManager}},capabilities:capabilities,indexPatterns:indexPatterns}=services;const{data$:data$,indexPattern:indexPattern}=Object(context["useDiscoverContext"])();const[fetchState,setFetchState]=Object(external_osdSharedDeps_React_["useState"])(data$.getValue());const{columns:columns}=Object(state_management["j"])(state=>({columns:state.discover.columns}));const dispatch=Object(state_management["i"])();Object(external_osdSharedDeps_React_["useEffect"])(()=>{const subscription=data$.subscribe(next=>{if(next.status===use_search["a"].LOADING)return;setFetchState(next)});return()=>{subscription.unsubscribe()}},[data$,fetchState]);const onAddFilter=Object(external_osdSharedDeps_React_["useCallback"])((field,values,operation)=>{var _indexPattern$id;if(!indexPattern)return;const newFilters=data_public_["opensearchFilters"].generateFilters(filterManager,field,values,operation,(_indexPattern$id=indexPattern.id)!==null&&_indexPattern$id!==void 0?_indexPattern$id:"");return filterManager.addFilters(newFilters)},[filterManager,indexPattern]);return external_osdSharedDeps_React_default.a.createElement(DiscoverSidebar,{columns:columns||[],fieldCounts:fetchState.fieldCounts||{},hits:fetchState.rows||[],onAddField:(fieldName,index)=>{var _capabilities$discove;if(indexPattern&&(_capabilities$discove=capabilities.discover)!==null&&_capabilities$discove!==void 0&&_capabilities$discove.save){Object(popularize_field["a"])(indexPattern,fieldName,indexPatterns)}dispatch(Object(state_management["a"])({column:fieldName,index:index}))},onRemoveField:fieldName=>{var _capabilities$discove2;if(indexPattern&&(_capabilities$discove2=capabilities.discover)!==null&&_capabilities$discove2!==void 0&&_capabilities$discove2.save){Object(popularize_field["a"])(indexPattern,fieldName,indexPatterns)}dispatch(Object(state_management["b"])(fieldName))},onReorderFields:(source,destination)=>{dispatch(Object(state_management["c"])({source:source,destination:destination}))},selectedIndexPattern:indexPattern,onAddFilter:onAddFilter})}},79:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return popularizeField}));async function popularizeField(indexPattern,fieldName,indexPatternsService){if(!indexPattern.id)return;const field=indexPattern.fields.getByName(fieldName);if(!field){return}field.count++;try{await indexPatternsService.updateSavedObject(indexPattern,0,true)}catch{}}}}]);